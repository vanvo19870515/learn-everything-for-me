Há»ŒC N8N Tá»ª CON Sá» 0 - HÆ¯á»šNG DáºªN SIÃŠU CHI TIáº¾T DÃ€NH CHO NGÆ¯á»œI Má»šI
PHáº¦N 1: HIá»‚U N8N NHÆ¯ "NGÆ¯á»œI GIÃšP VIá»†C áº¢O" Cá»¦A Báº N
1.1 Giáº£i thÃ­ch báº±ng vÃ­ dá»¥ cá»¥ thá»ƒ hÃ ng ngÃ y
VÃ­ dá»¥ 1: Báº¡n lÃ  giÃ¡o viÃªn

```text
Má»—i tuáº§n báº¡n pháº£i:
1. Nháº­n bÃ i táº­p tá»« email há»c sinh
2. Cháº¥m Ä‘iá»ƒm vÃ  ghi vÃ o Excel
3. Gá»­i email pháº£n há»“i cho tá»«ng há»c sinh
4. Tá»•ng há»£p Ä‘iá»ƒm vÃ o Google Sheets
5. Nháº¯n tin cho phá»¥ huynh há»c sinh yáº¿u

Vá»›i n8n, báº¡n chá»‰ cáº§n:
- CÃ i Ä‘áº·t 1 láº§n duy nháº¥t
- Tá»« Ä‘Ã³ vá» sau, má»i viá»‡c tá»± Ä‘á»™ng cháº¡y
- Báº¡n cÃ³ thÃªm thá»i gian dáº¡y há»c thay vÃ¬ lÃ m viá»‡c váº·t
  VÃ­ dá»¥ 2: Báº¡n lÃ  chá»§ shop online nhá»

```

```text
HÃ ng ngÃ y báº¡n pháº£i:
1. Check Facebook/Instagram cÃ³ ai nháº¯n Ä‘áº·t hÃ ng khÃ´ng
2. Ghi Ä‘Æ¡n hÃ ng vÃ o sá»• Excel
3. TÃ­nh tiá»n ship, tá»•ng tiá»n
4. Nháº¯n tin xÃ¡c nháº­n cho khÃ¡ch
5. ÄÄƒng kÃ½ Ä‘Æ¡n hÃ ng vá»›i Ä‘á»‘i tÃ¡c váº­n chuyá»ƒn

n8n sáº½ lÃ m háº¿t táº¥t cáº£, báº¡n chá»‰ cáº§n Ä‘Ã³ng gÃ³i hÃ ng!
1.2 n8n lÃ  gÃ¬? So sÃ¡nh dá»… hiá»ƒu
```

```text
n8n = "ná»‘i" + "tá»± Ä‘á»™ng"
Giá»‘ng nhÆ°:
- CÃ´ng táº¯c tá»± Ä‘á»™ng báº­t Ä‘Ã¨n khi trá»i tá»‘i
- Robot hÃºt bá»¥i tá»± cháº¡y
- Email tráº£ lá»i tá»± Ä‘á»™ng khi báº¡n Ä‘i nghá»‰
  Báº£ng so sÃ¡nh vá»›i cÃ´ng cá»¥ khÃ¡c:

CÃ´ng cá»¥	Giá»‘ng nhÆ°	GiÃ¡	Æ¯u Ä‘iá»ƒm	NhÆ°á»£c Ä‘iá»ƒm
n8n	NgÆ°á»i giÃºp viá»‡c Ä‘a nÄƒng	MIá»„N PHÃ 100%	Tá»± cÃ i trÃªn mÃ¡y mÃ¬nh, khÃ´ng giá»›i háº¡n	Pháº£i tá»± cÃ i Ä‘áº·t
Zapier	NgÆ°á»i giÃºp viá»‡c chuyÃªn nghiá»‡p	20-100$/thÃ¡ng	Dá»… dÃ¹ng, khÃ´ng cáº§n cÃ i	Äáº¯t, giá»›i háº¡n sá»‘ láº§n cháº¡y
IFTTT	NgÆ°á»i giÃºp viá»‡c Ä‘Æ¡n giáº£n	Miá»…n phÃ­/tráº£ phÃ­	Ráº¥t Ä‘Æ¡n giáº£n	Ãt tÃ­nh nÄƒng
Make	Ká»¹ sÆ° tá»± Ä‘á»™ng hÃ³a	10-50$/thÃ¡ng	Máº¡nh máº½	Phá»©c táº¡p, Ä‘áº¯t
1.3 CÃ¡c khÃ¡i niá»‡m CÆ  Báº¢N NHáº¤T trong n8n
1. Workflow (Luá»“ng cÃ´ng viá»‡c):

```

```text
- LÃ  1 báº£n váº½ káº¿ hoáº¡ch tá»± Ä‘á»™ng hÃ³a
- VÃ­ dá»¥: "Káº¿ hoáº¡ch gá»­i email sinh nháº­t"
- Má»—i workflow lÃ m 1 viá»‡c cá»¥ thá»ƒ
2. Node (NÃºt):

```

```text
- LÃ  1 bÆ°á»›c trong káº¿ hoáº¡ch
- VÃ­ dá»¥:
    + BÆ°á»›c 1: Äá»c danh sÃ¡ch sinh nháº­t (node Google Sheets)
    + BÆ°á»›c 2: Gá»­i email (node Gmail)
    + BÆ°á»›c 3: Nháº¯n tin Telegram (node Telegram)
3. Connection (Káº¿t ná»‘i):

```

```text
- LÃ  mÅ©i tÃªn ná»‘i cÃ¡c node
- Chá»‰ Ä‘Æ°á»ng Ä‘i cá»§a dá»¯ liá»‡u
- VÃ­ dá»¥: Dá»¯ liá»‡u tá»« Google Sheets â†’ Gmail â†’ Telegram
4. Trigger (KÃ­ch hoáº¡t):

```

```text
- LÃ  cÃ¡i Báº¬T cÃ´ng táº¯c
- VÃ­ dá»¥:
    + HÃ ng ngÃ y lÃºc 8h sÃ¡ng (Schedule)
    + Khi cÃ³ email má»›i (Email Trigger)
    + Khi cÃ³ ai Ä‘Ã³ gá»­i tin nháº¯n (Webhook)
      PHáº¦N 2: CÃ€I Äáº¶T n8n - Tá»ªNG BÆ¯á»šC Tá»ª A Äáº¾N Z
      2.1 CÃ i Ä‘áº·t trÃªn Windows (CÃCH Dá»„ NHáº¤T CHO NGÆ¯á»œI Má»šI)
      PhÆ°Æ¡ng phÃ¡p Dá»„ NHáº¤T: DÃ¹ng npx (khÃ´ng cáº§n cÃ i gÃ¬ trÆ°á»›c)

BÆ°á»›c 1: Má»Ÿ Command Prompt

Nháº¥n Windows + R

GÃµ cmd â†’ Enter

BÆ°á»›c 2: Cháº¡y lá»‡nh Ä‘Æ¡n giáº£n

```

```cmd
npx n8n
*Láº§n Ä‘áº§u cháº¡y sáº½ máº¥t 1-2 phÃºt Ä‘á»ƒ táº£i vá»*

BÆ°á»›c 3: Truy cáº­p n8n

Má»Ÿ trÃ¬nh duyá»‡t (Chrome/Firefox)

GÃµ: http://localhost:5678

Username: admin@n8n.io

Password: password

BÆ°á»›c 4: Äá»•i máº­t kháº©u (QUAN TRá»ŒNG!)

```

```text
1. Click vÃ o avatar gÃ³c pháº£i
2. Chá»n "Settings"
3. Chá»n "Change Password"
4. Äáº·t máº­t kháº©u máº¡nh
   2.2 CÃ i Ä‘áº·t báº±ng Docker (á»”N Äá»ŠNH HÆ N)
   BÆ°á»›c 1: CÃ i Docker Desktop (náº¿u chÆ°a cÃ³)

VÃ o https://www.docker.com/products/docker-desktop

Download phiÃªn báº£n Windows

CÃ i Ä‘áº·t bÃ¬nh thÆ°á»ng (next â†’ next â†’ finish)

BÆ°á»›c 2: Táº¡o thÆ° má»¥c cho n8n

Táº¡o folder C:\n8n trÃªn mÃ¡y tÃ­nh

Trong folder Ä‘Ã³, táº¡o file má»›i tÃªn docker-compose.yml

BÆ°á»›c 3: Copy ná»™i dung nÃ y vÃ o file:

```

```yaml
version: '3.8'

services:
n8n:
image: n8nio/n8n
container_name: n8n
restart: always  # Tá»± Ä‘á»™ng cháº¡y láº¡i náº¿u táº¯t
ports:
- "5678:5678"  # Cá»•ng truy cáº­p
environment:
- N8N_BASIC_AUTH_ACTIVE=true
- N8N_BASIC_AUTH_USER=admin
- N8N_BASIC_AUTH_PASSWORD=matkhau123  # Äá»”I Máº¬T KHáº¨U NÃ€Y!
- N8N_HOST=localhost
volumes:
- n8n_data:/home/node/.n8n  # LÆ°u dá»¯ liá»‡u
- C:/n8n/local-files:/files  # ThÆ° má»¥c chia sáº»

volumes:
n8n_data:
BÆ°á»›c 4: Má»Ÿ Command Prompt trong thÆ° má»¥c C:\n8n

```

```cmd
```

# 1. Má»Ÿ Command Prompt
# 2. GÃµ:
cd C:\n8n

# 3. Cháº¡y lá»‡nh:
docker-compose up -d

# 4. Kiá»ƒm tra Ä‘ang cháº¡y:
docker ps
BÆ°á»›c 5: Truy cáº­p n8n

Má»Ÿ trÃ¬nh duyá»‡t

VÃ o: http://localhost:5678

ÄÄƒng nháº­p: admin / matkhau123

2.3 Cáº¥u trÃºc thÆ° má»¥c sau khi cÃ i
```text
C:\n8n\
â”œâ”€â”€ docker-compose.yml    # File cáº¥u hÃ¬nh
â”œâ”€â”€ local-files\          # ThÆ° má»¥c chia sáº» file
â”‚   â””â”€â”€ data\            # Dá»¯ liá»‡u cá»§a báº¡n
â””â”€â”€ n8n_data\            # Dá»¯ liá»‡u n8n (tá»± Ä‘á»™ng táº¡o)
PHáº¦N 3: LÃ€M QUEN GIAO DIá»†N - THá»°C HÃ€NH NGAY TRONG 10 PHÃšT
3.1 Tour giao diá»‡n CHI TIáº¾T
Khi má»›i vÃ o n8n, báº¡n tháº¥y:

```

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  + New Workflow    ğŸ” Search     âš™ï¸ Settings    â”‚  â† Thanh trÃªn
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  [Menu trÃ¡i]         [VÃ¹ng lÃ m viá»‡c chÃ­nh]     â”‚
â”‚  â€¢ Workflows         â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘    â”‚
â”‚  â€¢ Executions        â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘    â”‚
â”‚  â€¢ Settings          â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘    â”‚
â”‚  â€¢ Credentials       â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘    â”‚
â”‚                      â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘    â”‚
â”‚  [Menu pháº£i]         â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘    â”‚
â”‚  â”‚ All Nodes   â”‚     â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘    â”‚
â”‚  â”‚ â•â•â•â•â•â•â•â•â•â•â• â”‚     â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘    â”‚
â”‚  â”‚ Trigger     â”‚     â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘    â”‚
â”‚  â”‚ Core Nodes  â”‚     â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘    â”‚
â”‚  â”‚ ...         â”‚     â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
3.2 BÃ i thá»±c hÃ nh Äáº¦U TIÃŠN: "Xin chÃ o tháº¿ giá»›i"
Má»¥c tiÃªu: Táº¡o workflow Ä‘áº§u tiÃªn, hiá»ƒu cÆ¡ báº£n nháº¥t

BÆ°á»›c 1: Táº¡o workflow má»›i

```

```text
1. Click "Workflows" (menu trÃ¡i)
2. Click "New workflow"
3. Äáº·t tÃªn: "BÃ i 1 - Xin chÃ o"
   BÆ°á»›c 2: ThÃªm TRIGGER Ä‘áº§u tiÃªn

```

```text
1. á» menu pháº£i, tÃ¬m "Manual Trigger"
2. Click vÃ o nÃ³, giá»¯ chuá»™t vÃ  KÃ‰O vÃ o vÃ¹ng tráº¯ng
3. Tháº£ chuá»™t â†’ Xuáº¥t hiá»‡n Ã´ mÃ u tÃ­m
   BÆ°á»›c 3: ThÃªm NODE xá»­ lÃ½

```

```text
1. á» menu pháº£i, tÃ¬m "Code" (trong Core Nodes)
2. KÃ©o vÃ o bÃªn cáº¡nh Manual Trigger
3. DI CHUYá»†N Ä‘áº¿n gáº§n Manual Trigger
4. Sáº½ xuáº¥t hiá»‡n cÃ¡c cháº¥m trÃ²n
5. Click vÃ o cháº¥m trÃ²n cá»§a Manual Trigger
6. KÃ‰O Ä‘áº¿n cháº¥m trÃ²n cá»§a Code node
7. Báº¡n cÃ³ 1 mÅ©i tÃªn ná»‘i 2 node!
   BÆ°á»›c 4: Cáº¥u hÃ¬nh Code node

```

```text
1. Click vÃ o "Code" node (Ã´ mÃ u xanh)
2. BÃªn pháº£i xuáº¥t hiá»‡n cáº¥u hÃ¬nh
3. TÃ¬m Ã´ "JavaScript Code"
4. XÃ³a háº¿t, gÃµ vÃ o:
```

```javascript
   // Táº¡o biáº¿n tÃªn
   var tenCuaBan = "Báº¡n";
   var gioiTinh = "nam"; // Äá»•i thÃ nh "ná»¯" náº¿u báº¡n lÃ  ná»¯

// Táº¡o lá»i chÃ o
var loiChao = "";
if (gioiTinh == "nam") {
loiChao = "ChÃ o anh " + tenCuaBan + "!";
} else {
loiChao = "ChÃ o chá»‹ " + tenCuaBan + "!";
}

// ThÃªm thá»i gian
var bayGio = new Date();
var gio = bayGio.getHours();
var buoi = "";
if (gio < 12) {
buoi = "buá»•i sÃ¡ng";
} else if (gio < 18) {
buoi = "buá»•i chiá»u";
} else {
buoi = "buá»•i tá»‘i";
}

// Tráº£ káº¿t quáº£
return [{
json: {
loi_chao: loiChao,
thoi_gian: buoi,
gio_hien_tai: gio + " giá»",
ngay_thang: bayGio.toLocaleDateString('vi-VN'),
message: loiChao + " ChÃºc báº¡n má»™t " + buoi + " tá»‘t lÃ nh!"
}
}];
BÆ°á»›c 5: CHáº Y THá»¬ workflow

```

```text
1. Click nÃºt â–¶ "Execute Workflow" (á»Ÿ trÃªn cÃ¹ng)
2. Chá» 1-2 giÃ¢y
3. Click vÃ o "Code" node
4. á» tab "Output", xem káº¿t quáº£!
   Káº¿t quáº£ báº¡n sáº½ tháº¥y:

```

```json
{
"loi_chao": "ChÃ o anh Báº¡n!",
"thoi_gian": "buá»•i sÃ¡ng/chiá»u/tá»‘i",
"gio_hien_tai": "14 giá»",
"ngay_thang": "15/01/2024",
"message": "ChÃ o anh Báº¡n! ChÃºc báº¡n má»™t buá»•i chiá»u tá»‘t lÃ nh!"
}
BÆ°á»›c 6: ThÃªm node Debug Ä‘á»ƒ xem káº¿t quáº£ Ä‘áº¹p hÆ¡n

```

```text
1. TÃ¬m "Debug" node (trong Core Nodes)
2. KÃ©o vÃ o sau Code node
3. Káº¿t ná»‘i Code â†’ Debug
4. Cháº¡y láº¡i workflow
5. Xem káº¿t quáº£ á»Ÿ Debug node
   PHáº¦N 4: HIá»‚U CÃC NODE QUAN TRá»ŒNG - Vá»šI VÃ Dá»¤ Cá»¤ THá»‚
   4.1 CÃ¡c TRIGGER Nodes - Ai báº­t Ä‘Ã¨n?
1. Manual Trigger (KÃ­ch hoáº¡t thá»§ cÃ´ng)

```

```text
- DÃ¹ng khi: Báº¡n muá»‘n tá»± cháº¡y báº±ng tay
- VÃ­ dá»¥:
    + Test workflow
    + Cháº¡y bÃ¡o cÃ¡o khi cáº§n
    + Xuáº¥t dá»¯ liá»‡u theo yÃªu cáº§u
2. Schedule Trigger (Lá»‹ch trÃ¬nh)

```

```text
- DÃ¹ng khi: Cháº¡y tá»± Ä‘á»™ng theo thá»i gian
- VÃ­ dá»¥:
    + 8h sÃ¡ng má»—i ngÃ y: Gá»­i bÃ¡o cÃ¡o
    + Má»—i 1 giá»: Kiá»ƒm tra email
    + 23h Ä‘Ãªm: Backup dá»¯ liá»‡u
      Cáº¥u hÃ¬nh Schedule Trigger:

```

```javascript
// CÃ¡ch 1: Chá»n tá»« dropdown
"Every 10 minutes"   // Má»—i 10 phÃºt
"Every day at 8 AM"  // 8h sÃ¡ng hÃ ng ngÃ y
"Every Monday at 9 AM" // 9h sÃ¡ng thá»© 2

// CÃ¡ch 2: DÃ¹ng Cron (nÃ¢ng cao)
"0 8 * * *"    // 8h sÃ¡ng má»—i ngÃ y
"0 9 * * 1"    // 9h sÃ¡ng thá»© 2
"*/15 * * * *" // Má»—i 15 phÃºt
3. Webhook Trigger (Nháº­n dá»¯ liá»‡u tá»« bÃªn ngoÃ i)

```

```text
- DÃ¹ng khi: CÃ³ á»©ng dá»¥ng khÃ¡c gá»­i dá»¯ liá»‡u cho báº¡n
- VÃ­ dá»¥:
    + Website gá»­i thÃ´ng tin Ä‘Æ¡n hÃ ng
    + Form Ä‘Äƒng kÃ½ gá»­i thÃ´ng tin
    + App mobile gá»­i dá»¯ liá»‡u
      Cáº¥u hÃ¬nh Webhook:

```

```text
Method: POST
Path: /nhan-don-hang  // ÄÆ°á»ng dáº«n riÃªng
Response Mode: On Received  // Tráº£ lá»i ngay

URL sáº½ lÃ : http://localhost:5678/webhook/nhan-don-hang
4. Email Trigger (IMAP) - Nháº­n email tá»± Ä‘á»™ng

```

```text
- DÃ¹ng khi: Cáº§n xá»­ lÃ½ email tá»± Ä‘á»™ng
- VÃ­ dá»¥:
    + Khi khÃ¡ch gá»­i email Ä‘áº·t hÃ ng
    + Khi cÃ³ CV á»©ng tuyá»ƒn
    + Khi nháº­n bÃ¡o cÃ¡o tá»± Ä‘á»™ng
      4.2 CÃ¡c ACTION Nodes - LÃ m gÃ¬ sau khi báº­t Ä‘Ã¨n?
1. HTTP Request Node - Gá»i API/Website

```

```text
- Giá»‘ng nhÆ° trÃ¬nh duyá»‡t thu nhá»
- CÃ³ thá»ƒ: Láº¥y dá»¯ liá»‡u, gá»­i dá»¯ liá»‡u
  VÃ­ dá»¥: Láº¥y thá»i tiáº¿t HÃ  Ná»™i

```

```yaml
URL: https://api.openweathermap.org/data/2.5/weather
Method: GET
Query Parameters:
q: Hanoi,VN
appid: YOUR_API_KEY  # ÄÄƒng kÃ½ free táº¡i openweathermap.org
units: metric
lang: vi
VÃ­ dá»¥: Gá»­i SMS (giáº£ láº­p)

```

```yaml
URL: https://api.sms-gateway.com/send
Method: POST
Headers:
Content-Type: application/json
Authorization: Bearer YOUR_TOKEN
Body (JSON):
{
"to": "{{ $json.phone }}",
"message": "{{ $json.content }}",
"sender": "SHOP"
}
2. Code Node - Viáº¿t mÃ£ tÃ¹y chá»‰nh

```

```text
- Sá»©c máº¡nh vÃ´ háº¡n
- DÃ¹ng JavaScript cÆ¡ báº£n
  VÃ­ dá»¥: TÃ­nh toÃ¡n Ä‘Æ¡n giáº£n

```

```javascript
// Dá»¯ liá»‡u tá»« node trÆ°á»›c
const donHang = $input.first().json;

// TÃ­nh toÃ¡n
const tongTien = donHang.gia * donHang.soLuong;
const phiShip = tongTien > 500000 ? 0 : 30000;
const tongCong = tongTien + phiShip;

// PhÃ¢n loáº¡i khÃ¡ch hÃ ng
var loaiKhachHang = "ThÆ°á»ng";
if (tongCong > 1000000) loaiKhachHang = "VIP";
if (tongCong > 5000000) loaiKhachHang = "VVIP";

// Táº¡o thÃ´ng bÃ¡o
const thongBao = `ÄÆ¡n hÃ ng ${donHang.maDon}
Tá»•ng tiá»n: ${tongCong.toLocaleString('vi-VN')}Ä‘
KhÃ¡ch hÃ ng: ${loaiKhachHang}
Cáº£m Æ¡n quÃ½ khÃ¡ch!`;

// Tráº£ káº¿t quáº£
return [{
json: {
...donHang,  // Giá»¯ nguyÃªn dá»¯ liá»‡u cÅ©
tong_tien: tongTien,
phi_ship: phiShip,
tong_cong: tongCong,
loai_khach_hang: loaiKhachHang,
thong_bao: thongBao
}
}];
3. IF Node - Náº¿u... thÃ¬...

```

```text
- PhÃ¢n nhÃ¡nh cÃ´ng viá»‡c
- Giá»‘ng nhÆ° ngÃ£ ba Ä‘Æ°á»ng
  VÃ­ dá»¥: PhÃ¢n loáº¡i Ä‘Æ¡n hÃ ng

```

```text
Äiá»u kiá»‡n:
1. Náº¿u {{ $json.tong_tien > 1000000 }} â†’ Gá»­i quÃ  táº·ng
2. Náº¿u {{ $json.khach_hang == "VIP" }} â†’ Miá»…n phÃ­ ship
3. Máº·c Ä‘á»‹nh â†’ Xá»­ lÃ½ thÆ°á»ng
4. Switch Node - Nhiá»u lá»±a chá»n

```

```text
- Giá»‘ng nhÆ° báº£ng chá»‰ Ä‘Æ°á»ng
- CÃ³ thá»ƒ cÃ³ nhiá»u hÆ°á»›ng Ä‘i
  VÃ­ dá»¥: PhÃ¢n vÃ¹ng giao hÃ ng

```

```text
Mode: Expression
Rules:
- Rule 1: {{ $json.tinh contains "HÃ  Ná»™i" }} â†’ Khu vá»±c 1
- Rule 2: {{ $json.tinh contains "Há»“ ChÃ­ Minh" }} â†’ Khu vá»±c 2
- Rule 3: {{ ["Háº£i PhÃ²ng", "ÄÃ  Náºµng"].includes($json.tinh) }} â†’ Khu vá»±c 3
  Default: Khu vá»±c 4
5. Wait Node - Chá» Ä‘á»£i

```

```text
- Táº¡m dá»«ng workflow
- VÃ­ dá»¥: Chá» 5 phÃºt rá»“i gá»­i nháº¯c nhá»Ÿ
  Cáº¥u hÃ¬nh Wait:

```

```yaml
// Chá» 1 tiáº¿ng
Mode: For Time Interval
Value: 1
Unit: hours

// Chá» Ä‘áº¿n 9h sÃ¡ng mai
Mode: Until Specified Time
Value: {{ $now.plus(1, 'day').startOf('day').plus(9, 'hours') }}
PHáº¦N 5: 10+ VÃ Dá»¤ THá»°C Táº¾ Tá»ª Dá»„ Äáº¾N KHÃ“
VÃ­ dá»¥ 1: Tá»± Ä‘á»™ng chÃºc má»«ng sinh nháº­t qua Email
Workflow Ä‘Æ¡n giáº£n nháº¥t:

```

```text
1. Schedule Trigger (8h sÃ¡ng hÃ ng ngÃ y)
   â†“
2. Google Sheets (Äá»c danh sÃ¡ch sinh nháº­t)
   â†“
3. Code (Kiá»ƒm tra ai sinh nháº­t hÃ´m nay)
   â†“
4. IF (CÃ³ ai sinh nháº­t khÃ´ng?)
   â”œâ”€â”€ CÃ“ â†’ Gmail (Gá»­i email chÃºc má»«ng)
   â””â”€â”€ KHÃ”NG â†’ Dá»«ng
   Chi tiáº¿t tá»«ng bÆ°á»›c:

BÆ°á»›c 1: Táº¡o Google Sheets

```

```text
Táº¡o file Google Sheets: "Danh sÃ¡ch sinh nháº­t"
Cá»™t A: TÃªn
Cá»™t B: Email
Cá»™t C: NgÃ y sinh (dd/mm/yyyy)
Cá»™t D: ÄÃ£ gá»­i (TRUE/FALSE)
BÆ°á»›c 2: Cáº¥u hÃ¬nh Google Sheets node

```

```yaml
Operation: Read
Spreadsheet ID: (ID tá»« URL Google Sheets)
Sheet Name: "Sheet1"
Range: "A2:D100"  // Äá»c tá»« dÃ²ng 2 Ä‘áº¿n 100
Header Row: 1  // DÃ²ng 1 lÃ  tiÃªu Ä‘á»
BÆ°á»›c 3: Code node kiá»ƒm tra sinh nháº­t

```

```javascript
// Láº¥y danh sÃ¡ch tá»« Google Sheets
const danhSach = $input.all();
const homNay = new Date();
const ngayHomNay = homNay.getDate();
const thangHomNay = homNay.getMonth() + 1;

let danhSachSinhNhat = [];

// Duyá»‡t qua tá»«ng ngÆ°á»i
for (let i = 0; i < danhSach.length; i++) {
const nguoi = danhSach[i].json;

    // Kiá»ƒm tra Ä‘á»‹nh dáº¡ng ngÃ y sinh
    if (nguoi.ngay_sinh) {
        const parts = nguoi.ngay_sinh.split('/');
        if (parts.length === 3) {
            const ngaySinh = parseInt(parts[0]);
            const thangSinh = parseInt(parts[1]);
            
            // Kiá»ƒm tra trÃ¹ng ngÃ y thÃ¡ng
            if (ngaySinh === ngayHomNay && thangSinh === thangHomNay) {
                // Kiá»ƒm tra chÆ°a gá»­i
                if (!nguoi.da_gui || nguoi.da_gui === false) {
                    danhSachSinhNhat.push({
                        ...nguoi,
                        tuoi: homNay.getFullYear() - parseInt(parts[2])
                    });
                }
            }
        }
    }
}

// Tráº£ káº¿t quáº£
if (danhSachSinhNhat.length > 0) {
return danhSachSinhNhat.map(item => ({
json: item
}));
} else {
// KhÃ´ng cÃ³ ai sinh nháº­t
return [{
json: {
thong_bao: "HÃ´m nay khÃ´ng cÃ³ ai sinh nháº­t",
so_luong: 0
}
}];
}
BÆ°á»›c 4: IF node phÃ¢n nhÃ¡nh

```

```text
Äiá»u kiá»‡n: {{ $json.so_luong > 0 }}
- TRUE: CÃ³ sinh nháº­t â†’ Gá»­i email
- FALSE: KhÃ´ng cÃ³ â†’ Dá»«ng
  BÆ°á»›c 5: Gmail node gá»­i email

```

```yaml
To: {{ $json.email }}
Subject: ğŸ‰ ChÃºc má»«ng sinh nháº­t {{ $json.ten }}!
Body (HTML):
<h1>ChÃºc má»«ng sinh nháº­t!</h1>
<p>KÃ­nh gá»­i {{ $json.ten }},</p>
<p>ChÃºc má»«ng sinh nháº­t láº§n thá»© {{ $json.tuoi }} cá»§a báº¡n! ğŸ‚</p>
<p>ChÃºc báº¡n má»™t ngÃ y sinh nháº­t tháº­t vui váº», háº¡nh phÃºc vÃ  thÃ nh cÃ´ng!</p>
<p>TrÃ¢n trá»ng,<br>Äá»™i ngÅ© cá»§a chÃºng tÃ´i</p>
VÃ­ dá»¥ 2: Tá»± Ä‘á»™ng lÆ°u file Ä‘Ã­nh kÃ¨m tá»« Gmail vÃ o Google Drive
Workflow:

```

```text
1. Email Trigger (Kiá»ƒm tra email má»›i má»—i 5 phÃºt)
   â†“
2. IF (Email cÃ³ file Ä‘Ã­nh kÃ¨m khÃ´ng?)
   â†“ (CÃ“)
3. Google Drive (Upload file)
   â†“
4. Gmail (ÄÃ¡nh dáº¥u Ä‘Ã£ Ä‘á»c)
   â†“
5. Telegram (ThÃ´ng bÃ¡o Ä‘Ã£ lÆ°u file)
   Cáº¥u hÃ¬nh chi tiáº¿t:

BÆ°á»›c 1: Email Trigger

```

```yaml
Credential: Gmail (cáº§n cáº¥u hÃ¬nh OAuth2)
Mail Server: imap.gmail.com
Port: 993
Secure: true
Check every: 5
Only unread emails: true
BÆ°á»›c 2: IF node kiá»ƒm tra file Ä‘Ã­nh kÃ¨m

```

```text
Äiá»u kiá»‡n: {{ $json.attachments.length > 0 }}
BÆ°á»›c 3: Google Drive upload

```

```yaml
Operation: Upload
Folder: /n8n/email-attachments/{{ $now.format('YYYY-MM-DD') }}/
Binary Property: attachments[0]
Filename: {{ $json.subject }}_{{ $now.format('HH-mm-ss') }}
VÃ­ dá»¥ 3: Há»‡ thá»‘ng nháº¯c nhá»Ÿ uá»‘ng nÆ°á»›c
Workflow vui váº»:

```

```text
1. Schedule Trigger (Má»—i 2 tiáº¿ng tá»« 8h-20h)
   â†“
2. Telegram (Nháº¯n tin nháº¯c nhá»Ÿ)
   â†“
3. Wait (Äá»£i 30 phÃºt)
   â†“
4. IF (ÄÃ£ uá»‘ng nÆ°á»›c chÆ°a?)
   â”œâ”€â”€ Rá»’I â†’ Telegram (Khen ngá»£i)
   â””â”€â”€ CHÆ¯A â†’ Telegram (Nháº¯c láº¡i)
   Chi tiáº¿t:

BÆ°á»›c 1: Schedule Trigger

```

```text
Cron expression: 0 8-20/2 * * *
Giáº£i thÃ­ch: Cháº¡y vÃ o phÃºt 0, tá»« 8h Ä‘áº¿n 20h, má»—i 2 tiáº¿ng
BÆ°á»›c 2: Telegram gá»­i nháº¯c nhá»Ÿ

```

```yaml
Chat ID: (ID chat cá»§a báº¡n)
Text: |
ğŸ’§ THá»œI GIAN Uá»NG NÆ¯á»šC ğŸ’§

Báº¡n Ä‘Ã£ uá»‘ng nÆ°á»›c chÆ°a?

Náº¿u Rá»’I, reply "R"
Náº¿u CHÆ¯A, reply "C"

(Tá»± Ä‘á»™ng kiá»ƒm tra sau 30 phÃºt)
BÆ°á»›c 3: Wait node

```

```text
Mode: For Time Interval
Value: 30
Unit: minutes
BÆ°á»›c 4: Telegram nháº­n pháº£n há»“i

```

```text
(Báº¡n cáº§n táº¡o bot Telegram riÃªng cho viá»‡c nÃ y)
PHáº¦N 6: Káº¾T Ná»I Vá»šI Dá»ŠCH Vá»¤ PHá»” BIáº¾N
6.1 Káº¿t ná»‘i Google Services
CÃ¡ch láº¥y Google Sheets ID:

```

```text
URL: https://docs.google.com/spreadsheets/d/ABC123DEF456/edit
ID lÃ : ABC123DEF456
Cáº¥u hÃ¬nh Google Sheets Ä‘á»c dá»¯ liá»‡u:

```

```javascript
// Node: Google Sheets
Operation: "Read"
Spreadsheet ID: "ABC123DEF456"
Sheet Name: "Sheet1"
Range: "A2:Z1000"  // Äá»c tá»« A2 Ä‘áº¿n Z1000
Header Row: 1  // DÃ²ng 1 lÃ  tiÃªu Ä‘á»

// Dá»¯ liá»‡u tráº£ vá» sáº½ cÃ³ dáº¡ng:
[
{
"json": {
"STT": 1,
"Ten": "Nguyen Van A",
"Email": "a@gmail.com",
...
}
}
]
Cáº¥u hÃ¬nh Google Sheets ghi dá»¯ liá»‡u:

```

```yaml
Operation: "Append"
Spreadsheet ID: "ABC123DEF456"
Sheet Name: "Sheet1"
Range: "A:Z"  // Tá»± Ä‘á»™ng thÃªm vÃ o dÃ²ng cuá»‘i
Columns: "Auto-Map"  // Tá»± Ä‘á»™ng map theo tÃªn cá»™t
6.2 Káº¿t ná»‘i Telegram
BÆ°á»›c 1: Táº¡o bot Telegram

```

```text
1. Má»Ÿ Telegram, tÃ¬m @BotFather
2. Gá»­i /newbot
3. Äáº·t tÃªn bot (vÃ­ dá»¥: My n8n Bot)
4. Äáº·t username (pháº£i káº¿t thÃºc báº±ng bot, vÃ­ dá»¥: my_n8n_bot)
5. LÆ°u API Token: 123456789:ABCdefGHIjklMNOpqrSTUvwxYZ
   BÆ°á»›c 2: Láº¥y Chat ID

```

```text
1. TÃ¬m @userinfobot trÃªn Telegram
2. Gá»­i /start
3. NÃ³ sáº½ tráº£ vá» ID cá»§a báº¡n (vÃ­ dá»¥: 123456789)
   BÆ°á»›c 3: Cáº¥u hÃ¬nh Telegram node

```

```yaml
Resource: Message
Operation: Send Message
Chat ID: "123456789"  // ID cá»§a báº¡n
Text: "Xin chÃ o! ÄÃ¢y lÃ  tin nháº¯n tá»± Ä‘á»™ng tá»« n8n"
Parse Mode: HTML  // Cho phÃ©p format Ä‘áº¹p
VÃ­ dá»¥ tin nháº¯n format Ä‘áº¹p:

```

```html
<b>ğŸ”” THÃ”NG BÃO ÄÆ N HÃ€NG Má»šI</b>
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ›’ <b>MÃ£ Ä‘Æ¡n:</b> <code>DH001</code>
ğŸ‘¤ <b>KhÃ¡ch hÃ ng:</b> Nguyá»…n VÄƒn A
ğŸ’° <b>Tá»•ng tiá»n:</b> 500,000Ä‘
ğŸ“ <b>Äá»‹a chá»‰:</b> HÃ  Ná»™i
â° <b>Thá»i gian:</b> 14:30 15/01/2024
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… <i>ÄÆ¡n hÃ ng Ä‘Ã£ Ä‘Æ°á»£c tiáº¿p nháº­n</i>
6.3 Káº¿t ná»‘i Gmail
CÃ¡ch 1: DÃ¹ng OAuth2 (an toÃ n nháº¥t)

```

```text
1. Trong n8n, vÃ o Credentials â†’ New
2. Chá»n "OAuth2 API"
3. LÃ m theo hÆ°á»›ng dáº«n (cáº§n cÃ³ Google Cloud Project)
   CÃ¡ch 2: DÃ¹ng App Password (Ä‘Æ¡n giáº£n hÆ¡n)

```

```text
1. VÃ o Google Account â†’ Security
2. Báº­t 2-Step Verification
3. Táº¡o App Password
4. DÃ¹ng password nÃ y trong n8n
   Cáº¥u hÃ¬nh Gmail node gá»­i email:

```

```yaml
From: your.email@gmail.com
To: {{ $json.email_khach_hang }}
Subject: XÃ¡c nháº­n Ä‘Æ¡n hÃ ng {{ $json.ma_don }}
Body (HTML):
<h2>XÃ¡c nháº­n Ä‘Æ¡n hÃ ng</h2>
<p>KÃ­nh gá»­i {{ $json.ten_khach_hang }},</p>
<p>ChÃºng tÃ´i Ä‘Ã£ nháº­n Ä‘Æ°á»£c Ä‘Æ¡n hÃ ng <strong>{{ $json.ma_don }}</strong></p>
<p>Tá»•ng giÃ¡ trá»‹: <strong>{{ $json.tong_tien }}</strong></p>
<p>Tráº¡ng thÃ¡i: Äang xá»­ lÃ½</p>
<p>Cáº£m Æ¡n báº¡n Ä‘Ã£ mua hÃ ng!</p>
PHáº¦N 7: Xá»¬ LÃ Dá»® LIá»†U Vá»šI CODE NODE
7.1 CÃ¡c biáº¿n Ä‘áº·c biá»‡t trong n8n
$json: Dá»¯ liá»‡u tá»« node trÆ°á»›c

```

```javascript
// Láº¥y giÃ¡ trá»‹
const ten = $json.ten;
const tuoi = $json.tuoi;

// Hoáº·c náº¿u cÃ³ nhiá»u items
const items = $input.all();
const itemDauTien = items[0].json;
$input: Táº¥t cáº£ dá»¯ liá»‡u Ä‘áº§u vÃ o

```

```javascript
// Láº¥y táº¥t cáº£ items
const tatCaItems = $input.all();

// Láº¥y item Ä‘áº§u tiÃªn
const item1 = $input.first();

// Láº¥y item thá»© n
const itemN = $input.item[0];  // Item thá»© 0
$node: Truy cáº­p node khÃ¡c

```

```javascript
// Láº¥y dá»¯ liá»‡u tá»« node cÃ³ tÃªn "Google Sheets"
const duLieu = $node["Google Sheets"].json;

// Láº¥y tÃªn node hiá»‡n táº¡i
const tenNode = $node.name;
$now: Thá»i gian hiá»‡n táº¡i

```

```javascript
const bayGio = $now;  // Object Date
const ngay = $now.toISOString();  // 2024-01-15T14:30:00.000Z
const ngayVietNam = $now.format('DD/MM/YYYY HH:mm:ss');

// TÃ­nh toÃ¡n thá»i gian
const ngayMai = $now.plus(1, 'day');
const tuanSau = $now.plus(7, 'days');
const motGioTruoc = $now.minus(1, 'hour');
$env: Biáº¿n mÃ´i trÆ°á»ng

```

```javascript
const apiKey = $env.API_KEY;
const dbPassword = $env.DB_PASSWORD;
7.2 VÃ­ dá»¥ xá»­ lÃ½ dá»¯ liá»‡u thá»±c táº¿
VÃ­ dá»¥ 1: TÃ­nh toÃ¡n hÃ³a Ä‘Æ¡n

```

```javascript
// Dá»¯ liá»‡u tá»« node trÆ°á»›c (giá» hÃ ng)
const gioHang = $json.gio_hang;
const khachHang = $json.khach_hang;

// TÃ­nh tá»•ng tiá»n
let tongTien = 0;
let soLuongSanPham = 0;

for (const sanPham of gioHang) {
const thanhTien = sanPham.gia * sanPham.so_luong;
tongTien += thanhTien;
soLuongSanPham += sanPham.so_luong;

    // ThÃªm field tÃ­nh toÃ¡n cho tá»«ng sáº£n pháº©m
    sanPham.thanh_tien = thanhTien;
    sanPham.thanh_tien_fmt = thanhTien.toLocaleString('vi-VN') + 'Ä‘';
}

// TÃ­nh phÃ­ ship
let phiShip = 0;
if (tongTien > 500000) {
phiShip = 0;  // Miá»…n phÃ­ ship
} else if (khachHang.vip) {
phiShip = 15000;  // VIP giáº£m giÃ¡
} else {
phiShip = 30000;  // ThÆ°á»ng
}

// TÃ­nh VAT (10%)
const vat = tongTien * 0.1;

// Tá»•ng cá»™ng
const tongCong = tongTien + phiShip + vat;

// Táº¡o mÃ£ Ä‘Æ¡n hÃ ng
const maDon = 'DH' + Date.now().toString().slice(-8);

// PhÃ¢n loáº¡i khÃ¡ch hÃ ng
let loaiKhachHang = 'ThÆ°á»ng';
if (tongCong > 2000000) loaiKhachHang = 'VIP';
if (tongCong > 5000000) loaiKhachHang = 'VVIP';

// Táº¡o káº¿t quáº£
return [{
json: {
ma_don: maDon,
khach_hang: khachHang,
gio_hang: gioHang,
tong_tien: tongTien,
tong_tien_fmt: tongTien.toLocaleString('vi-VN') + 'Ä‘',
phi_ship: phiShip,
phi_ship_fmt: phiShip.toLocaleString('vi-VN') + 'Ä‘',
vat: vat,
vat_fmt: vat.toLocaleString('vi-VN') + 'Ä‘',
tong_cong: tongCong,
tong_cong_fmt: tongCong.toLocaleString('vi-VN') + 'Ä‘',
so_luong_san_pham: soLuongSanPham,
loai_khach_hang: loaiKhachHang,
thoi_gian: $now.format('DD/MM/YYYY HH:mm:ss'),

        // ThÃ´ng bÃ¡o Ä‘áº¹p cho email/telegram
        thong_bao: `
ğŸ‰ ÄÆ N HÃ€NG THÃ€NH CÃ”NG ğŸ‰
MÃ£ Ä‘Æ¡n: ${maDon}
KhÃ¡ch hÃ ng: ${khachHang.ten}
Sá»‘ lÆ°á»£ng: ${soLuongSanPham} sáº£n pháº©m
Tá»•ng tiá»n: ${tongCong.toLocaleString('vi-VN')}Ä‘
Loáº¡i khÃ¡ch: ${loaiKhachHang}
`.trim()
}
}];
VÃ­ dá»¥ 2: Xá»­ lÃ½ vÃ  lÃ m sáº¡ch dá»¯ liá»‡u

```

```javascript
// Dá»¯ liá»‡u thÃ´ tá»« form/API
const duLieuTho = $json;

// 1. LÃ m sáº¡ch vÃ  chuáº©n hÃ³a
const duLieuSach = {
// TÃªn: viáº¿t hoa chá»¯ cÃ¡i Ä‘áº§u
ten: duLieuTho.ten
? duLieuTho.ten.trim()
.toLowerCase()
.replace(/\b\w/g, c => c.toUpperCase())
: '',

    // Email: lowercase vÃ  trim
    email: duLieuTho.email 
        ? duLieuTho.email.trim().toLowerCase()
        : '',
    
    // Sá»‘ Ä‘iá»‡n thoáº¡i: chá»‰ giá»¯ sá»‘
    so_dien_thoai: duLieuTho.so_dien_thoai 
        ? duLieuTho.so_dien_thoai.replace(/\D/g, '')
        : '',
    
    // Äá»‹a chá»‰: chuáº©n hÃ³a
    dia_chi: duLieuTho.dia_chi 
        ? duLieuTho.dia_chi.trim()
            .replace(/\s+/g, ' ')  // XÃ³a khoáº£ng tráº¯ng thá»«a
            .replace(/, /g, ', ')   // Äáº£m báº£o format
        : ''
};

// 2. Validate dá»¯ liá»‡u
const loi = [];

// Validate email
if (!duLieuSach.email) {
loi.push('Email khÃ´ng Ä‘Æ°á»£c Ä‘á»ƒ trá»‘ng');
} else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(duLieuSach.email)) {
loi.push('Email khÃ´ng há»£p lá»‡');
}

// Validate phone
if (!duLieuSach.so_dien_thoai) {
loi.push('Sá»‘ Ä‘iá»‡n thoáº¡i khÃ´ng Ä‘Æ°á»£c Ä‘á»ƒ trá»‘ng');
} else if (duLieuSach.so_dien_thoai.length < 10) {
loi.push('Sá»‘ Ä‘iá»‡n thoáº¡i pháº£i cÃ³ Ã­t nháº¥t 10 sá»‘');
}

// 3. Format láº¡i cho Ä‘áº¹p
if (duLieuSach.so_dien_thoai) {
// Format: 0912 345 678
const sdt = duLieuSach.so_dien_thoai;
duLieuSach.so_dien_thoai_formatted =
sdt.substring(0, 4) + ' ' +
sdt.substring(4, 7) + ' ' +
sdt.substring(7);
}

// 4. Táº¡o káº¿t quáº£
return [{
json: {
...duLieuSach,
valid: loi.length === 0,
errors: loi,
error_count: loi.length,
processed_at: $now.toISOString(),

        // Summary
        summary: loi.length === 0 
            ? 'âœ… Dá»¯ liá»‡u há»£p lá»‡'
            : `âŒ CÃ³ ${loi.length} lá»—i: ${loi.join(', ')}`
    }
}];
PHáº¦N 8: Dá»° ÃN THá»°C Táº¾ - Há»† THá»NG QUáº¢N LÃ ÄÆ N HÃ€NG NHá»
8.1 YÃªu cáº§u há»‡ thá»‘ng
```

```text
Shop nhá» bÃ¡n hÃ ng online qua:
1. Facebook Messenger
2. Zalo
3. Website form

Cáº§n há»‡ thá»‘ng tá»± Ä‘á»™ng:
- Nháº­n Ä‘Æ¡n hÃ ng tá»« cÃ¡c nguá»“n
- LÆ°u vÃ o Google Sheets
- TÃ­nh toÃ¡n tá»± Ä‘á»™ng
- ThÃ´ng bÃ¡o cho chá»§ shop
- Gá»­i xÃ¡c nháº­n cho khÃ¡ch
  8.2 Kiáº¿n trÃºc há»‡ thá»‘ng
```

```text
  3 NGUá»’N Dá»® LIá»†U:
1. Facebook Webhook â†’ Workflow 1
2. Zalo Webhook â†’ Workflow 1
3. Website Form â†’ Workflow 1

WORKFLOW CHÃNH (Xá»­ lÃ½ Ä‘Æ¡n hÃ ng):
1. Nháº­n dá»¯ liá»‡u tá»« webhook
2. Validate vÃ  lÃ m sáº¡ch
3. TÃ­nh toÃ¡n giÃ¡
4. LÆ°u vÃ o Google Sheets
5. Gá»­i Telegram cho chá»§ shop
6. Gá»­i email/SMS cho khÃ¡ch
7. Táº¡o mÃ£ váº­n Ä‘Æ¡n (giáº£ láº­p)

WORKFLOW PHá»¤ (BÃ¡o cÃ¡o):
1. Schedule 20h hÃ ng ngÃ y
2. Tá»•ng há»£p doanh thu ngÃ y
3. Gá»­i bÃ¡o cÃ¡o Telegram
   8.3 Triá»ƒn khai chi tiáº¿t
   Workflow 1: Xá»­ lÃ½ Ä‘Æ¡n hÃ ng

BÆ°á»›c 1: Webhook Trigger

```

```yaml
Method: POST
Path: /nhan-don-hang
Response Mode: Response Node
BÆ°á»›c 2: Code Node - Validate

```

```javascript
// Nháº­n dá»¯ liá»‡u tá»« webhook
const donHang = $json;

// Kiá»ƒm tra báº¯t buá»™c
const requiredFields = ['ten_khach', 'so_dien_thoai', 'san_pham'];
const missingFields = [];

for (const field of requiredFields) {
if (!donHang[field] || donHang[field].trim() === '') {
missingFields.push(field);
}
}

if (missingFields.length > 0) {
// Tráº£ vá» lá»—i
return [{
json: {
success: false,
message: `Thiáº¿u thÃ´ng tin: ${missingFields.join(', ')}`,
error_code: 'MISSING_FIELDS'
}
}];
}

// Táº¡o mÃ£ Ä‘Æ¡n hÃ ng
const maDon = 'DH' + Date.now().toString().slice(-6);

// TÃ­nh giÃ¡ (Ä‘Æ¡n giáº£n)
const giaSanPham = {
'ao_phong': 150000,
'ao_somi': 250000,
'quan_jean': 300000
};

const sanPham = donHang.san_pham;
const soLuong = donHang.so_luong || 1;
const gia = giaSanPham[sanPham] || 200000;
const tongTien = gia * soLuong;

// Tráº£ vá» thÃ nh cÃ´ng
return [{
json: {
success: true,
ma_don: maDon,
thoi_gian: $now.format('DD/MM/YYYY HH:mm:ss'),
ten_khach: donHang.ten_khach.trim(),
so_dien_thoai: donHang.so_dien_thoai.replace(/\D/g, ''),
dia_chi: donHang.dia_chi || '',
san_pham: sanPham,
so_luong: soLuong,
gia: gia,
tong_tien: tongTien,
trang_thai: 'MOI_TAO',
ghi_chu: donHang.ghi_chu || ''
}
}];
BÆ°á»›c 3: Google Sheets - LÆ°u Ä‘Æ¡n hÃ ng

```

```yaml
Operation: Append
Spreadsheet ID: "YOUR_SHEET_ID"
Sheet Name: "DonHang"
Range: "A:Z"
Columns: "Auto-Map"
BÆ°á»›c 4: Telegram - ThÃ´ng bÃ¡o chá»§ shop

```

```yaml
Chat ID: "YOUR_CHAT_ID"
Parse Mode: HTML
Text: |
ğŸ›’ <b>ÄÆ N HÃ€NG Má»šI</b>
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“¦ <b>MÃ£ Ä‘Æ¡n:</b> <code>{{ $json.ma_don }}</code>
ğŸ‘¤ <b>KhÃ¡ch:</b> {{ $json.ten_khach }}
ğŸ“ <b>Äiá»‡n thoáº¡i:</b> {{ $json.so_dien_thoai }}
ğŸ“ <b>Äá»‹a chá»‰:</b> {{ $json.dia_chi }}
ğŸ·ï¸ <b>Sáº£n pháº©m:</b> {{ $json.san_pham }}
ğŸ”¢ <b>Sá»‘ lÆ°á»£ng:</b> {{ $json.so_luong }}
ğŸ’° <b>Tá»•ng tiá»n:</b> {{ $json.tong_tien.toLocaleString('vi-VN') }}Ä‘
â° <b>Thá»i gian:</b> {{ $json.thoi_gian }}
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… ÄÃ£ lÆ°u vÃ o há»‡ thá»‘ng
BÆ°á»›c 5: Response Node - Tráº£ vá» cho khÃ¡ch

```

```javascript
// Node: HTTP Request (Response)
// ÄÃ¢y lÃ  response cho webhook ban Ä‘áº§u

return [{
json: {
success: true,
message: "ÄÆ¡n hÃ ng Ä‘Ã£ Ä‘Æ°á»£c tiáº¿p nháº­n!",
order_id: $json.ma_don,
total: $json.tong_tien,
estimated_time: "2-3 ngÃ y",
contact_info: "Hotline: 0912 345 678"
}
}];
PHáº¦N 9: Máº¸O VÃ€ THá»¦ THUáº¬T HAY
9.1 Debug workflow hiá»‡u quáº£
CÃ¡ch 1: DÃ¹ng Debug Node

```

```text
- ThÃªm Debug node sau node cáº§n kiá»ƒm tra
- Cháº¡y workflow
- Xem dá»¯ liá»‡u truyá»n qua Debug node
  CÃ¡ch 2: Console.log trong Code node

```

```javascript
console.log('Dá»¯ liá»‡u Ä‘áº§u vÃ o:', JSON.stringify($json, null, 2));
console.log('Sá»‘ lÆ°á»£ng items:', $input.all().length);

// Xem log á»Ÿ:
// 1. Terminal náº¿u cháº¡y npx n8n
// 2. Docker logs náº¿u cháº¡y Docker
CÃ¡ch 3: Execute Workflow tá»« node cá»¥ thá»ƒ

```

```text
1. Click pháº£i vÃ o node
2. Chá»n "Execute Workflow"
3. Workflow sáº½ cháº¡y tá»« node Ä‘Ã³
   9.2 Xá»­ lÃ½ lá»—i thÃ´ng minh
   Táº¡o workflow xá»­ lÃ½ lá»—i:

```

```text
Main Workflow
â†“ (CÃ³ thá»ƒ lá»—i)
TRY: Node dá»… lá»—i
â†“ (Náº¿u lá»—i)
CATCH: Error Trigger
â†“
CODE: Ghi log lá»—i
â†“
TELEGRAM: BÃ¡o lá»—i cho admin
â†“
GMAIL: Gá»­i email cáº£nh bÃ¡o
Code node xá»­ lÃ½ lá»—i:

```

```javascript
try {
// Code cÃ³ thá»ƒ lá»—i
const result = someRiskyOperation();
return [{ json: result }];
} catch (error) {
// Ghi log chi tiáº¿t
console.error('Lá»—i xáº£y ra:', error);

    return [{
        json: {
            error: true,
            message: error.message,
            stack: error.stack,
            timestamp: new Date().toISOString()
        }
    }];
}
9.3 Tá»‘i Æ°u hiá»‡u suáº¥t
1. Giá»›i háº¡n dá»¯ liá»‡u Ä‘á»c tá»« Google Sheets:

```

```yaml
Range: "A2:E1000"  // Chá»‰ Ä‘á»c 1000 dÃ²ng Ä‘áº§u
Thay vÃ¬: "A:E"     // Äá»c toÃ n bá»™
2. Batch processing khi cÃ³ nhiá»u items:

```

```javascript
// Thay vÃ¬ xá»­ lÃ½ tá»«ng item trong vÃ²ng láº·p
// Gá»™p láº¡i xá»­ lÃ½ 1 láº§n

const items = $input.all();
const processedItems = items.map(item => {
// Xá»­ lÃ½ nhanh
return {
json: {
...item.json,
processed: true
}
};
});

return processedItems;
3. Sá»­ dá»¥ng Wait node há»£p lÃ½:

```

```yaml
// KHÃ”NG NÃŠN: Chá» 24 giá» liÃªn tá»¥c
// NÃŠN: Schedule cháº¡y má»—i ngÃ y

Schedule Trigger: 0 8 * * *  // 8h sÃ¡ng má»—i ngÃ y
Thay vÃ¬: Manual Trigger â†’ Wait 24h
PHáº¦N 10: TRIá»‚N KHAI THá»°C Táº¾ & Báº¢O Máº¬T
10.1 Deploy lÃªn server tháº­t (VPS)
BÆ°á»›c 1: Mua VPS (vÃ­ dá»¥: $5/thÃ¡ng)

```

```text
NhÃ  cung cáº¥p: DigitalOcean, Vultr, Linode
Cáº¥u hÃ¬nh: 1GB RAM, 1 CPU, 25GB SSD
Há»‡ Ä‘iá»u hÃ nh: Ubuntu 20.04
BÆ°á»›c 2: SSH vÃ o VPS

```

```bash
```

# TrÃªn mÃ¡y báº¡n
ssh root@IP_VPS

# Cáº­p nháº­t há»‡ thá»‘ng
apt update && apt upgrade -y
BÆ°á»›c 3: CÃ i Docker

```bash
curl -fsSL https://get.docker.com -o get-docker.sh
sh get-docker.sh

```

# CÃ i Docker Compose
apt install docker-compose -y
BÆ°á»›c 4: Táº¡o thÆ° má»¥c n8n

```bash
mkdir /opt/n8n
cd /opt/n8n
nano docker-compose.yml
BÆ°á»›c 5: File docker-compose.yml cho production

```

```yaml
version: '3.8'

services:
n8n:
image: n8nio/n8n
container_name: n8n
restart: unless-stopped
ports:
- "5678:5678"
environment:
- N8N_BASIC_AUTH_ACTIVE=true
- N8N_BASIC_AUTH_USER=admin
- N8N_BASIC_AUTH_PASSWORD=MatKhauManh123!
- N8N_HOST=your-domain.com
- N8N_PORT=5678
- N8N_PROTOCOL=https
- N8N_EDITOR_BASE_URL=https://your-domain.com
- WEBHOOK_URL=https://your-domain.com
- N8N_ENCRYPTION_KEY=YourEncryptionKey123
- EXECUTIONS_DATA_PRUNE=true
- EXECUTIONS_DATA_MAX_AGE=168
- EXECUTIONS_DATA_MAX_COUNT=10000
volumes:
- n8n_data:/home/node/.n8n
- ./local-files:/files

volumes:
n8n_data:
BÆ°á»›c 6: Cháº¡y n8n

```

```bash
docker-compose up -d
BÆ°á»›c 7: CÃ i Nginx + SSL (HTTPS miá»…n phÃ­)

```

```bash
```

# CÃ i Nginx
apt install nginx -y

# CÃ i Certbot cho SSL
apt install certbot python3-certbot-nginx -y

# Táº¡o config Nginx
nano /etc/nginx/sites-available/n8n
File Nginx config:

```nginx
server {
listen 80;
server_name your-domain.com;

    location / {
        proxy_pass http://localhost:5678;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
BÆ°á»›c 8: CÃ i SSL

```

```bash
```

# KÃ­ch hoáº¡t site
ln -s /etc/nginx/sites-available/n8n /etc/nginx/sites-enabled/

# Kiá»ƒm tra cáº¥u hÃ¬nh
nginx -t

# Khá»Ÿi Ä‘á»™ng láº¡i Nginx
systemctl restart nginx

# CÃ i SSL
certbot --nginx -d your-domain.com
10.2 Backup dá»¯ liá»‡u
Workflow backup tá»± Ä‘á»™ng:

```text
1. Schedule Trigger (2h sÃ¡ng chá»§ nháº­t)
2. Code Node: Táº¡o file backup
3. Google Drive: Upload backup
4. Telegram: ThÃ´ng bÃ¡o backup thÃ nh cÃ´ng
   Script backup Ä‘Æ¡n giáº£n:

```

```bash
```

#!/bin/bash
# backup.sh

DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_FILE="/backups/n8n_backup_$DATE.tar.gz"

# Backup data
docker exec n8n tar czf - /home/node/.n8n > $BACKUP_FILE

# Upload lÃªn Google Drive (dÃ¹ng rclone)
rclone copy $BACKUP_FILE gdrive:n8n-backups/

# XÃ³a backup cÅ© (giá»¯ 7 ngÃ y)
find /backups -name "n8n_backup_*" -mtime +7 -delete
Tá»”NG Káº¾T Lá»˜ TRÃŒNH Há»ŒC 4 TUáº¦N
Tuáº§n 1: LÃ m quen cÆ¡ báº£n
```text
NgÃ y 1-2: Hiá»ƒu n8n lÃ  gÃ¬, cÃ i Ä‘áº·t local
NgÃ y 3-4: Táº¡o workflow Ä‘áº§u tiÃªn "Hello World"
NgÃ y 5-7: Há»c vá» Trigger nodes (Manual, Schedule)
BÃ i táº­p: Táº¡o workflow chÃ o buá»•i sÃ¡ng/trÆ°a/tá»‘i
Tuáº§n 2: CÃ¡c node cÆ¡ báº£n
```

```text
NgÃ y 1-2: HTTP Request, Code node cÆ¡ báº£n
NgÃ y 3-4: IF node, Switch node
NgÃ y 5-6: Debug, Wait nodes
NgÃ y 7: Tá»•ng há»£p - Táº¡o workflow tÃ­nh tiá»n Ä‘Æ¡n hÃ ng
Tuáº§n 3: Káº¿t ná»‘i dá»‹ch vá»¥
```

```text
NgÃ y 1-2: Google Sheets (Ä‘á»c/ghi)
NgÃ y 3-4: Telegram bot
NgÃ y 5-6: Gmail (gá»­i email)
NgÃ y 7: Tá»•ng há»£p - Há»‡ thá»‘ng nháº¯c nhá»Ÿ
Tuáº§n 4: Dá»± Ã¡n thá»±c táº¿
```

```text
NgÃ y 1-2: Há»‡ thá»‘ng quáº£n lÃ½ Ä‘Æ¡n hÃ ng Ä‘Æ¡n giáº£n
NgÃ y 3-4: Há»‡ thá»‘ng bÃ¡o cÃ¡o tá»± Ä‘á»™ng
NgÃ y 5-6: Xá»­ lÃ½ lá»—i vÃ  tá»‘i Æ°u
NgÃ y 7: Deploy lÃªn server tháº­t
5 dá»± Ã¡n nhá» nÃªn lÃ m khi há»c:
Bot nháº¯c nhá»Ÿ cÃ¡ nhÃ¢n (Telegram + Schedule)

Tá»± Ä‘á»™ng lÆ°u file email (Gmail + Google Drive)

Theo dÃµi giÃ¡ sáº£n pháº©m (HTTP Request + Telegram)

Há»‡ thá»‘ng Ä‘Äƒng kÃ½ lá»›p há»c (Webhook + Google Sheets)

BÃ¡o cÃ¡o thá»i tiáº¿t hÃ ng ngÃ y (API + Telegram)
```

TÃ i nguyÃªn há»c thÃªm:
Documentation chÃ­nh thá»©c: https://docs.n8n.io

Video tutorials: https://www.youtube.com/c/n8nio

Community forum: https://community.n8n.io

Workflow templates: https://n8n.io/workflows

GitHub examples: https://github.com/n8n-io/n8n/tree/master/packages/cli/examples
