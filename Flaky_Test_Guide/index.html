
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Knowledge base for SDET, Playwright, Selenium, API, and QA strategy">
      
      
      
        <link rel="canonical" href="https://vanvo19870515.github.io/learn-everything-for-me/Flaky_Test_Guide/">
      
      
        <link rel="prev" href="../Test_Automation_Pyramid_Guide/">
      
      
        <link rel="next" href="../Flaky_Test_Infographic.html">
      
      
        
      
      
      <link rel="icon" href="../assets/avatar-32.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Flaky Test Guide - Learn Everything For Me</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="light-blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#flaky-test-complete-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Learn Everything For Me" class="md-header__button md-logo" aria-label="Learn Everything For Me" data-md-component="logo">
      
  <img src="../assets/avatar.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Learn Everything For Me
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Flaky Test Guide
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="light-blue"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="light-blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/vanvo19870515/learn-everything-for-me" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    vanvo19870515/learn-everything-for-me
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Learn Everything For Me" class="md-nav__button md-logo" aria-label="Learn Everything For Me" data-md-component="logo">
      
  <img src="../assets/avatar.png" alt="logo">

    </a>
    Learn Everything For Me
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/vanvo19870515/learn-everything-for-me" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    vanvo19870515/learn-everything-for-me
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Playwright
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Playwright
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Playwright_Guide_Reorganized/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Playwright Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../playwright-agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Canary & Agentic Workflow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../playwright-fixtures/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fixtures & Config
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../playwright-assertions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Assertions Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../playwright-reporter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Reporter API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../playwright-library/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Library vs Test Runner
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../migration-guides/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Migration Guides
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    SQL Resources
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    SQL Resources
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sql-roadmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SQL Roadmap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    QA Resources
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    QA Resources
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chat_Application_QA_Roadmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    QA Chat Application Roadmap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../k6_performance_testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    QA Load Test with K6
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../k6-grafana-very-detail/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    QA K6 Grafana roadmap detail
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security-testing-apis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    QA APIs Security Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../qa-sdet-roadmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    QA/SDET Transition Roadmap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../qa-roadmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    QA & Automation Roadmap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sdet-framework-foundation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core Principles Framework
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../playwright-sdet-framework-intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SDET Framework Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../k6_performance_testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    QA Load Test with K6
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../k6-grafana-very-detail/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    QA K6 Grafana roadmap detail
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security-testing-apis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    QA APIs Security Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../n8n-road-map/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    QA n8n roadmap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Data Resources
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Data Resources
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../elasticsearch-roadmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Elasticsearch Roadmap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../elasticsearch-query-deepdive/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Elasticsearch Query Deep Dive
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../http-caching/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    HTTP Caching Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Testing Strategy
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Testing Strategy
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Test_Automation_Pyramid_Guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Test Automation Pyramid
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Flaky Test Guide
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Flaky Test Guide
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-a-flaky-test" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚ùì What Is a Flaky Test?
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="‚ùì What Is a Flaky Test?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-characteristics" class="md-nav__link">
    <span class="md-ellipsis">
      
        üéØ Key Characteristics
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#real-world-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        üí° Real-World Example
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run-10-times-different-results-test-1-pass-test-6-fail-test-2-pass-test-7-pass-test-3-pass-test-8-fail-test-4-pass-test-9-pass-test-5-fail-test-10-fail" class="md-nav__link">
    <span class="md-ellipsis">
      
        # Run 10 times - Different results ‚úÖ Test 1: PASS ‚ùå Test 6: FAIL ‚úÖ Test 2: PASS ‚úÖ Test 7: PASS ‚úÖ Test 3: PASS ‚ùå Test 8: FAIL ‚úÖ Test 4: PASS ‚úÖ Test 9: PASS ‚ùå Test 5: FAIL ‚ùå Test 10: FAIL
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-identify-a-flaky-test" class="md-nav__link">
    <span class="md-ellipsis">
      
        üö®How to Identify a Flaky Test
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üö®How to Identify a Flaky Test">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#abnormal-statistics" class="md-nav__link">
    <span class="md-ellipsis">
      
        üìä Abnormal Statistics
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unstable-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      
        üîÑUnstable Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#impact-on-pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      
        üìà Impact on Pipeline
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#-coverage-reports-become-unreliable" class="md-nav__link">
    <span class="md-ellipsis">
      
        - üìâ Coverage reports become unreliable
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#most-common-causes" class="md-nav__link">
    <span class="md-ellipsis">
      
        üß† Most Common Causes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üß† Most Common Causes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-insufficient-timing-wait" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚è±Ô∏è 1. Insufficient Timing / Wait
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="‚è±Ô∏è 1. Insufficient Timing / Wait">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bad-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚ùå Bad Example
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#correct-way" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚úÖ Correct Way
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-dependency-on-changing-data" class="md-nav__link">
    <span class="md-ellipsis">
      
        üìä 2. Dependency on Changing Data
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üìä 2. Dependency on Changing Data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flaky-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚ùå Flaky Example
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-fix" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚úÖ How to Fix
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-race-condition" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚ö° 3. Race Condition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-no-clean-state-before-each-test" class="md-nav__link">
    <span class="md-ellipsis">
      
        üßπ 4. No Clean State Before Each Test
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flaky-test" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚ùå Flaky Test
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-fix_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚úÖ How to Fix
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-external-dependency" class="md-nav__link">
    <span class="md-ellipsis">
      
        üåê 5. External Dependency
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#depends-on-external-service" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚ùå Depends on External Service
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mock-external-services" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚úÖ Mock External Services
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#await-pagerouteapistripe-route-routefulfill-status-200-body-jsonstringify-success-true-transactionid-test_123" class="md-nav__link">
    <span class="md-ellipsis">
      
        await page.route(&#39;**/api/stripe/**&#39;, route =&gt; { route.fulfill({ status: 200, body: JSON.stringify({ success: true, transactionId: &#39;test_123&#39; }) }); });
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-handle-flaky-tests" class="md-nav__link">
    <span class="md-ellipsis">
      
        üõ†Ô∏è How to Handle Flaky Tests
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üõ†Ô∏è How to Handle Flaky Tests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-always-use-stable-locators" class="md-nav__link">
    <span class="md-ellipsis">
      
        üéØ 1. Always Use Stable Locators
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üéØ 1. Always Use Stable Locators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flaky-locator" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚ùå Flaky Locator
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#good-locator" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚úÖ Good Locator
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-wait-for-the-right-condition-auto-wait" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚è≥ 2. Wait for the Right Condition (Auto-Wait)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-use-appropriate-retry-timeout" class="md-nav__link">
    <span class="md-ellipsis">
      
        üîÑ 3. Use Appropriate Retry &amp; Timeout
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-mock-apis-when-not-needed" class="md-nav__link">
    <span class="md-ellipsis">
      
        üé≠ 4. Mock APIs When Not Needed
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-reset-state-for-each-test" class="md-nav__link">
    <span class="md-ellipsis">
      
        üßΩ 5. Reset State for Each Test
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debugging-flaky-tests-in-ci" class="md-nav__link">
    <span class="md-ellipsis">
      
        üß™ Debugging Flaky Tests in CI
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üß™ Debugging Flaky Tests in CI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#debugging-process" class="md-nav__link">
    <span class="md-ellipsis">
      
        üîç Debugging Process
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üîç Debugging Process">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-confirm-flaky-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      
        1Ô∏è‚É£ Confirm Flaky Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-enable-trace-video" class="md-nav__link">
    <span class="md-ellipsis">
      
        2Ô∏è‚É£ Enable Trace &amp; Video
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-analyze-logs" class="md-nav__link">
    <span class="md-ellipsis">
      
        3Ô∏è‚É£ Analyze Logs
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debug-techniques" class="md-nav__link">
    <span class="md-ellipsis">
      
        üêå Debug Techniques
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üêå Debug Techniques">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#slow-motion-mode" class="md-nav__link">
    <span class="md-ellipsis">
      
        Slow Motion Mode
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      
        Network Monitoring
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-comparison" class="md-nav__link">
    <span class="md-ellipsis">
      
        Environment Comparison
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flaky-test-handling-checklist" class="md-nav__link">
    <span class="md-ellipsis">
      
        üìã Flaky Test Handling Checklist
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üìã Flaky Test Handling Checklist">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#before-writing-tests" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚úÖ Before Writing Tests
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#during-writing" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚úÖ During Writing
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-a-test-fails" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚úÖ When a Test Fails
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#refactoring-flaky-tests" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚úÖ Refactoring Flaky Tests
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#best-practices-to-avoid-flaky-tests" class="md-nav__link">
    <span class="md-ellipsis">
      
        üéØ Best Practices to Avoid Flaky Tests
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üéØ Best Practices to Avoid Flaky Tests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test-design" class="md-nav__link">
    <span class="md-ellipsis">
      
        üèóÔ∏è Test Design
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tool-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        üîß Tool Configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitoring-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      
        üìä Monitoring &amp; Metrics
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      
        üöÄ Conclusion
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prevention-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      
        üí° Prevention Strategy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#qa-mindset" class="md-nav__link">
    <span class="md-ellipsis">
      
        üéñÔ∏è QA Mindset
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Flaky_Test_Infographic.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Flaky Test Infographic
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ui-api-pom-comparison/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UI POM vs API POM
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../shift-left-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Shift-Left Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mutation-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mutation Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    SDET Prep
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    SDET Prep
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../SDET_Interview_Preparation_Guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SDET Interview Preparation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Experienced_Automation_Tester_QA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Experienced Automation Tester Q&A
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Automation_Interview_QA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Automation Interview Q&A
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../java-oop-concepts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Java OOP Concepts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-a-flaky-test" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚ùì What Is a Flaky Test?
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="‚ùì What Is a Flaky Test?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-characteristics" class="md-nav__link">
    <span class="md-ellipsis">
      
        üéØ Key Characteristics
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#real-world-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        üí° Real-World Example
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run-10-times-different-results-test-1-pass-test-6-fail-test-2-pass-test-7-pass-test-3-pass-test-8-fail-test-4-pass-test-9-pass-test-5-fail-test-10-fail" class="md-nav__link">
    <span class="md-ellipsis">
      
        # Run 10 times - Different results ‚úÖ Test 1: PASS ‚ùå Test 6: FAIL ‚úÖ Test 2: PASS ‚úÖ Test 7: PASS ‚úÖ Test 3: PASS ‚ùå Test 8: FAIL ‚úÖ Test 4: PASS ‚úÖ Test 9: PASS ‚ùå Test 5: FAIL ‚ùå Test 10: FAIL
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-identify-a-flaky-test" class="md-nav__link">
    <span class="md-ellipsis">
      
        üö®How to Identify a Flaky Test
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üö®How to Identify a Flaky Test">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#abnormal-statistics" class="md-nav__link">
    <span class="md-ellipsis">
      
        üìä Abnormal Statistics
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unstable-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      
        üîÑUnstable Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#impact-on-pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      
        üìà Impact on Pipeline
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#-coverage-reports-become-unreliable" class="md-nav__link">
    <span class="md-ellipsis">
      
        - üìâ Coverage reports become unreliable
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#most-common-causes" class="md-nav__link">
    <span class="md-ellipsis">
      
        üß† Most Common Causes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üß† Most Common Causes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-insufficient-timing-wait" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚è±Ô∏è 1. Insufficient Timing / Wait
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="‚è±Ô∏è 1. Insufficient Timing / Wait">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bad-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚ùå Bad Example
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#correct-way" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚úÖ Correct Way
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-dependency-on-changing-data" class="md-nav__link">
    <span class="md-ellipsis">
      
        üìä 2. Dependency on Changing Data
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üìä 2. Dependency on Changing Data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flaky-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚ùå Flaky Example
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-fix" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚úÖ How to Fix
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-race-condition" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚ö° 3. Race Condition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-no-clean-state-before-each-test" class="md-nav__link">
    <span class="md-ellipsis">
      
        üßπ 4. No Clean State Before Each Test
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flaky-test" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚ùå Flaky Test
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-fix_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚úÖ How to Fix
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-external-dependency" class="md-nav__link">
    <span class="md-ellipsis">
      
        üåê 5. External Dependency
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#depends-on-external-service" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚ùå Depends on External Service
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mock-external-services" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚úÖ Mock External Services
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#await-pagerouteapistripe-route-routefulfill-status-200-body-jsonstringify-success-true-transactionid-test_123" class="md-nav__link">
    <span class="md-ellipsis">
      
        await page.route(&#39;**/api/stripe/**&#39;, route =&gt; { route.fulfill({ status: 200, body: JSON.stringify({ success: true, transactionId: &#39;test_123&#39; }) }); });
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-handle-flaky-tests" class="md-nav__link">
    <span class="md-ellipsis">
      
        üõ†Ô∏è How to Handle Flaky Tests
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üõ†Ô∏è How to Handle Flaky Tests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-always-use-stable-locators" class="md-nav__link">
    <span class="md-ellipsis">
      
        üéØ 1. Always Use Stable Locators
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üéØ 1. Always Use Stable Locators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#flaky-locator" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚ùå Flaky Locator
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#good-locator" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚úÖ Good Locator
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-wait-for-the-right-condition-auto-wait" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚è≥ 2. Wait for the Right Condition (Auto-Wait)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-use-appropriate-retry-timeout" class="md-nav__link">
    <span class="md-ellipsis">
      
        üîÑ 3. Use Appropriate Retry &amp; Timeout
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-mock-apis-when-not-needed" class="md-nav__link">
    <span class="md-ellipsis">
      
        üé≠ 4. Mock APIs When Not Needed
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-reset-state-for-each-test" class="md-nav__link">
    <span class="md-ellipsis">
      
        üßΩ 5. Reset State for Each Test
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debugging-flaky-tests-in-ci" class="md-nav__link">
    <span class="md-ellipsis">
      
        üß™ Debugging Flaky Tests in CI
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üß™ Debugging Flaky Tests in CI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#debugging-process" class="md-nav__link">
    <span class="md-ellipsis">
      
        üîç Debugging Process
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üîç Debugging Process">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-confirm-flaky-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      
        1Ô∏è‚É£ Confirm Flaky Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-enable-trace-video" class="md-nav__link">
    <span class="md-ellipsis">
      
        2Ô∏è‚É£ Enable Trace &amp; Video
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-analyze-logs" class="md-nav__link">
    <span class="md-ellipsis">
      
        3Ô∏è‚É£ Analyze Logs
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debug-techniques" class="md-nav__link">
    <span class="md-ellipsis">
      
        üêå Debug Techniques
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üêå Debug Techniques">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#slow-motion-mode" class="md-nav__link">
    <span class="md-ellipsis">
      
        Slow Motion Mode
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      
        Network Monitoring
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-comparison" class="md-nav__link">
    <span class="md-ellipsis">
      
        Environment Comparison
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flaky-test-handling-checklist" class="md-nav__link">
    <span class="md-ellipsis">
      
        üìã Flaky Test Handling Checklist
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üìã Flaky Test Handling Checklist">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#before-writing-tests" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚úÖ Before Writing Tests
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#during-writing" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚úÖ During Writing
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-a-test-fails" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚úÖ When a Test Fails
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#refactoring-flaky-tests" class="md-nav__link">
    <span class="md-ellipsis">
      
        ‚úÖ Refactoring Flaky Tests
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#best-practices-to-avoid-flaky-tests" class="md-nav__link">
    <span class="md-ellipsis">
      
        üéØ Best Practices to Avoid Flaky Tests
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="üéØ Best Practices to Avoid Flaky Tests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test-design" class="md-nav__link">
    <span class="md-ellipsis">
      
        üèóÔ∏è Test Design
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tool-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        üîß Tool Configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitoring-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      
        üìä Monitoring &amp; Metrics
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      
        üöÄ Conclusion
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prevention-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      
        üí° Prevention Strategy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#qa-mindset" class="md-nav__link">
    <span class="md-ellipsis">
      
        üéñÔ∏è QA Mindset
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="flaky-test-complete-guide">üß© <strong>Flaky Test - Complete Guide</strong><a class="headerlink" href="#flaky-test-complete-guide" title="Permanent link">&para;</a></h1>
<h2 id="what-is-a-flaky-test">‚ùì What Is a Flaky Test?<a class="headerlink" href="#what-is-a-flaky-test" title="Permanent link">&para;</a></h2>
<p><strong>Flaky Test</strong> = A test that sometimes passes and sometimes fails when run multiple times, even though the code has not changed.</p>
<h3 id="key-characteristics">üéØ Key Characteristics<a class="headerlink" href="#key-characteristics" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>‚ùå Fails randomly - No fixed pattern</p>
</li>
<li>
<p>üêõ Difficult to debug - No exact known cause</p>
</li>
<li>
<p>üòî Reduces confidence - Team loses confidence in the test suite</p>
</li>
<li>
<p>üìä Unstable statistics - CI/CD pipeline is sometimes red, sometimes green</p>
</li>
</ul>
<h3 id="real-world-example">üí° Real-World Example<a class="headerlink" href="#real-world-example" title="Permanent link">&para;</a></h3>
<h2 id="run-10-times-different-results-test-1-pass-test-6-fail-test-2-pass-test-7-pass-test-3-pass-test-8-fail-test-4-pass-test-9-pass-test-5-fail-test-10-fail"><div class="highlight"><pre><span></span><code><span class="c1"># Run 10 times - Different results</span>
‚úÖ<span class="w"> </span>Test<span class="w"> </span><span class="m">1</span>:<span class="w"> </span>PASS<span class="w">    </span>‚ùå<span class="w"> </span>Test<span class="w"> </span><span class="m">6</span>:<span class="w"> </span>FAIL
‚úÖ<span class="w"> </span>Test<span class="w"> </span><span class="m">2</span>:<span class="w"> </span>PASS<span class="w">    </span>‚úÖ<span class="w"> </span>Test<span class="w"> </span><span class="m">7</span>:<span class="w"> </span>PASS
‚úÖ<span class="w"> </span>Test<span class="w"> </span><span class="m">3</span>:<span class="w"> </span>PASS<span class="w">    </span>‚ùå<span class="w"> </span>Test<span class="w"> </span><span class="m">8</span>:<span class="w"> </span>FAIL
‚úÖ<span class="w"> </span>Test<span class="w"> </span><span class="m">4</span>:<span class="w"> </span>PASS<span class="w">    </span>‚úÖ<span class="w"> </span>Test<span class="w"> </span><span class="m">9</span>:<span class="w"> </span>PASS
‚ùå<span class="w"> </span>Test<span class="w"> </span><span class="m">5</span>:<span class="w"> </span>FAIL<span class="w">    </span>‚ùå<span class="w"> </span>Test<span class="w"> </span><span class="m">10</span>:<span class="w"> </span>FAIL
</code></pre></div><a class="headerlink" href="#run-10-times-different-results-test-1-pass-test-6-fail-test-2-pass-test-7-pass-test-3-pass-test-8-fail-test-4-pass-test-9-pass-test-5-fail-test-10-fail" title="Permanent link">&para;</a></h2>
<h2 id="how-to-identify-a-flaky-test">üö®How to Identify a Flaky Test<a class="headerlink" href="#how-to-identify-a-flaky-test" title="Permanent link">&para;</a></h2>
<h3 id="abnormal-statistics">üìä Abnormal Statistics<a class="headerlink" href="#abnormal-statistics" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>‚ñ∂Ô∏è Run 10 times: Pass 7, Fail 3</p>
</li>
<li>
<p>üîÑ "Rerun test" and it passes</p>
</li>
<li>
<p>üé≤ Fails without any pattern</p>
</li>
</ul>
<h3 id="unstable-behavior">üîÑUnstable Behavior<a class="headerlink" href="#unstable-behavior" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>üåê Passes locally but fails on CI</p>
</li>
<li>
<p>‚è∞ Different times ‚Üí different results</p>
</li>
<li>
<p>üîÄ Test order changes ‚Üí flaky appears</p>
</li>
</ul>
<h3 id="impact-on-pipeline">üìà Impact on Pipeline<a class="headerlink" href="#impact-on-pipeline" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>üö¶ CI/CD sometimes red, sometimes green for no clear reason</p>
</li>
<li>
<p>üë• Team wastes time debugging non-existent issues</p>
</li>
</ul>
<h2 id="-coverage-reports-become-unreliable">- üìâ Coverage reports become unreliable<a class="headerlink" href="#-coverage-reports-become-unreliable" title="Permanent link">&para;</a></h2>
<h2 id="most-common-causes">üß† Most Common Causes<a class="headerlink" href="#most-common-causes" title="Permanent link">&para;</a></h2>
<h3 id="1-insufficient-timing-wait">‚è±Ô∏è 1. Insufficient Timing / Wait<a class="headerlink" href="#1-insufficient-timing-wait" title="Permanent link">&para;</a></h3>
<p><strong>Problem:</strong> Page hasn't loaded, element isn't visible, request hasn't returned.</p>
<h4 id="bad-example">‚ùå Bad Example<a class="headerlink" href="#bad-example" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="s1">&#39;#login&#39;</span><span class="p">);</span>
<span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">waitForTimeout</span><span class="p">(</span><span class="mf">1000</span><span class="p">);</span><span class="w"> </span><span class="c1">// ‚ö†Ô∏è Hard-coded delay</span>
<span class="k">await</span><span class="w"> </span><span class="nx">expect</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">locator</span><span class="p">(</span><span class="s1">&#39;.success&#39;</span><span class="p">)).</span><span class="nx">toBeVisible</span><span class="p">();</span>
</code></pre></div>
<h4 id="correct-way">‚úÖ Correct Way<a class="headerlink" href="#correct-way" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">getByRole</span><span class="p">(</span><span class="s1">&#39;button&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Login&#39;</span><span class="w"> </span><span class="p">}).</span><span class="nx">click</span><span class="p">();</span>
<span class="k">await</span><span class="w"> </span><span class="nx">expect</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">getByText</span><span class="p">(</span><span class="s1">&#39;Welcome&#39;</span><span class="p">)).</span><span class="nx">toBeVisible</span><span class="p">();</span><span class="w"> </span><span class="c1">// üéØ Auto-wait</span>
</code></pre></div>
<h3 id="2-dependency-on-changing-data">üìä 2. Dependency on Changing Data<a class="headerlink" href="#2-dependency-on-changing-data" title="Permanent link">&para;</a></h3>
<p><strong>Problem:</strong> Test depends on dynamic data.</p>
<h4 id="flaky-example">‚ùå Flaky Example<a class="headerlink" href="#flaky-example" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1">// Test item count - but DB changes constantly</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">itemCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">locator</span><span class="p">(</span><span class="s1">&#39;.product-item&#39;</span><span class="p">).</span><span class="nx">count</span><span class="p">();</span>
<span class="nx">expect</span><span class="p">(</span><span class="nx">itemCount</span><span class="p">).</span><span class="nx">toBeGreaterThan</span><span class="p">(</span><span class="mf">10</span><span class="p">);</span><span class="w"> </span><span class="c1">// ‚ùå Could fail if fewer products</span>

<span class="c1">// Test trending price - changes hourly</span>
<span class="k">await</span><span class="w"> </span><span class="nx">expect</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">getByText</span><span class="p">(</span><span class="s1">&#39;$29.99&#39;</span><span class="p">)).</span><span class="nx">toBeVisible</span><span class="p">();</span><span class="w"> </span><span class="c1">// ‚ùå Price changes</span>
</code></pre></div>
<h4 id="how-to-fix">‚úÖ How to Fix<a class="headerlink" href="#how-to-fix" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1">// Mock data or use fixed test data</span>
<span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">route</span><span class="p">(</span><span class="s1">&#39;/api/products&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">route</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">route</span><span class="p">.</span><span class="nx">fulfill</span><span class="p">({</span>
<span class="w">    </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="mf">200</span><span class="p">,</span>
<span class="w">    </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">([</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Test Product 1&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">price</span><span class="o">:</span><span class="w"> </span><span class="mf">29.99</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Test Product 2&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">price</span><span class="o">:</span><span class="w"> </span><span class="mf">39.99</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">])</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<h4 id="3-race-condition">‚ö° 3. Race Condition<a class="headerlink" href="#3-race-condition" title="Permanent link">&para;</a></h4>
<p><strong>Problem:</strong> Two async actions run in parallel ‚Üí different behavior each time.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// ‚ùå Race condition</span>
<span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="s1">&#39;#submit-form&#39;</span><span class="p">);</span>
<span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="s1">&#39;#name&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;John&#39;</span><span class="p">);</span><span class="w"> </span><span class="c1">// Runs in parallel with click</span>

<span class="c1">// ‚úÖ Sequential execution</span>
<span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="s1">&#39;#name&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;John&#39;</span><span class="p">);</span>
<span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="s1">&#39;#submit-form&#39;</span><span class="p">);</span>
</code></pre></div>
<h4 id="4-no-clean-state-before-each-test">üßπ 4. No Clean State Before Each Test<a class="headerlink" href="#4-no-clean-state-before-each-test" title="Permanent link">&para;</a></h4>
<p><strong>Problem:</strong> Session, cache, database contains old test data.</p>
<h4 id="flaky-test">‚ùå Flaky Test<a class="headerlink" href="#flaky-test" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nx">test</span><span class="p">(</span><span class="s1">&#39;create user&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">({</span><span class="w"> </span><span class="nx">page</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Doesn&#39;t clean DB - user might exist from previous test</span>
<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="s1">&#39;#username&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;testuser&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="s1">&#39;#create&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">expect</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">getByText</span><span class="p">(</span><span class="s1">&#39;User created&#39;</span><span class="p">)).</span><span class="nx">toBeVisible</span><span class="p">();</span><span class="w"> </span><span class="c1">// ‚ùå Fails if user already exists</span>
<span class="p">});</span>
</code></pre></div>
<h4 id="how-to-fix_1">‚úÖ How to Fix<a class="headerlink" href="#how-to-fix_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nx">test</span><span class="p">.</span><span class="nx">beforeEach</span><span class="p">(</span><span class="k">async</span><span class="w"> </span><span class="p">({</span><span class="w"> </span><span class="nx">page</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Clean state before each test</span>
<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">context</span><span class="p">().</span><span class="nx">clearCookies</span><span class="p">();</span>
<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">evaluate</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">clear</span><span class="p">());</span>

<span class="w">  </span><span class="c1">// Or reset database</span>
<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">resetTestDatabase</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div>
<h4 id="5-external-dependency">üåê 5. External Dependency<a class="headerlink" href="#5-external-dependency" title="Permanent link">&para;</a></h4>
<p><strong>Problem:</strong> External API, third-party services are unstable.</p>
<h4 id="depends-on-external-service">‚ùå Depends on External Service<a class="headerlink" href="#depends-on-external-service" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1">// Test calls real payment API</span>
<span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="s1">&#39;#pay-with-stripe&#39;</span><span class="p">);</span>
<span class="k">await</span><span class="w"> </span><span class="nx">expect</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">getByText</span><span class="p">(</span><span class="s1">&#39;Payment successful&#39;</span><span class="p">)).</span><span class="nx">toBeVisible</span><span class="p">();</span>
<span class="c1">// ‚ùå Stripe API slow ‚Üí timeout</span>
<span class="c1">// ‚ùå Network issues ‚Üí fail</span>
</code></pre></div>
<h4 id="mock-external-services">‚úÖ Mock External Services<a class="headerlink" href="#mock-external-services" title="Permanent link">&para;</a></h4>
<h2 id="await-pagerouteapistripe-route-routefulfill-status-200-body-jsonstringify-success-true-transactionid-test_123"><div class="highlight"><pre><span></span><code><span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">route</span><span class="p">(</span><span class="s1">&#39;**/api/stripe/**&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">route</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">route</span><span class="p">.</span><span class="nx">fulfill</span><span class="p">({</span>
<span class="w">    </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="mf">200</span><span class="p">,</span>
<span class="w">    </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="w"> </span><span class="nx">success</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nx">transactionId</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;test_123&#39;</span><span class="w"> </span><span class="p">})</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div><a class="headerlink" href="#await-pagerouteapistripe-route-routefulfill-status-200-body-jsonstringify-success-true-transactionid-test_123" title="Permanent link">&para;</a></h2>
<h2 id="how-to-handle-flaky-tests">üõ†Ô∏è How to Handle Flaky Tests<a class="headerlink" href="#how-to-handle-flaky-tests" title="Permanent link">&para;</a></h2>
<h3 id="1-always-use-stable-locators">üéØ 1. Always Use Stable Locators<a class="headerlink" href="#1-always-use-stable-locators" title="Permanent link">&para;</a></h3>
<h4 id="flaky-locator">‚ùå Flaky Locator<a class="headerlink" href="#flaky-locator" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1">// CSS class can change</span>
<span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="s1">&#39;.btn.btn-primary.ml-2&#39;</span><span class="p">);</span>

<span class="c1">// Fragile XPath</span>
<span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="s1">&#39;//*[@id=&quot;login-form&quot;]/div[2]/button&#39;</span><span class="p">);</span>
</code></pre></div>
<h4 id="good-locator">‚úÖ Good Locator<a class="headerlink" href="#good-locator" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1">// Role-based (most recommended)</span>
<span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">getByRole</span><span class="p">(</span><span class="s1">&#39;button&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Login&#39;</span><span class="w"> </span><span class="p">}).</span><span class="nx">click</span><span class="p">();</span>

<span class="c1">// Data-testid (most stable)</span>
<span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">getByTestId</span><span class="p">(</span><span class="s1">&#39;submit-button&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">();</span>

<span class="c1">// Accessible name</span>
<span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">getByLabel</span><span class="p">(</span><span class="s1">&#39;Email address&#39;</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="s1">&#39;test@example.com&#39;</span><span class="p">);</span>
</code></pre></div>
<h4 id="2-wait-for-the-right-condition-auto-wait">‚è≥ 2. Wait for the Right Condition (Auto-Wait)<a class="headerlink" href="#2-wait-for-the-right-condition-auto-wait" title="Permanent link">&para;</a></h4>
<p><strong>Playwright has built-in auto-wait - no need for waitForTimeout()</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// ‚úÖ Smart auto-wait</span>
<span class="k">await</span><span class="w"> </span><span class="nx">expect</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">getByText</span><span class="p">(</span><span class="s1">&#39;Loading...&#39;</span><span class="p">)).</span><span class="nx">toBeVisible</span><span class="p">();</span>
<span class="k">await</span><span class="w"> </span><span class="nx">expect</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">getByText</span><span class="p">(</span><span class="s1">&#39;Success&#39;</span><span class="p">)).</span><span class="nx">toBeVisible</span><span class="p">({</span><span class="w"> </span><span class="nx">timeout</span><span class="o">:</span><span class="w"> </span><span class="mf">10000</span><span class="w"> </span><span class="p">});</span>

<span class="c1">// ‚ùå Don&#39;t use hard-coded delay</span>
<span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">waitForTimeout</span><span class="p">(</span><span class="mf">3000</span><span class="p">);</span><span class="w"> </span><span class="c1">// ‚ö†Ô∏è Anti-pattern</span>
</code></pre></div>
<h4 id="3-use-appropriate-retry-timeout">üîÑ 3. Use Appropriate Retry &amp; Timeout<a class="headerlink" href="#3-use-appropriate-retry-timeout" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nx">test</span><span class="p">(</span><span class="s1">&#39;robust test&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">({</span><span class="w"> </span><span class="nx">page</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Appropriate timeout for the use case</span>
<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">expect</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">getByText</span><span class="p">(</span><span class="s1">&#39;Data loaded&#39;</span><span class="p">))</span>
<span class="w">    </span><span class="p">.</span><span class="nx">toBeVisible</span><span class="p">({</span><span class="w"> </span><span class="nx">timeout</span><span class="o">:</span><span class="w"> </span><span class="mf">15000</span><span class="w"> </span><span class="p">});</span>

<span class="w">  </span><span class="c1">// Retry for unstable actions</span>
<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">expect</span><span class="p">(</span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">reload</span><span class="p">();</span>
<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">expect</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">getByText</span><span class="p">(</span><span class="s1">&#39;Content ready&#39;</span><span class="p">)).</span><span class="nx">toBeVisible</span><span class="p">();</span>
<span class="w">  </span><span class="p">}).</span><span class="nx">toPass</span><span class="p">({</span><span class="w"> </span><span class="nx">timeout</span><span class="o">:</span><span class="w"> </span><span class="mf">10000</span><span class="w"> </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<h4 id="4-mock-apis-when-not-needed">üé≠ 4. Mock APIs When Not Needed<a class="headerlink" href="#4-mock-apis-when-not-needed" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1">// Mock API responses</span>
<span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">route</span><span class="p">(</span><span class="s1">&#39;/api/user/profile&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">route</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">route</span><span class="p">.</span><span class="nx">fulfill</span><span class="p">({</span>
<span class="w">    </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="mf">200</span><span class="p">,</span>
<span class="w">    </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
<span class="w">      </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Test User&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;test@example.com&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">avatar</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;https://example.com/avatar.jpg&#39;</span>
<span class="w">    </span><span class="p">})</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">});</span>

<span class="c1">// Mock network delays</span>
<span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">route</span><span class="p">(</span><span class="s1">&#39;/api/slow-endpoint&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="nx">route</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span><span class="w"> </span><span class="mf">100</span><span class="p">));</span><span class="w"> </span><span class="c1">// Simulate delay</span>
<span class="w">  </span><span class="nx">route</span><span class="p">.</span><span class="nx">fulfill</span><span class="p">({</span><span class="w"> </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="mf">200</span><span class="p">,</span><span class="w"> </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Slow response&#39;</span><span class="w"> </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<h3 id="5-reset-state-for-each-test">üßΩ 5. Reset State for Each Test<a class="headerlink" href="#5-reset-state-for-each-test" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// playwright.config.ts</span>
<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="nx">defineConfig</span><span class="p">({</span>
<span class="w">  </span><span class="nx">use</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Fresh browser context per test</span>
<span class="w">    </span><span class="c1">// Don&#39;t use storageState if not necessary</span>
<span class="w">  </span><span class="p">},</span>

<span class="w">  </span><span class="c1">// Clean database</span>
<span class="w">  </span><span class="nx">globalSetup</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./global-setup.ts&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">globalTeardown</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./global-teardown.ts&#39;</span>
<span class="p">});</span>

<span class="c1">// Test-level cleanup</span>
<span class="nx">test</span><span class="p">.</span><span class="nx">afterEach</span><span class="p">(</span><span class="k">async</span><span class="w"> </span><span class="p">({</span><span class="w"> </span><span class="nx">page</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Clear local storage, cookies</span>
<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">evaluate</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
<span class="w">    </span><span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
<span class="w">  </span><span class="p">});</span>
<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">context</span><span class="p">().</span><span class="nx">clearCookies</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div>
<h2 id="debugging-flaky-tests-in-ci">üß™ Debugging Flaky Tests in CI<a class="headerlink" href="#debugging-flaky-tests-in-ci" title="Permanent link">&para;</a></h2>
<h3 id="debugging-process">üîç Debugging Process<a class="headerlink" href="#debugging-process" title="Permanent link">&para;</a></h3>
<h4 id="1-confirm-flaky-behavior">1Ô∏è‚É£ Confirm Flaky Behavior<a class="headerlink" href="#1-confirm-flaky-behavior" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Run test 10 times to confirm flaky</span>
<span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">{</span><span class="m">1</span>..10<span class="o">}</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Run </span><span class="nv">$i</span><span class="s2">:&quot;</span>
<span class="w">  </span>npx<span class="w"> </span>playwright<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--project<span class="o">=</span>chromium<span class="w"> </span>flaky-test.spec.ts
<span class="k">done</span>
</code></pre></div>
<h4 id="2-enable-trace-video">2Ô∏è‚É£ Enable Trace &amp; Video<a class="headerlink" href="#2-enable-trace-video" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1">// playwright.config.ts</span>
<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="nx">defineConfig</span><span class="p">({</span>
<span class="w">  </span><span class="nx">use</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Record trace on failure</span>
<span class="w">    </span><span class="nx">trace</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;on-first-retry&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="c1">// Record video</span>
<span class="w">    </span><span class="nx">video</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;retain-on-failure&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="c1">// Screenshot on failure</span>
<span class="w">    </span><span class="nx">screenshot</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;only-on-failure&#39;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<h4 id="3-analyze-logs">3Ô∏è‚É£ Analyze Logs<a class="headerlink" href="#3-analyze-logs" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># View console logs</span>
npx<span class="w"> </span>playwright<span class="w"> </span>show-report

<span class="c1"># Download trace files from CI</span>
<span class="c1"># Analyze with Playwright Trace Viewer</span>
npx<span class="w"> </span>playwright<span class="w"> </span>show-trace<span class="w"> </span>trace.zip
</code></pre></div>
<h3 id="debug-techniques">üêå Debug Techniques<a class="headerlink" href="#debug-techniques" title="Permanent link">&para;</a></h3>
<h4 id="slow-motion-mode">Slow Motion Mode<a class="headerlink" href="#slow-motion-mode" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Run in slow motion to observe</span>
npx<span class="w"> </span>playwright<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--headed<span class="w"> </span>--slowMo<span class="o">=</span><span class="m">500</span>

<span class="c1"># Debug mode with inspector</span>
npx<span class="w"> </span>playwright<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--debug<span class="w"> </span>failing-test.spec.ts
</code></pre></div>
<h4 id="network-monitoring">Network Monitoring<a class="headerlink" href="#network-monitoring" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1">// Log network requests</span>
<span class="nx">page</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;request&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">request</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Request:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">request</span><span class="p">.</span><span class="nx">url</span><span class="p">());</span>
<span class="p">});</span>

<span class="nx">page</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;response&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Response:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">(),</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">url</span><span class="p">());</span>
<span class="p">});</span>
</code></pre></div>
<h4 id="environment-comparison">Environment Comparison<a class="headerlink" href="#environment-comparison" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1">// Compare local vs CI</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;User Agent:&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">evaluate</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">));</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Viewport:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">viewportSize</span><span class="p">());</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Timezone:&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">evaluate</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nb">Intl</span><span class="p">.</span><span class="nx">DateTimeFormat</span><span class="p">().</span><span class="nx">resolvedOptions</span><span class="p">().</span><span class="nx">timeZone</span><span class="p">));</span>
</code></pre></div>
<h3 id="flaky-test-handling-checklist">üìã Flaky Test Handling Checklist<a class="headerlink" href="#flaky-test-handling-checklist" title="Permanent link">&para;</a></h3>
<h4 id="before-writing-tests">‚úÖ Before Writing Tests<a class="headerlink" href="#before-writing-tests" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>Define clear test boundaries</p>
</li>
<li>
<p>Mock external dependencies</p>
</li>
<li>
<p>Choose stable locators</p>
</li>
<li>
<p>Set up proper cleanup</p>
</li>
</ul>
<h4 id="during-writing">‚úÖ During Writing<a class="headerlink" href="#during-writing" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>Do not use waitForTimeout()</p>
</li>
<li>
<p>Always use Playwright's auto-wait</p>
</li>
<li>
<p>Test data should be independent, non-conflicting</p>
</li>
<li>
<p>Handle async properly</p>
</li>
</ul>
<h4 id="when-a-test-fails">‚úÖ When a Test Fails<a class="headerlink" href="#when-a-test-fails" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>Rerun 5-10 times to confirm flaky</p>
</li>
<li>
<p>Enable trace and analyze</p>
</li>
<li>
<p>Check logs network/console</p>
</li>
<li>
<p>Compare local vs CI environment</p>
</li>
</ul>
<h4 id="refactoring-flaky-tests">‚úÖ Refactoring Flaky Tests<a class="headerlink" href="#refactoring-flaky-tests" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>Increase timeout appropriately (not more than 30s)</p>
</li>
<li>
<p>Add retry logic for unstable actions</p>
</li>
<li>
<p>Isolate test data completely</p>
</li>
<li>
<p>Mock slow APIs or unreliable services</p>
</li>
</ul>
<h3 id="best-practices-to-avoid-flaky-tests">üéØ Best Practices to Avoid Flaky Tests<a class="headerlink" href="#best-practices-to-avoid-flaky-tests" title="Permanent link">&para;</a></h3>
<h4 id="test-design">üèóÔ∏è Test Design<a class="headerlink" href="#test-design" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>Test one responsibility - Each test checks only one thing</p>
</li>
<li>
<p>Independent tests - Do not depend on each other</p>
</li>
<li>
<p>Predictable data - Use seed data or factories</p>
</li>
<li>
<p>Minimal UI interactions - Prefer API calls when possible</p>
</li>
</ul>
<h4 id="tool-configuration">üîß Tool Configuration<a class="headerlink" href="#tool-configuration" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1">// playwright.config.ts - Anti-flaky setup</span>
<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="nx">defineConfig</span><span class="p">({</span>
<span class="w">  </span><span class="nx">use</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Reasonable timeouts</span>
<span class="w">    </span><span class="nx">actionTimeout</span><span class="o">:</span><span class="w"> </span><span class="mf">10000</span><span class="p">,</span>
<span class="w">    </span><span class="nx">navigationTimeout</span><span class="o">:</span><span class="w"> </span><span class="mf">30000</span><span class="p">,</span>

<span class="w">    </span><span class="c1">// Retry failed tests</span>
<span class="w">    </span><span class="nx">retries</span><span class="o">:</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">CI</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>

<span class="w">    </span><span class="c1">// Capture evidence</span>
<span class="w">    </span><span class="nx">trace</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;retain-on-failure&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">screenshot</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;only-on-failure&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">video</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;retain-on-failure&#39;</span>
<span class="w">  </span><span class="p">},</span>

<span class="w">  </span><span class="c1">// Parallel execution (but not too much)</span>
<span class="w">  </span><span class="nx">workers</span><span class="o">:</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">CI</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">undefined</span>
<span class="p">});</span>
</code></pre></div>
<h4 id="monitoring-metrics">üìä Monitoring &amp; Metrics<a class="headerlink" href="#monitoring-metrics" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>Track flaky rate: &lt; 5% is acceptable</p>
</li>
<li>
<p>Alert when test fail rate increases</p>
</li>
<li>
<p>Regular cleanup: Remove or fix flaky tests</p>
</li>
<li>
<p>Documentation: Record reasons and fixes</p>
</li>
</ul>
<h4 id="conclusion">üöÄ Conclusion<a class="headerlink" href="#conclusion" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>Flaky Tests are the #1 enemy of automated testing. They:</p>
</li>
<li>
<p>üìâ Reduce confidence in the test suite</p>
</li>
<li>
<p>‚è∞ Waste time on unnecessary debugging</p>
</li>
<li>
<p>üí∞ Increase maintenance costs</p>
</li>
<li>
<p>üò´ Cause team stress and reduce motivation</p>
</li>
</ul>
<h4 id="prevention-strategy">üí° Prevention Strategy<a class="headerlink" href="#prevention-strategy" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>Design tests with a "stable first" mindset</p>
</li>
<li>
<p>Mock everything that's not necessary</p>
</li>
<li>
<p>Use reliable locators and auto-wait</p>
</li>
<li>
<p>Monitor regularly and fix immediately when detected</p>
</li>
<li>
<p>Accept reality: 100% stable tests are impossible - aim for &lt; 5% flaky rate</p>
</li>
</ul>
<h4 id="qa-mindset">üéñÔ∏è QA Mindset<a class="headerlink" href="#qa-mindset" title="Permanent link">&para;</a></h4>
<blockquote>
<p>"Flaky tests are not the tool's fault, but the fault of how we write tests"</p>
</blockquote>
<p>Write tests as if they will run 1000 times without failing even once! üöÄ</p>
<hr />
<h1 id="flaky-test-huong-dan-hoan-chinh">üß© Flaky Test - H∆∞·ªõng D·∫´n Ho√†n Ch·ªânh<a class="headerlink" href="#flaky-test-huong-dan-hoan-chinh" title="Permanent link">&para;</a></h1>
<h2 id="flaky-test-la-gi">‚ùì Flaky Test L√† G√¨?<a class="headerlink" href="#flaky-test-la-gi" title="Permanent link">&para;</a></h2>
<p><strong>Flaky Test</strong> = Test khi ch·∫°y nhi·ªÅu l·∫ßn th√¨ <strong>l√∫c pass - l√∫c fail</strong>, d√π code kh√¥ng h·ªÅ thay ƒë·ªïi.</p>
<h3 id="ac-iem-chinh">üéØ ƒê·∫∑c ƒêi·ªÉm Ch√≠nh<a class="headerlink" href="#ac-iem-chinh" title="Permanent link">&para;</a></h3>
<ul>
<li>‚ùå <strong>Fail ng·∫´u nhi√™n</strong> - Kh√¥ng theo pattern c·ªë ƒë·ªãnh</li>
<li>üêõ <strong>Kh√≥ debug</strong> - Kh√¥ng bi·∫øt nguy√™n nh√¢n ch√≠nh x√°c</li>
<li>üòî <strong>Gi·∫£m ni·ªÅm tin</strong> - Team m·∫•t confidence v√†o test suite</li>
<li>üìä <strong>Th·ªëng k√™ th·∫•t th∆∞·ªùng</strong> - CI/CD pipeline l√∫c ƒë·ªè l√∫c xanh</li>
</ul>
<h3 id="vi-du-thuc-te">üí° V√≠ D·ª• Th·ª±c T·∫ø<a class="headerlink" href="#vi-du-thuc-te" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Ch·∫°y 10 l·∫ßn - K·∫øt qu·∫£ kh√°c nhau</span>
‚úÖ<span class="w"> </span>Test<span class="w"> </span><span class="m">1</span>:<span class="w"> </span>PASS<span class="w">    </span>‚ùå<span class="w"> </span>Test<span class="w"> </span><span class="m">6</span>:<span class="w"> </span>FAIL
‚úÖ<span class="w"> </span>Test<span class="w"> </span><span class="m">2</span>:<span class="w"> </span>PASS<span class="w">    </span>‚úÖ<span class="w"> </span>Test<span class="w"> </span><span class="m">7</span>:<span class="w"> </span>PASS
‚úÖ<span class="w"> </span>Test<span class="w"> </span><span class="m">3</span>:<span class="w"> </span>PASS<span class="w">    </span>‚ùå<span class="w"> </span>Test<span class="w"> </span><span class="m">8</span>:<span class="w"> </span>FAIL
‚úÖ<span class="w"> </span>Test<span class="w"> </span><span class="m">4</span>:<span class="w"> </span>PASS<span class="w">    </span>‚úÖ<span class="w"> </span>Test<span class="w"> </span><span class="m">9</span>:<span class="w"> </span>PASS
‚ùå<span class="w"> </span>Test<span class="w"> </span><span class="m">5</span>:<span class="w"> </span>FAIL<span class="w">    </span>‚ùå<span class="w"> </span>Test<span class="w"> </span><span class="m">10</span>:<span class="w"> </span>FAIL
</code></pre></div>
<hr />
<h2 id="dau-hieu-nhan-biet-flaky-test">üö® D·∫•u Hi·ªáu Nh·∫≠n Bi·∫øt Flaky Test<a class="headerlink" href="#dau-hieu-nhan-biet-flaky-test" title="Permanent link">&para;</a></h2>
<h3 id="thong-ke-bat-thuong">üìä Th·ªëng K√™ B·∫•t Th∆∞·ªùng<a class="headerlink" href="#thong-ke-bat-thuong" title="Permanent link">&para;</a></h3>
<ul>
<li>‚ñ∂Ô∏è Ch·∫°y <strong>10 l·∫ßn</strong>: Pass 7, Fail 3</li>
<li>üîÑ <strong>"Rerun test"</strong> l·∫°i pass</li>
<li>üé≤ Fail <strong>kh√¥ng theo pattern</strong> n√†o c·∫£</li>
</ul>
<h3 id="hanh-vi-khong-on-inh">üîÑ H√†nh Vi Kh√¥ng ·ªîn ƒê·ªãnh<a class="headerlink" href="#hanh-vi-khong-on-inh" title="Permanent link">&para;</a></h3>
<ul>
<li>üåê <strong>Local pass</strong> nh∆∞ng <strong>CI fail</strong></li>
<li>‚è∞ <strong>Th·ªùi gian kh√°c nhau</strong> ‚Üí k·∫øt qu·∫£ kh√°c nhau</li>
<li>üîÄ <strong>Th·ª© t·ª± test</strong> thay ƒë·ªïi ‚Üí flaky xu·∫•t hi·ªán</li>
</ul>
<h3 id="tac-ong-en-pipeline">üìà T√°c ƒê·ªông ƒê·∫øn Pipeline<a class="headerlink" href="#tac-ong-en-pipeline" title="Permanent link">&para;</a></h3>
<ul>
<li>üö¶ CI/CD <strong>l√∫c ƒë·ªè l√∫c xanh</strong> kh√¥ng r√µ l√Ω do</li>
<li>üë• Team <strong>m·∫•t th·ªùi gian</strong> debug v·∫•n ƒë·ªÅ kh√¥ng t·ªìn t·∫°i</li>
<li>üìâ <strong>Coverage reports</strong> kh√¥ng ƒë√°ng tin c·∫≠y</li>
</ul>
<hr />
<h2 id="nguyen-nhan-pho-bien-nhat">üß† Nguy√™n Nh√¢n Ph·ªï Bi·∫øn Nh·∫•t<a class="headerlink" href="#nguyen-nhan-pho-bien-nhat" title="Permanent link">&para;</a></h2>
<h3 id="1-timing-wait-khong-u">‚è±Ô∏è 1. Timing / Wait Kh√¥ng ƒê·ªß<a class="headerlink" href="#1-timing-wait-khong-u" title="Permanent link">&para;</a></h3>
<p><strong>V·∫•n ƒë·ªÅ</strong>: Page ch∆∞a load, element ch∆∞a hi·ªÉn th·ªã, request ch∆∞a v·ªÅ.</p>
<h4 id="vi-du-xau">‚ùå V√≠ D·ª• X·∫•u<a class="headerlink" href="#vi-du-xau" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="s1">&#39;#login&#39;</span><span class="p">);</span>
<span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">waitForTimeout</span><span class="p">(</span><span class="mf">1000</span><span class="p">);</span><span class="w"> </span><span class="c1">// ‚ö†Ô∏è Hard-coded delay</span>
<span class="k">await</span><span class="w"> </span><span class="nx">expect</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">locator</span><span class="p">(</span><span class="s1">&#39;.success&#39;</span><span class="p">)).</span><span class="nx">toBeVisible</span><span class="p">();</span>
</code></pre></div>
<h4 id="cach-ung">‚úÖ C√°ch ƒê√∫ng<a class="headerlink" href="#cach-ung" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">getByRole</span><span class="p">(</span><span class="s1">&#39;button&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Login&#39;</span><span class="w"> </span><span class="p">}).</span><span class="nx">click</span><span class="p">();</span>
<span class="k">await</span><span class="w"> </span><span class="nx">expect</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">getByText</span><span class="p">(</span><span class="s1">&#39;Welcome&#39;</span><span class="p">)).</span><span class="nx">toBeVisible</span><span class="p">();</span><span class="w"> </span><span class="c1">// üéØ Auto-wait</span>
</code></pre></div>
<h3 id="2-dependency-vao-du-lieu-thay-oi">üìä 2. Dependency V√†o D·ªØ Li·ªáu Thay ƒê·ªïi<a class="headerlink" href="#2-dependency-vao-du-lieu-thay-oi" title="Permanent link">&para;</a></h3>
<p><strong>V·∫•n ƒë·ªÅ</strong>: Test ph·ª• thu·ªôc v√†o d·ªØ li·ªáu ƒë·ªông.</p>
<h4 id="vi-du-flaky">‚ùå V√≠ D·ª• Flaky<a class="headerlink" href="#vi-du-flaky" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1">// Test s·ªë l∆∞·ª£ng items - nh∆∞ng DB thay ƒë·ªïi li√™n t·ª•c</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">itemCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">locator</span><span class="p">(</span><span class="s1">&#39;.product-item&#39;</span><span class="p">).</span><span class="nx">count</span><span class="p">();</span>
<span class="nx">expect</span><span class="p">(</span><span class="nx">itemCount</span><span class="p">).</span><span class="nx">toBeGreaterThan</span><span class="p">(</span><span class="mf">10</span><span class="p">);</span><span class="w"> </span><span class="c1">// ‚ùå C√≥ th·ªÉ fail n·∫øu √≠t s·∫£n ph·∫©m</span>

<span class="c1">// Test gi√° trending - thay ƒë·ªïi theo gi·ªù</span>
<span class="k">await</span><span class="w"> </span><span class="nx">expect</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">getByText</span><span class="p">(</span><span class="s1">&#39;$29.99&#39;</span><span class="p">)).</span><span class="nx">toBeVisible</span><span class="p">();</span><span class="w"> </span><span class="c1">// ‚ùå Gi√° thay ƒë·ªïi</span>
</code></pre></div>
<h4 id="cach-fix">‚úÖ C√°ch Fix<a class="headerlink" href="#cach-fix" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1">// Mock data ho·∫∑c t·∫°o data test c·ªë ƒë·ªãnh</span>
<span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">route</span><span class="p">(</span><span class="s1">&#39;/api/products&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">route</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">route</span><span class="p">.</span><span class="nx">fulfill</span><span class="p">({</span>
<span class="w">    </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="mf">200</span><span class="p">,</span>
<span class="w">    </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">([</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Test Product 1&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">price</span><span class="o">:</span><span class="w"> </span><span class="mf">29.99</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Test Product 2&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">price</span><span class="o">:</span><span class="w"> </span><span class="mf">39.99</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">])</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<h3 id="3-race-condition_1">‚ö° 3. Race Condition<a class="headerlink" href="#3-race-condition_1" title="Permanent link">&para;</a></h3>
<p><strong>V·∫•n ƒë·ªÅ</strong>: Hai async actions ch·∫°y song song ‚Üí h√†nh vi kh√°c nhau m·ªói l·∫ßn.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// ‚ùå Race condition</span>
<span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="s1">&#39;#submit-form&#39;</span><span class="p">);</span>
<span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="s1">&#39;#name&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;John&#39;</span><span class="p">);</span><span class="w"> </span><span class="c1">// Ch·∫°y song song v·ªõi click</span>

<span class="c1">// ‚úÖ Sequential execution</span>
<span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="s1">&#39;#name&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;John&#39;</span><span class="p">);</span>
<span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="s1">&#39;#submit-form&#39;</span><span class="p">);</span>
</code></pre></div>
<h3 id="4-khong-clean-state-truoc-moi-test">üßπ 4. Kh√¥ng Clean State Tr∆∞·ªõc M·ªói Test<a class="headerlink" href="#4-khong-clean-state-truoc-moi-test" title="Permanent link">&para;</a></h3>
<p><strong>V·∫•n ƒë·ªÅ</strong>: Session, cache, database c√≤n d·ªØ li·ªáu test c≈©.</p>
<h4 id="test-flaky">‚ùå Test Flaky<a class="headerlink" href="#test-flaky" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nx">test</span><span class="p">(</span><span class="s1">&#39;create user&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">({</span><span class="w"> </span><span class="nx">page</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Kh√¥ng clean DB - user ƒë√£ t·ªìn t·∫°i t·ª´ test tr∆∞·ªõc</span>
<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="s1">&#39;#username&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;testuser&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="s1">&#39;#create&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">expect</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">getByText</span><span class="p">(</span><span class="s1">&#39;User created&#39;</span><span class="p">)).</span><span class="nx">toBeVisible</span><span class="p">();</span><span class="w"> </span><span class="c1">// ‚ùå Fail n·∫øu user ƒë√£ t·ªìn t·∫°i</span>
<span class="p">});</span>
</code></pre></div>
<h4 id="cach-fix_1">‚úÖ C√°ch Fix<a class="headerlink" href="#cach-fix_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="nx">test</span><span class="p">.</span><span class="nx">beforeEach</span><span class="p">(</span><span class="k">async</span><span class="w"> </span><span class="p">({</span><span class="w"> </span><span class="nx">page</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Clean state tr∆∞·ªõc m·ªói test</span>
<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">context</span><span class="p">().</span><span class="nx">clearCookies</span><span class="p">();</span>
<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">evaluate</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">clear</span><span class="p">());</span>

<span class="w">  </span><span class="c1">// Ho·∫∑c reset database</span>
<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">resetTestDatabase</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div>
<h3 id="5-external-dependency_1">üåê 5. External Dependency<a class="headerlink" href="#5-external-dependency_1" title="Permanent link">&para;</a></h3>
<p><strong>V·∫•n ƒë·ªÅ</strong>: API ngo√†i, third-party services kh√¥ng ·ªïn ƒë·ªãnh.</p>
<h4 id="phu-thuoc-external">‚ùå Ph·ª• Thu·ªôc External<a class="headerlink" href="#phu-thuoc-external" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1">// Test g·ªçi API payment th·ª±c</span>
<span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="s1">&#39;#pay-with-stripe&#39;</span><span class="p">);</span>
<span class="k">await</span><span class="w"> </span><span class="nx">expect</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">getByText</span><span class="p">(</span><span class="s1">&#39;Payment successful&#39;</span><span class="p">)).</span><span class="nx">toBeVisible</span><span class="p">();</span>
<span class="c1">// ‚ùå Stripe API ch·∫≠m ‚Üí timeout</span>
<span class="c1">// ‚ùå Network issues ‚Üí fail</span>
</code></pre></div>
<h4 id="mock-external-services_1">‚úÖ Mock External Services<a class="headerlink" href="#mock-external-services_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">route</span><span class="p">(</span><span class="s1">&#39;**/api/stripe/**&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">route</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">route</span><span class="p">.</span><span class="nx">fulfill</span><span class="p">({</span>
<span class="w">    </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="mf">200</span><span class="p">,</span>
<span class="w">    </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="w"> </span><span class="nx">success</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nx">transactionId</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;test_123&#39;</span><span class="w"> </span><span class="p">})</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<hr />
<h2 id="cach-xu-ly-flaky-test">üõ†Ô∏è C√°ch X·ª≠ L√Ω Flaky Test<a class="headerlink" href="#cach-xu-ly-flaky-test" title="Permanent link">&para;</a></h2>
<h3 id="1-luon-dung-locator-on-inh">üéØ 1. Lu√¥n D√πng Locator ·ªîn ƒê·ªãnh<a class="headerlink" href="#1-luon-dung-locator-on-inh" title="Permanent link">&para;</a></h3>
<h4 id="locator-flaky">‚ùå Locator Flaky<a class="headerlink" href="#locator-flaky" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1">// CSS class c√≥ th·ªÉ thay ƒë·ªïi</span>
<span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="s1">&#39;.btn.btn-primary.ml-2&#39;</span><span class="p">);</span>

<span class="c1">// XPath fragile</span>
<span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="s1">&#39;//*[@id=&quot;login-form&quot;]/div[2]/button&#39;</span><span class="p">);</span>
</code></pre></div>
<h4 id="locator-tot">‚úÖ Locator T·ªët<a class="headerlink" href="#locator-tot" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1">// Role-based (khuy√™n d√πng nh·∫•t)</span>
<span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">getByRole</span><span class="p">(</span><span class="s1">&#39;button&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Login&#39;</span><span class="w"> </span><span class="p">}).</span><span class="nx">click</span><span class="p">();</span>

<span class="c1">// Data-testid (·ªïn ƒë·ªãnh nh·∫•t)</span>
<span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">getByTestId</span><span class="p">(</span><span class="s1">&#39;submit-button&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">();</span>

<span class="c1">// Accessible name</span>
<span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">getByLabel</span><span class="p">(</span><span class="s1">&#39;Email address&#39;</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="s1">&#39;test@example.com&#39;</span><span class="p">);</span>
</code></pre></div>
<h3 id="2-oi-ung-ieu-kien-auto-wait">‚è≥ 2. ƒê·ª£i ƒê√∫ng ƒêi·ªÅu Ki·ªán (Auto-Wait)<a class="headerlink" href="#2-oi-ung-ieu-kien-auto-wait" title="Permanent link">&para;</a></h3>
<p><strong>Playwright ƒë√£ c√≥ s·∫µn - kh√¥ng c·∫ßn waitForTimeout()</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// ‚úÖ Auto-wait th√¥ng minh</span>
<span class="k">await</span><span class="w"> </span><span class="nx">expect</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">getByText</span><span class="p">(</span><span class="s1">&#39;Loading...&#39;</span><span class="p">)).</span><span class="nx">toBeVisible</span><span class="p">();</span>
<span class="k">await</span><span class="w"> </span><span class="nx">expect</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">getByText</span><span class="p">(</span><span class="s1">&#39;Success&#39;</span><span class="p">)).</span><span class="nx">toBeVisible</span><span class="p">({</span><span class="w"> </span><span class="nx">timeout</span><span class="o">:</span><span class="w"> </span><span class="mf">10000</span><span class="w"> </span><span class="p">});</span>

<span class="c1">// ‚ùå Kh√¥ng d√πng hard-coded delay</span>
<span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">waitForTimeout</span><span class="p">(</span><span class="mf">3000</span><span class="p">);</span><span class="w"> </span><span class="c1">// ‚ö†Ô∏è Anti-pattern</span>
</code></pre></div>
<h3 id="3-dung-retry-timeout-hop-ly">üîÑ 3. D√πng Retry &amp; Timeout H·ª£p L√Ω<a class="headerlink" href="#3-dung-retry-timeout-hop-ly" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nx">test</span><span class="p">(</span><span class="s1">&#39;robust test&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">({</span><span class="w"> </span><span class="nx">page</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Timeout ph√π h·ª£p v·ªõi use case</span>
<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">expect</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">getByText</span><span class="p">(</span><span class="s1">&#39;Data loaded&#39;</span><span class="p">))</span>
<span class="w">    </span><span class="p">.</span><span class="nx">toBeVisible</span><span class="p">({</span><span class="w"> </span><span class="nx">timeout</span><span class="o">:</span><span class="w"> </span><span class="mf">15000</span><span class="w"> </span><span class="p">});</span>

<span class="w">  </span><span class="c1">// Retry cho actions kh√¥ng ·ªïn ƒë·ªãnh</span>
<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">expect</span><span class="p">(</span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">reload</span><span class="p">();</span>
<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">expect</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">getByText</span><span class="p">(</span><span class="s1">&#39;Content ready&#39;</span><span class="p">)).</span><span class="nx">toBeVisible</span><span class="p">();</span>
<span class="w">  </span><span class="p">}).</span><span class="nx">toPass</span><span class="p">({</span><span class="w"> </span><span class="nx">timeout</span><span class="o">:</span><span class="w"> </span><span class="mf">10000</span><span class="w"> </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<h3 id="4-mock-api-khi-khong-can-that">üé≠ 4. Mock API Khi Kh√¥ng C·∫ßn Th·∫≠t<a class="headerlink" href="#4-mock-api-khi-khong-can-that" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// Mock API responses</span>
<span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">route</span><span class="p">(</span><span class="s1">&#39;/api/user/profile&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">route</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">route</span><span class="p">.</span><span class="nx">fulfill</span><span class="p">({</span>
<span class="w">    </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="mf">200</span><span class="p">,</span>
<span class="w">    </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
<span class="w">      </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Test User&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;test@example.com&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">avatar</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;https://example.com/avatar.jpg&#39;</span>
<span class="w">    </span><span class="p">})</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">});</span>

<span class="c1">// Mock network delays</span>
<span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">route</span><span class="p">(</span><span class="s1">&#39;/api/slow-endpoint&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="nx">route</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span><span class="w"> </span><span class="mf">100</span><span class="p">));</span><span class="w"> </span><span class="c1">// Simulate delay</span>
<span class="w">  </span><span class="nx">route</span><span class="p">.</span><span class="nx">fulfill</span><span class="p">({</span><span class="w"> </span><span class="nx">status</span><span class="o">:</span><span class="w"> </span><span class="mf">200</span><span class="p">,</span><span class="w"> </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Slow response&#39;</span><span class="w"> </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<h3 id="5-reset-state-moi-test">üßΩ 5. Reset State M·ªói Test<a class="headerlink" href="#5-reset-state-moi-test" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// playwright.config.ts</span>
<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="nx">defineConfig</span><span class="p">({</span>
<span class="w">  </span><span class="nx">use</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Fresh browser context m·ªói test</span>
<span class="w">    </span><span class="c1">// Kh√¥ng d√πng storageState n·∫øu kh√¥ng c·∫ßn thi·∫øt</span>
<span class="w">  </span><span class="p">},</span>

<span class="w">  </span><span class="c1">// Clean database</span>
<span class="w">  </span><span class="nx">globalSetup</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./global-setup.ts&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">globalTeardown</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;./global-teardown.ts&#39;</span>
<span class="p">});</span>

<span class="c1">// Test-level cleanup</span>
<span class="nx">test</span><span class="p">.</span><span class="nx">afterEach</span><span class="p">(</span><span class="k">async</span><span class="w"> </span><span class="p">({</span><span class="w"> </span><span class="nx">page</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Clear local storage, cookies</span>
<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">evaluate</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
<span class="w">    </span><span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
<span class="w">  </span><span class="p">});</span>
<span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">context</span><span class="p">().</span><span class="nx">clearCookies</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div>
<hr />
<h2 id="debug-flaky-test-trong-ci">üß™ Debug Flaky Test Trong CI<a class="headerlink" href="#debug-flaky-test-trong-ci" title="Permanent link">&para;</a></h2>
<h3 id="quy-trinh-debug">üîç Quy Tr√¨nh Debug<a class="headerlink" href="#quy-trinh-debug" title="Permanent link">&para;</a></h3>
<h4 id="1-xac-nhan-flaky">1Ô∏è‚É£ X√°c Nh·∫≠n Flaky<a class="headerlink" href="#1-xac-nhan-flaky" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Ch·∫°y test 10 l·∫ßn ƒë·ªÉ x√°c nh·∫≠n flaky</span>
<span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">{</span><span class="m">1</span>..10<span class="o">}</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Run </span><span class="nv">$i</span><span class="s2">:&quot;</span>
<span class="w">  </span>npx<span class="w"> </span>playwright<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--project<span class="o">=</span>chromium<span class="w"> </span>flaky-test.spec.ts
<span class="k">done</span>
</code></pre></div>
<h4 id="2-bat-trace-video">2Ô∏è‚É£ B·∫≠t Trace &amp; Video<a class="headerlink" href="#2-bat-trace-video" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1">// playwright.config.ts</span>
<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="nx">defineConfig</span><span class="p">({</span>
<span class="w">  </span><span class="nx">use</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Record trace khi fail</span>
<span class="w">    </span><span class="nx">trace</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;on-first-retry&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="c1">// Record video</span>
<span class="w">    </span><span class="nx">video</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;retain-on-failure&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="c1">// Screenshot khi fail</span>
<span class="w">    </span><span class="nx">screenshot</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;only-on-failure&#39;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<h4 id="3-phan-tich-logs">3Ô∏è‚É£ Ph√¢n T√≠ch Logs<a class="headerlink" href="#3-phan-tich-logs" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Xem console logs</span>
npx<span class="w"> </span>playwright<span class="w"> </span>show-report

<span class="c1"># Download trace files t·ª´ CI</span>
<span class="c1"># Analyze v·ªõi Playwright Trace Viewer</span>
npx<span class="w"> </span>playwright<span class="w"> </span>show-trace<span class="w"> </span>trace.zip
</code></pre></div>
<h3 id="debug-techniques_1">üêå Debug Techniques<a class="headerlink" href="#debug-techniques_1" title="Permanent link">&para;</a></h3>
<h4 id="slow-motion-mode_1">Slow Motion Mode<a class="headerlink" href="#slow-motion-mode_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Ch·∫°y ch·∫≠m ƒë·ªÉ observe</span>
npx<span class="w"> </span>playwright<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--headed<span class="w"> </span>--slowMo<span class="o">=</span><span class="m">500</span>

<span class="c1"># Debug mode v·ªõi inspector</span>
npx<span class="w"> </span>playwright<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--debug<span class="w"> </span>failing-test.spec.ts
</code></pre></div>
<h4 id="network-monitoring_1">Network Monitoring<a class="headerlink" href="#network-monitoring_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1">// Log network requests</span>
<span class="nx">page</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;request&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">request</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Request:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">request</span><span class="p">.</span><span class="nx">url</span><span class="p">());</span>
<span class="p">});</span>

<span class="nx">page</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;response&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Response:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">(),</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">url</span><span class="p">());</span>
<span class="p">});</span>
</code></pre></div>
<h4 id="environment-comparison_1">Environment Comparison<a class="headerlink" href="#environment-comparison_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1">// So s√°nh local vs CI</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;User Agent:&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">evaluate</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">));</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Viewport:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">viewportSize</span><span class="p">());</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Timezone:&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">page</span><span class="p">.</span><span class="nx">evaluate</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nb">Intl</span><span class="p">.</span><span class="nx">DateTimeFormat</span><span class="p">().</span><span class="nx">resolvedOptions</span><span class="p">().</span><span class="nx">timeZone</span><span class="p">));</span>
</code></pre></div>
<hr />
<h2 id="checklist-xu-ly-flaky-test">üìã Checklist X·ª≠ L√Ω Flaky Test<a class="headerlink" href="#checklist-xu-ly-flaky-test" title="Permanent link">&para;</a></h2>
<h3 id="truoc-khi-viet-test">‚úÖ Tr∆∞·ªõc Khi Vi·∫øt Test<a class="headerlink" href="#truoc-khi-viet-test" title="Permanent link">&para;</a></h3>
<ul>
<li>[ ] X√°c ƒë·ªãnh <strong>test boundaries</strong> r√µ r√†ng</li>
<li>[ ] <strong>Mock external dependencies</strong></li>
<li>[ ] Ch·ªçn <strong>locators ·ªïn ƒë·ªãnh</strong></li>
<li>[ ] Setup <strong>proper cleanup</strong></li>
</ul>
<h3 id="trong-qua-trinh-viet">‚úÖ Trong Qu√° Tr√¨nh Vi·∫øt<a class="headerlink" href="#trong-qua-trinh-viet" title="Permanent link">&para;</a></h3>
<ul>
<li>[ ] <strong>Kh√¥ng d√πng</strong> <code>waitForTimeout()</code></li>
<li>[ ] <strong>Lu√¥n d√πng</strong> auto-wait c·ªßa Playwright</li>
<li>[ ] <strong>Test data</strong> ƒë·ªôc l·∫≠p, kh√¥ng conflict</li>
<li>[ ] <strong>Handle async</strong> ƒë√∫ng c√°ch</li>
</ul>
<h3 id="khi-test-fail">‚úÖ Khi Test Fail<a class="headerlink" href="#khi-test-fail" title="Permanent link">&para;</a></h3>
<ul>
<li>[ ] <strong>Ch·∫°y l·∫°i</strong> 5-10 l·∫ßn ƒë·ªÉ x√°c nh·∫≠n flaky</li>
<li>[ ] <strong>B·∫≠t trace</strong> v√† analyze</li>
<li>[ ] <strong>Ki·ªÉm tra logs</strong> network/console</li>
<li>[ ] <strong>So s√°nh</strong> local vs CI environment</li>
</ul>
<h3 id="refactor-flaky-test">‚úÖ Refactor Flaky Test<a class="headerlink" href="#refactor-flaky-test" title="Permanent link">&para;</a></h3>
<ul>
<li>[ ] <strong>TƒÉng timeout</strong> h·ª£p l√Ω (kh√¥ng qu√° 30s)</li>
<li>[ ] <strong>Retry logic</strong> cho actions kh√¥ng ·ªïn ƒë·ªãnh</li>
<li>[ ] <strong>Isolate test data</strong> ho√†n to√†n</li>
<li>[ ] <strong>Mock slow APIs</strong> ho·∫∑c unreliable services</li>
</ul>
<hr />
<h2 id="best-practices-tranh-flaky-test">üéØ Best Practices Tr√°nh Flaky Test<a class="headerlink" href="#best-practices-tranh-flaky-test" title="Permanent link">&para;</a></h2>
<h3 id="test-design_1">üèóÔ∏è Test Design<a class="headerlink" href="#test-design_1" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Test m·ªôt responsibility</strong> - M·ªói test ch·ªâ ki·ªÉm tra m·ªôt ƒëi·ªÅu</li>
<li><strong>Independent tests</strong> - Kh√¥ng ph·ª• thu·ªôc l·∫´n nhau</li>
<li><strong>Predictable data</strong> - D√πng seed data ho·∫∑c factories</li>
<li><strong>Minimal UI interactions</strong> - ∆Øu ti√™n API calls khi c√≥ th·ªÉ</li>
</ol>
<h3 id="tool-configuration_1">üîß Tool Configuration<a class="headerlink" href="#tool-configuration_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// playwright.config.ts - Anti-flaky setup</span>
<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="nx">defineConfig</span><span class="p">({</span>
<span class="w">  </span><span class="nx">use</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Reasonable timeouts</span>
<span class="w">    </span><span class="nx">actionTimeout</span><span class="o">:</span><span class="w"> </span><span class="mf">10000</span><span class="p">,</span>
<span class="w">    </span><span class="nx">navigationTimeout</span><span class="o">:</span><span class="w"> </span><span class="mf">30000</span><span class="p">,</span>

<span class="w">    </span><span class="c1">// Retry failed tests</span>
<span class="w">    </span><span class="nx">retries</span><span class="o">:</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">CI</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>

<span class="w">    </span><span class="c1">// Capture evidence</span>
<span class="w">    </span><span class="nx">trace</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;retain-on-failure&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">screenshot</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;only-on-failure&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">video</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;retain-on-failure&#39;</span>
<span class="w">  </span><span class="p">},</span>

<span class="w">  </span><span class="c1">// Parallel execution (nh∆∞ng kh√¥ng qu√° nhi·ªÅu)</span>
<span class="w">  </span><span class="nx">workers</span><span class="o">:</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">CI</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">undefined</span>
<span class="p">});</span>
</code></pre></div>
<h3 id="monitoring-metrics_1">üìä Monitoring &amp; Metrics<a class="headerlink" href="#monitoring-metrics_1" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Track flaky rate</strong>: <code>&lt; 5% l√† acceptable</code></li>
<li><strong>Alert</strong> khi test fail rate tƒÉng</li>
<li><strong>Regular cleanup</strong>: Remove ho·∫∑c fix flaky tests</li>
<li><strong>Documentation</strong>: Ghi l√Ω do v√† c√°ch fix</li>
</ul>
<hr />
<h2 id="ket-luan">üöÄ K·∫øt Lu·∫≠n<a class="headerlink" href="#ket-luan" title="Permanent link">&para;</a></h2>
<p><strong>Flaky Test l√† k·∫ª th√π s·ªë 1</strong> c·ªßa automated testing. Ch√∫ng:</p>
<ul>
<li>üìâ <strong>Gi·∫£m ni·ªÅm tin</strong> v√†o test suite</li>
<li>‚è∞ <strong>T·ªën th·ªùi gian</strong> debug kh√¥ng c·∫ßn thi·∫øt</li>
<li>üí∞ <strong>TƒÉng chi ph√≠</strong> maintenance</li>
<li>üò´ <strong>L√†m team stress</strong> v√† m·∫•t ƒë·ªông l·ª±c</li>
</ul>
<h3 id="chien-luoc-phong-ngua">üí° Chi·∫øn L∆∞·ª£c Ph√≤ng Ng·ª´a<a class="headerlink" href="#chien-luoc-phong-ngua" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Thi·∫øt k·∫ø tests</strong> v·ªõi mindset "stable first"</li>
<li><strong>Mock everything</strong> kh√¥ng c·∫ßn thi·∫øt</li>
<li><strong>Use reliable locators</strong> v√† auto-wait</li>
<li><strong>Monitor regularly</strong> v√† fix ngay khi ph√°t hi·ªán</li>
<li><strong>Accept reality</strong>: 100% stable tests l√† kh√¥ng th·ªÉ - aim for <code>&lt; 5%</code> flaky rate</li>
</ol>
<h3 id="mindset-qa">üéñÔ∏è Mindset QA<a class="headerlink" href="#mindset-qa" title="Permanent link">&para;</a></h3>
<blockquote>
<p>"Flaky test kh√¥ng ph·∫£i l√† l·ªói c·ªßa tool, m√† l√† l·ªói c·ªßa c√°ch ch√∫ng ta vi·∫øt test"</p>
</blockquote>
<p><strong>H√£y vi·∫øt tests nh∆∞ th·ªÉ ch√∫ng s·∫Ω ch·∫°y 1000 l·∫ßn m√† kh√¥ng fail m·ªôt l·∫ßn n√†o!</strong> üöÄ</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.expand", "navigation.sections", "navigation.top", "content.code.copy", "content.code.annotate", "search.highlight", "search.suggest"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>