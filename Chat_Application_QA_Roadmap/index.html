
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Knowledge base for SDET, Playwright, Selenium, API, and QA strategy">
      
      
      
        <link rel="canonical" href="https://vanvo19870515.github.io/learn-everything-for-me/Chat_Application_QA_Roadmap/">
      
      
        <link rel="prev" href="../sql-roadmap/">
      
      
        <link rel="next" href="../Chat_Application_QA_Roadmap_Infographic.html">
      
      
        
      
      
      <link rel="icon" href="../assets/avatar-32.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>QA Chat Application Roadmap - Learn Everything For Me</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="light-blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#learning-roadmap-chat-application-testing-qa-sdet-real-time" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Learn Everything For Me" class="md-header__button md-logo" aria-label="Learn Everything For Me" data-md-component="logo">
      
  <img src="../assets/avatar.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Learn Everything For Me
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              QA Chat Application Roadmap
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="light-blue"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="light-blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/vanvo19870515/learn-everything-for-me" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    vanvo19870515/learn-everything-for-me
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Learn Everything For Me" class="md-nav__button md-logo" aria-label="Learn Everything For Me" data-md-component="logo">
      
  <img src="../assets/avatar.png" alt="logo">

    </a>
    Learn Everything For Me
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/vanvo19870515/learn-everything-for-me" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    vanvo19870515/learn-everything-for-me
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Playwright
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Playwright
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Playwright_Guide_Reorganized/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Playwright Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../playwright-agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Canary & Agentic Workflow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../playwright-fixtures/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fixtures & Config
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../playwright-assertions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Assertions Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../playwright-reporter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Reporter API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../playwright-library/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Library vs Test Runner
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../migration-guides/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Migration Guides
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    SQL Resources
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    SQL Resources
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sql-roadmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SQL Roadmap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    QA Resources
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    QA Resources
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    QA Chat Application Roadmap
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    QA Chat Application Roadmap
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#mind-map-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        ğŸ“Š Mind Map Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ultimate-goal" class="md-nav__link">
    <span class="md-ellipsis">
      
        ğŸ¯ Ultimate Goal
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#learning-path-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      
        ğŸ“ˆ Learning Path Diagram
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chat_Application_QA_Roadmap_Infographic.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    QA Chat Application Roadmap Infographic
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../k6_performance_testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    QA Load Test with K6
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../k6-grafana-very-detail/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    QA K6 Grafana roadmap detail
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security-testing-apis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    QA APIs Security Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../qa-sdet-roadmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    QA/SDET Transition Roadmap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../qa-roadmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    QA & Automation Roadmap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sdet-framework-foundation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core Principles Framework
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../playwright-sdet-framework-intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SDET Framework Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../k6_performance_testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    QA Load Test with K6
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../k6-grafana-very-detail/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    QA K6 Grafana roadmap detail
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security-testing-apis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    QA APIs Security Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../n8n-road-map/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    QA n8n roadmap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Data Resources
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Data Resources
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../elasticsearch-roadmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Elasticsearch Roadmap
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../elasticsearch-query-deepdive/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Elasticsearch Query Deep Dive
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../http-caching/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    HTTP Caching Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Testing Strategy
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Testing Strategy
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Test_Automation_Pyramid_Guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Test Automation Pyramid
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Flaky_Test_Guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Flaky Test Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Flaky_Test_Infographic.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Flaky Test Infographic
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ui-api-pom-comparison/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UI POM vs API POM
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../shift-left-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Shift-Left Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mutation-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mutation Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    SDET Prep
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    SDET Prep
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../SDET_Interview_Preparation_Guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SDET Interview Preparation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Experienced_Automation_Tester_QA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Experienced Automation Tester Q&A
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Automation_Interview_QA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Automation Interview Q&A
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../java-oop-concepts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Java OOP Concepts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#mind-map-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        ğŸ“Š Mind Map Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ultimate-goal" class="md-nav__link">
    <span class="md-ellipsis">
      
        ğŸ¯ Ultimate Goal
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#learning-path-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      
        ğŸ“ˆ Learning Path Diagram
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="learning-roadmap-chat-application-testing-qa-sdet-real-time">ğŸ§­ LEARNING ROADMAP: CHAT APPLICATION TESTING (QA / SDET â€“ REAL-TIME)<a class="headerlink" href="#learning-roadmap-chat-application-testing-qa-sdet-real-time" title="Permanent link">&para;</a></h1>
<h2 id="mind-map-overview">ğŸ“Š Mind Map Overview<a class="headerlink" href="#mind-map-overview" title="Permanent link">&para;</a></h2>
<p><img alt="QA Roadmap for Chat App" src="../assets/unnamed.png" /></p>
<div class="highlight"><pre><span></span><code>mindmap
  root((Chat Application&lt;br/&gt;QA Roadmap))
    Phase 1: Foundations
      WebSocket Basics
        Handshake
        Open/Close
        Message Flow
      Socket.io Concepts
        Namespaces
        Rooms
        Events
        Heartbeat
      Key Differences
        Request/Response vs Persistent
        Stateless vs Stateful
        TPS vs Concurrent
    Phase 2: Performance
      Metrics
        Concurrent Connections
        Message Throughput
        Message Latency
        Reconnect Rate
      Tools
        k6 (Recommended)
        JMeter
      Test Scenarios
        Spike Test
        Soak Test
        Burst Test
    Phase 3: Security
      IDOR Issues
        Room Access
        Message Access
        User Impersonation
      Authentication
        Token Management
        Reconnection Auth
      Encryption
        E2EE
        Data Leak
        WSS Protocol
      Tools
        Burp Suite
        DevTools
        Postman
    Phase 4: Advanced
      Strategic Questions
        Architecture Understanding
        Failure Scenarios
        System Design
      Deliverables
        Performance Strategy
        Security Checklist
        Failure Analysis
</code></pre></div>
<hr />
<h2 id="ultimate-goal">ğŸ¯ Ultimate Goal<a class="headerlink" href="#ultimate-goal" title="Permanent link">&para;</a></h2>
<p>After <strong>3â€“6 months</strong>, you will be able to:</p>
<ul>
<li>âœ… <strong>Design Performance Tests</strong> for Real-time Chat systems</li>
<li>âœ… <strong>Identify &amp; simulate</strong> real-world bottlenecks</li>
<li>âœ… <strong>Master Security &amp; Privacy</strong> testing for Chat applications</li>
<li>âœ… <strong>Consult effectively</strong> with Backend / Product / Security teams</li>
<li>âœ… <strong>Become a specialized Chat QA</strong> (rare &amp; highly-paid role)</li>
</ul>
<hr />
<h2 id="learning-path-diagram">ğŸ“ˆ Learning Path Diagram<a class="headerlink" href="#learning-path-diagram" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CHAT APPLICATION QA ROADMAP                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                     â”‚                     â”‚
    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”            â”Œâ”€â”€â”€â–¼â”€â”€â”€â”            â”Œâ”€â”€â”€â–¼â”€â”€â”€â”
    â”‚ WEEK  â”‚            â”‚ WEEK  â”‚            â”‚ WEEK  â”‚
    â”‚ 1-3   â”‚            â”‚ 4-9   â”‚            â”‚ 10-13 â”‚
    â”‚       â”‚            â”‚       â”‚            â”‚       â”‚
    â”‚Phase 1â”‚            â”‚Phase 2â”‚            â”‚Phase 3â”‚
    â”‚Foundation          â”‚Performance         â”‚Securityâ”‚
    â””â”€â”€â”€â”¬â”€â”€â”€â”˜            â””â”€â”€â”€â”¬â”€â”€â”€â”˜            â””â”€â”€â”€â”¬â”€â”€â”€â”˜
        â”‚                    â”‚                    â”‚
        â”‚                    â”‚                    â”‚
    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”
    â”‚              WEEK 14-24 (Optional)                â”‚
    â”‚                                                    â”‚
    â”‚                 Phase 4: Advanced                 â”‚
    â”‚         Become &quot;Product Guardian&quot;                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>
<hr />
<h1 id="phase-1-real-time-foundations-23-weeks">ğŸ“š PHASE 1 â€” REAL-TIME FOUNDATIONS (2â€“3 Weeks)<a class="headerlink" href="#phase-1-real-time-foundations-23-weeks" title="Permanent link">&para;</a></h1>
<h2 id="what-you-need-to-learn-first">ğŸ“ What You Need to Learn First<a class="headerlink" href="#what-you-need-to-learn-first" title="Permanent link">&para;</a></h2>
<h3 id="1-understanding-chat-traditional-web">1ï¸âƒ£ Understanding Chat â‰  Traditional Web<a class="headerlink" href="#1-understanding-chat-traditional-web" title="Permanent link">&para;</a></h3>
<h4 id="core-differences-explained">ğŸ”„ Core Differences Explained<a class="headerlink" href="#core-differences-explained" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th style="text-align: left;">Aspect</th>
<th style="text-align: left;">Traditional Web</th>
<th style="text-align: left;">Chat (Real-time)</th>
<th style="text-align: left;">Why It Matters</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>Communication Pattern</strong></td>
<td style="text-align: left;">Request/Response</td>
<td style="text-align: left;">Persistent Connection</td>
<td style="text-align: left;">Chat needs constant connection</td>
</tr>
<tr>
<td style="text-align: left;"><strong>State Management</strong></td>
<td style="text-align: left;">Stateless</td>
<td style="text-align: left;">Stateful</td>
<td style="text-align: left;">Chat remembers who's connected</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Primary Metric</strong></td>
<td style="text-align: left;">TPS (Transactions Per Sec)</td>
<td style="text-align: left;">Concurrent Connections</td>
<td style="text-align: left;">We care about users, not requests</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Latency Focus</strong></td>
<td style="text-align: left;">Page Load Time</td>
<td style="text-align: left;">Message Latency</td>
<td style="text-align: left;">Users expect instant delivery</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Protocol</strong></td>
<td style="text-align: left;">HTTP</td>
<td style="text-align: left;">WebSocket / Socket.io</td>
<td style="text-align: left;">Different protocol = different testing</td>
</tr>
</tbody>
</table>
<h4 id="visual-comparison">ğŸ’¡ Visual Comparison<a class="headerlink" href="#visual-comparison" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>Traditional Web (HTTP):
â”Œâ”€â”€â”€â”€â”€â”€â”  Request   â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚Clientâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚Serverâ”‚
â””â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”  Response  â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚Clientâ”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤Serverâ”‚
â””â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”˜
(Connection closes after each request)

Real-time Chat (WebSocket):
â”Œâ”€â”€â”€â”€â”€â”€â”  Handshake  â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚Clientâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚Serverâ”‚
â””â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚Clientâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚Serverâ”‚ (Persistent)
â””â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”˜
â”‚Clientâ”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤Serverâ”‚ (Bi-directional)
â””â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”˜
(Connection stays open, messages flow both ways)
</code></pre></div>
<h3 id="2-essential-knowledge-you-dont-need-to-code-backend">2ï¸âƒ£ Essential Knowledge (You Don't Need to Code Backend!)<a class="headerlink" href="#2-essential-knowledge-you-dont-need-to-code-backend" title="Permanent link">&para;</a></h3>
<h4 id="websocket-lifecycle-must-understand">ğŸ”Œ WebSocket Lifecycle (Must Understand)<a class="headerlink" href="#websocket-lifecycle-must-understand" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>sequenceDiagram
    participant C as Client
    participant S as Server

    Note over C,S: 1. HANDSHAKE Phase
    C-&gt;&gt;S: HTTP Upgrade Request
    S-&gt;&gt;C: 101 Switching Protocols

    Note over C,S: 2. CONNECTION OPENED
    S-&gt;&gt;C: Connection Established

    Note over C,S: 3. MESSAGE Exchange
    C-&gt;&gt;S: Send Message (text/binary)
    S-&gt;&gt;C: Acknowledge
    S-&gt;&gt;C: Broadcast to Other Users

    Note over C,S: 4. HEARTBEAT (Keep-Alive)
    C-&gt;&gt;S: Ping
    S-&gt;&gt;C: Pong

    Note over C,S: 5. CONNECTION CLOSE
    C-&gt;&gt;S: Close Frame
    S-&gt;&gt;C: Close Frame
    Connection Closed
</code></pre></div>
<p><strong>What Each Phase Means:</strong></p>
<ol>
<li><strong>Handshake</strong></li>
<li>Client sends HTTP request with <code>Upgrade: websocket</code> header</li>
<li>Server responds with <code>101 Switching Protocols</code></li>
<li>
<p>Connection upgrades from HTTP to WebSocket</p>
</li>
<li>
<p><strong>Open</strong></p>
</li>
<li>Connection is established</li>
<li>Both sides can send/receive immediately</li>
<li>
<p>No need to open new connection for each message</p>
</li>
<li>
<p><strong>Message</strong></p>
</li>
<li>Data can flow both ways (client â†” server)</li>
<li>Messages can be text or binary</li>
<li>
<p>No headers needed (unlike HTTP)</p>
</li>
<li>
<p><strong>Close</strong></p>
</li>
<li>Either side can initiate close</li>
<li>Connection gracefully terminates</li>
<li>Resources are cleaned up</li>
</ol>
<h4 id="socketio-concepts-most-chat-apps-use-this">ğŸ¯ Socket.io Concepts (Most Chat Apps Use This)<a class="headerlink" href="#socketio-concepts-most-chat-apps-use-this" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>Socket.io Architecture:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Socket.io Server                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚      Namespace: &quot;/chat&quot;           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚   Room: &quot;room-123&quot;          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚User1â”‚ â”‚User2â”‚ â”‚User3â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜   â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚   Room: &quot;room-456&quot;          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”           â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚User4â”‚ â”‚User5â”‚           â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜           â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>
<p><strong>Key Concepts Explained:</strong></p>
<ol>
<li><strong>Namespace</strong> (<code>/chat</code>, <code>/admin</code>)</li>
<li>Logical separation of different app features</li>
<li>Like different "departments" in a building</li>
<li>
<p>Example: <code>/chat</code> for messaging, <code>/notification</code> for alerts</p>
</li>
<li>
<p><strong>Room</strong> (<code>room-123</code>, <code>user-456</code>)</p>
</li>
<li>A channel where users can chat</li>
<li>Users can join/leave rooms</li>
<li>
<p>Messages sent to a room reach all users in that room</p>
</li>
<li>
<p><strong>Event-based Messaging</strong>
   <div class="highlight"><pre><span></span><code><span class="c1">// Client sends</span>
<span class="nx">socket</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;send_message&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Hello&#39;</span><span class="w"> </span><span class="p">});</span>

<span class="c1">// Server receives and broadcasts</span>
<span class="nx">io</span><span class="p">.</span><span class="nx">to</span><span class="p">(</span><span class="s1">&#39;room-123&#39;</span><span class="p">).</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;new_message&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Hello&#39;</span><span class="w"> </span><span class="p">});</span>

<span class="c1">// All clients in room-123 receive</span>
<span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;new_message&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">text</span><span class="p">);</span><span class="w"> </span><span class="c1">// &quot;Hello&quot;</span>
<span class="p">});</span>
</code></pre></div></p>
</li>
<li>
<p><strong>Heartbeat (Ping-Pong)</strong></p>
</li>
<li>Keep-alive mechanism</li>
<li>Server sends ping, client responds with pong</li>
<li>If no pong received, connection is considered dead</li>
<li>
<p><strong>Why important for testing</strong>: Network issues can cause false disconnections</p>
</li>
<li>
<p><strong>Fan-out (1 â†’ N users)</strong></p>
</li>
<li><strong>This is the stress point!</strong></li>
<li>1 user sends message â†’ Server broadcasts to N users</li>
<li>If 10,000 users in a room, 1 message = 10,000 server operations</li>
<li><strong>This is where performance testing focuses</strong></li>
</ol>
<h4 id="practical-learning-exercise">ğŸ“ Practical Learning Exercise<a class="headerlink" href="#practical-learning-exercise" title="Permanent link">&para;</a></h4>
<p><strong>Week 1-2: Build Understanding</strong></p>
<ol>
<li><strong>Day 1-2</strong>: Study WebSocket basics</li>
<li>Watch: "WebSocket explained in 5 minutes" (YouTube)</li>
<li>Read: MDN WebSocket API documentation</li>
<li>
<p><strong>Goal</strong>: Understand the handshake process</p>
</li>
<li>
<p><strong>Day 3-4</strong>: Explore Socket.io</p>
</li>
<li>Visit: socket.io/get-started/chat</li>
<li>Run their example chat app locally</li>
<li>
<p><strong>Goal</strong>: See how rooms and namespaces work</p>
</li>
<li>
<p><strong>Day 5-7</strong>: Test a simple chat</p>
</li>
<li>Use browser DevTools â†’ Network â†’ WS tab</li>
<li>Observe messages being sent/received</li>
<li><strong>Goal</strong>: Visualize the real-time flow</li>
</ol>
<p><strong>Week 3: Deep Dive</strong></p>
<ol>
<li><strong>Day 8-10</strong>: Understand fan-out</li>
<li>Test: 1 user sends â†’ how many receive?</li>
<li>Observe: Server logs during broadcast</li>
<li>
<p><strong>Goal</strong>: Grasp the "1 â†’ N" concept</p>
</li>
<li>
<p><strong>Day 11-14</strong>: Document your learnings</p>
</li>
<li>Write: "Chat Architecture Notes" for yourself</li>
<li>Create: Simple diagram of how chat works</li>
<li><strong>Goal</strong>: Solidify understanding</li>
</ol>
<hr />
<h1 id="phase-2-performance-testing-for-chat-46-weeks">ğŸ”¥ PHASE 2 â€” PERFORMANCE TESTING FOR CHAT (4â€“6 Weeks)<a class="headerlink" href="#phase-2-performance-testing-for-chat-46-weeks" title="Permanent link">&para;</a></h1>
<h2 id="why-chat-performance-testing-is-different">ğŸ“Š Why Chat Performance Testing is Different<a class="headerlink" href="#why-chat-performance-testing-is-different" title="Permanent link">&para;</a></h2>
<h3 id="the-fundamental-shift">The Fundamental Shift<a class="headerlink" href="#the-fundamental-shift" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>Traditional Web Performance Testing:
Focus: How many requests per second?
Metric: TPS (Transactions Per Second)
Test: Can server handle 1000 req/sec?

Chat Performance Testing:
Focus: How many users can stay connected?
Metric: Concurrent Connections
Test: Can 10,000 users stay connected and chat?
</code></pre></div>
<h3 id="3-critical-metrics-completely-different-from-web">3ï¸âƒ£ Critical Metrics (Completely Different from Web!)<a class="headerlink" href="#3-critical-metrics-completely-different-from-web" title="Permanent link">&para;</a></h3>
<h4 id="metrics-overview-diagram">ğŸ“ˆ Metrics Overview Diagram<a class="headerlink" href="#metrics-overview-diagram" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>graph TD
    A[Chat Performance Metrics] --&gt; B[Connection Metrics]
    A --&gt; C[Message Metrics]
    A --&gt; D[System Metrics]

    B --&gt; B1[Concurrent Connections]
    B --&gt; B2[Connection Establishment Time]
    B --&gt; B3[Reconnect Rate]
    B --&gt; B4[Drop Rate]

    C --&gt; C1[Message Throughput msg/sec]
    C --&gt; C2[Message Latency p95/p99]
    C --&gt; C3[Message Delivery Rate]
    C --&gt; C4[Queue Backlog]

    D --&gt; D1[Server CPU Usage]
    D --&gt; D2[Server Memory]
    D --&gt; D3[Network Bandwidth]
    D --&gt; D4[Error Rate]
</code></pre></div>
<h4 id="detailed-metric-explanations">Detailed Metric Explanations<a class="headerlink" href="#detailed-metric-explanations" title="Permanent link">&para;</a></h4>
<p><strong>1. Concurrent Connections</strong> â­ Most Important!
- <strong>What it means</strong>: How many users are connected simultaneously
- <strong>Why it matters</strong>: Each connection consumes server resources (memory, file descriptors)
- <strong>How to measure</strong>: Count active WebSocket connections
- <strong>Example</strong>: 
  - âœ… Good: 10,000 concurrent connections, stable
  - âŒ Bad: 5,000 concurrent connections, server crashes</p>
<p><strong>2. Message Throughput (msg/sec)</strong>
- <strong>What it means</strong>: How many messages can be processed per second
- <strong>Why it matters</strong>: Chat apps need to handle message bursts
- <strong>How to measure</strong>: Messages sent Ã· time
- <strong>Example</strong>:
  - âœ… Good: 50,000 msg/sec (1 user sends â†’ 10,000 receive = 10,001 messages processed)
  - âŒ Bad: 1,000 msg/sec, messages queued and delayed</p>
<p><strong>3. Message Latency (p95 / p99)</strong>
- <strong>What it means</strong>: Time from sending to receiving
- <strong>Why it matters</strong>: Users expect instant delivery
- <strong>How to measure</strong>: 
  - p95: 95% of messages delivered within X ms
  - p99: 99% of messages delivered within Y ms
- <strong>Example</strong>:
  - âœ… Good: p95 = 50ms, p99 = 100ms
  - âŒ Bad: p95 = 5000ms (5 seconds delay!)</p>
<p><strong>4. Drop Rate</strong>
- <strong>What it means</strong>: Percentage of connections that fail/disconnect
- <strong>Why it matters</strong>: Dropped connections = bad user experience
- <strong>How to measure</strong>: (Failed connections / Total attempts) Ã— 100
- <strong>Example</strong>:
  - âœ… Good: Drop rate &lt; 0.1%
  - âŒ Bad: Drop rate &gt; 5%</p>
<p><strong>5. Reconnect Rate</strong>
- <strong>What it means</strong>: How quickly users can reconnect after disconnection
- <strong>Why it matters</strong>: Network issues happen, users need quick recovery
- <strong>How to measure</strong>: Time from disconnect to reconnect
- <strong>Example</strong>:
  - âœ… Good: Reconnect in &lt; 2 seconds
  - âŒ Bad: Reconnect takes 30+ seconds</p>
<p><strong>6. Queue Backlog</strong>
- <strong>What it means</strong>: Messages waiting to be processed
- <strong>Why it matters</strong>: Growing backlog = system can't keep up
- <strong>How to measure</strong>: Number of messages in queue
- <strong>Example</strong>:
  - âœ… Good: Queue size &lt; 100 messages
  - âŒ Bad: Queue size &gt; 10,000 messages (messages delayed)</p>
<p><strong>7. Server CPU / Memory</strong>
- <strong>What it means</strong>: Resource usage on server
- <strong>Why it matters</strong>: High usage = potential crashes
- <strong>How to measure</strong>: Monitor server metrics
- <strong>Example</strong>:
  - âœ… Good: CPU &lt; 70%, Memory stable
  - âŒ Bad: CPU &gt; 95%, Memory constantly increasing (memory leak!)</p>
<h3 id="4-recommended-tools">4ï¸âƒ£ Recommended Tools<a class="headerlink" href="#4-recommended-tools" title="Permanent link">&para;</a></h3>
<h4 id="k6-highly-recommended">âœ… k6 (Highly Recommended!)<a class="headerlink" href="#k6-highly-recommended" title="Permanent link">&para;</a></h4>
<p><strong>Why k6 for Chat Testing?</strong></p>
<div class="highlight"><pre><span></span><code>k6 Advantages:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… Native WebSocket Support         â”‚
â”‚ âœ… JavaScript-based (easy to learn) â”‚
â”‚ âœ… CI/CD Friendly                   â”‚
â”‚ âœ… Great Documentation              â”‚
â”‚ âœ… Active Community                 â”‚
â”‚ âœ… Lightweight                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>
<p><strong>Example k6 Script for Chat Testing:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">ws</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;k6/ws&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">check</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;k6&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">stages</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nx">duration</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;1m&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">target</span><span class="o">:</span><span class="w"> </span><span class="mf">100</span><span class="w"> </span><span class="p">},</span><span class="w">    </span><span class="c1">// Ramp up to 100 users</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nx">duration</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;3m&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">target</span><span class="o">:</span><span class="w"> </span><span class="mf">100</span><span class="w"> </span><span class="p">},</span><span class="w">    </span><span class="c1">// Stay at 100 users</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nx">duration</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;1m&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">target</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="p">},</span><span class="w">      </span><span class="c1">// Ramp down</span>
<span class="w">  </span><span class="p">],</span>
<span class="p">};</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;ws://localhost:3000/chat&#39;</span><span class="p">;</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">tags</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ChatConnection&#39;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">};</span>

<span class="w">  </span><span class="c1">// Connect to WebSocket</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ws</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span><span class="w"> </span><span class="nx">params</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">socket</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// On connection open</span>
<span class="w">    </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;open&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;WebSocket connection opened&#39;</span><span class="p">);</span>

<span class="w">      </span><span class="c1">// Join a room</span>
<span class="w">      </span><span class="nx">socket</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
<span class="w">        </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;join&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">room</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;test-room&#39;</span>
<span class="w">      </span><span class="p">}));</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="c1">// Listen for messages</span>
<span class="w">    </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>

<span class="w">      </span><span class="nx">check</span><span class="p">(</span><span class="nx">response</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s1">&#39;message received&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">r</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">message</span><span class="p">.</span><span class="nx">type</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;chat&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="s1">&#39;message has text&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">r</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">message</span><span class="p">.</span><span class="nx">text</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="kc">undefined</span><span class="p">,</span>
<span class="w">      </span><span class="p">});</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="c1">// Send a test message every 5 seconds</span>
<span class="w">    </span><span class="nx">socket</span><span class="p">.</span><span class="nx">setInterval</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">socket</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
<span class="w">        </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;message&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Hello from k6!&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">room</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;test-room&#39;</span>
<span class="w">      </span><span class="p">}));</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="mf">5000</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Close connection after 30 seconds</span>
<span class="w">    </span><span class="nx">socket</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">socket</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="mf">30000</span><span class="p">);</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="nx">check</span><span class="p">(</span><span class="nx">response</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s1">&#39;status is 101&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">r</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">r</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">r</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">101</span><span class="p">,</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Learning k6 (Week 4-5):</strong></p>
<ol>
<li>
<p><strong>Day 1-2</strong>: Install and run first test
   <div class="highlight"><pre><span></span><code><span class="c1"># Install k6</span>
brew<span class="w"> </span>install<span class="w"> </span>k6<span class="w">  </span><span class="c1"># Mac</span>
<span class="c1"># or</span>
choco<span class="w"> </span>install<span class="w"> </span>k6<span class="w">  </span><span class="c1"># Windows</span>

<span class="c1"># Run example</span>
k6<span class="w"> </span>run<span class="w"> </span>chat-test.js
</code></pre></div></p>
</li>
<li>
<p><strong>Day 3-5</strong>: Understand WebSocket in k6</p>
</li>
<li>Read: k6.io/docs/javascript-api/k6-ws</li>
<li>Practice: Connect to a test chat server</li>
<li>
<p><strong>Goal</strong>: Successfully connect and send messages</p>
</li>
<li>
<p><strong>Day 6-10</strong>: Build real test scenarios</p>
</li>
<li>Test concurrent connections</li>
<li>Measure message latency</li>
<li><strong>Goal</strong>: Write your first performance test</li>
</ol>
<h4 id="jmeter-only-if-required">âš ï¸ JMeter (Only if Required)<a class="headerlink" href="#jmeter-only-if-required" title="Permanent link">&para;</a></h4>
<p><strong>Why JMeter is Less Ideal:</strong></p>
<div class="highlight"><pre><span></span><code>JMeter Limitations for Chat:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âŒ Requires WebSocket Plugin        â”‚
â”‚ âŒ Heavy Resource Usage             â”‚
â”‚ âŒ Hard to Maintain                 â”‚
â”‚ âŒ GUI-based (harder to version)    â”‚
â”‚ âŒ Less flexible for long-running   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>
<p><strong>When to Use JMeter:</strong>
- Company policy requires JMeter
- Team already uses JMeter extensively
- Need GUI-based testing</p>
<h3 id="5-real-world-test-scenarios">5ï¸âƒ£ Real-World Test Scenarios<a class="headerlink" href="#5-real-world-test-scenarios" title="Permanent link">&para;</a></h3>
<h4 id="scenario-1-spike-connections-test">Scenario 1: Spike Connections Test ğŸ”¥<a class="headerlink" href="#scenario-1-spike-connections-test" title="Permanent link">&para;</a></h4>
<p><strong>Objective</strong>: Test how server handles sudden connection surge</p>
<div class="highlight"><pre><span></span><code>Test Pattern:
Time (minutes)
0:00  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º 10,000 users
      (Ramp up in 1 minute)

Observations:
- How many connections succeed?
- Where does it fail? (Handshake? Auth?)
- Server response time?
- Error messages?
</code></pre></div>
<p><strong>k6 Script Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">stages</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nx">duration</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;1m&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">target</span><span class="o">:</span><span class="w"> </span><span class="mf">10000</span><span class="w"> </span><span class="p">},</span><span class="w">  </span><span class="c1">// Spike to 10k in 1 min</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nx">duration</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;2m&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">target</span><span class="o">:</span><span class="w"> </span><span class="mf">10000</span><span class="w"> </span><span class="p">},</span><span class="w">  </span><span class="c1">// Hold for 2 min</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nx">duration</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;1m&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">target</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="p">},</span><span class="w">      </span><span class="c1">// Ramp down</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nx">thresholds</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s1">&#39;ws_connecting&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;rate&lt;0.01&#39;</span><span class="p">],</span><span class="w">     </span><span class="c1">// &lt; 1% connection failures</span>
<span class="w">    </span><span class="s1">&#39;ws_session_duration&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;p(95)&lt;2000&#39;</span><span class="p">],</span><span class="w"> </span><span class="c1">// 95% connect in &lt; 2s</span>
<span class="w">  </span><span class="p">},</span>
<span class="p">};</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;ws://your-chat-server.com/chat&#39;</span><span class="p">;</span>

<span class="w">  </span><span class="nx">ws</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span><span class="w"> </span><span class="p">{},</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">socket</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;open&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// Test authentication</span>
<span class="w">      </span><span class="nx">socket</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;auth&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">token</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;test-token&#39;</span><span class="w"> </span><span class="p">}));</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nx">socket</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">socket</span><span class="p">.</span><span class="nx">close</span><span class="p">(),</span><span class="w"> </span><span class="mf">60000</span><span class="p">);</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>What to Look For:</strong>
- âœ… <strong>Good</strong>: 9,950+ connections succeed (&lt; 0.5% failure)
- âŒ <strong>Bad</strong>: Only 5,000 connections succeed (50% failure)
- ğŸ” <strong>Debug</strong>: Check server logs for "connection refused" or "timeout"</p>
<h4 id="scenario-2-soak-test-long-running">Scenario 2: Soak Test (Long-Running) â°<a class="headerlink" href="#scenario-2-soak-test-long-running" title="Permanent link">&para;</a></h4>
<p><strong>Objective</strong>: Find memory leaks and zombie connections</p>
<div class="highlight"><pre><span></span><code>Test Pattern:
Time (hours)
0:00  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º 8:00
      (5,000 users stay connected for 8 hours)

What to Monitor:
- Memory usage over time (should be stable)
- Number of active connections (should stay at 5k)
- Message delivery (should remain consistent)
</code></pre></div>
<p><strong>k6 Script Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">stages</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nx">duration</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;5m&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">target</span><span class="o">:</span><span class="w"> </span><span class="mf">5000</span><span class="w"> </span><span class="p">},</span><span class="w">   </span><span class="c1">// Ramp up to 5k users</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nx">duration</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;8h&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">target</span><span class="o">:</span><span class="w"> </span><span class="mf">5000</span><span class="w"> </span><span class="p">},</span><span class="w">   </span><span class="c1">// Soak for 8 hours</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nx">duration</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;5m&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">target</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="p">},</span><span class="w">      </span><span class="c1">// Ramp down</span>
<span class="w">  </span><span class="p">],</span>
<span class="p">};</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;ws://your-chat-server.com/chat&#39;</span><span class="p">;</span>

<span class="w">  </span><span class="nx">ws</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span><span class="w"> </span><span class="p">{},</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">socket</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;open&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">socket</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;join&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">room</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;soak-test&#39;</span><span class="w"> </span><span class="p">}));</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="c1">// Send heartbeat every 30 seconds</span>
<span class="w">    </span><span class="nx">socket</span><span class="p">.</span><span class="nx">setInterval</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">socket</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="w"> </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ping&#39;</span><span class="w"> </span><span class="p">}));</span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="mf">30000</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Listen for messages</span>
<span class="w">    </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// Process message</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>What to Look For:</strong>
- âœ… <strong>Good</strong>: Memory usage stays flat, all connections remain active
- âŒ <strong>Bad</strong>: Memory usage increases over time (memory leak!)
- âŒ <strong>Bad</strong>: Connections drop over time (zombie connections)
- ğŸ” <strong>Debug</strong>: Use server monitoring tools (Grafana, Prometheus)</p>
<h4 id="scenario-3-burst-message-test">Scenario 3: Burst Message Test ğŸ’¥<a class="headerlink" href="#scenario-3-burst-message-test" title="Permanent link">&para;</a></h4>
<p><strong>Objective</strong>: Test rate limiting and queue overflow</p>
<div class="highlight"><pre><span></span><code>Test Pattern:
Time (seconds)
0:00  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º User sends 100 messages
      (All within 1 second)

What to Test:
- Does rate limiting work?
- Does queue overflow?
- Are messages lost?
- Server stability?
</code></pre></div>
<p><strong>k6 Script Example:</strong></p>
<div class="highlight"><pre><span></span><code><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">vus</span><span class="o">:</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w">  </span><span class="c1">// 10 virtual users</span>
<span class="w">  </span><span class="nx">duration</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;1m&#39;</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;ws://your-chat-server.com/chat&#39;</span><span class="p">;</span>

<span class="w">  </span><span class="nx">ws</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span><span class="w"> </span><span class="p">{},</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">socket</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;open&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// Send 100 messages rapidly</span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">100</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">socket</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
<span class="w">          </span><span class="nx">type</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;message&#39;</span><span class="p">,</span>
<span class="w">          </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="sb">`Message </span><span class="si">${</span><span class="nx">i</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
<span class="w">          </span><span class="nx">room</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;burst-test&#39;</span>
<span class="w">        </span><span class="p">}));</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// Verify message was received</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>What to Look For:</strong>
- âœ… <strong>Good</strong>: Rate limiting kicks in, messages queued properly
- âŒ <strong>Bad</strong>: Server crashes or messages lost
- ğŸ” <strong>Debug</strong>: Check server logs for "rate limit exceeded" or "queue full"</p>
<h3 id="learning-path-for-phase-2">ğŸ“š Learning Path for Phase 2<a class="headerlink" href="#learning-path-for-phase-2" title="Permanent link">&para;</a></h3>
<p><strong>Week 4-5: Tool Setup &amp; Basics</strong>
- Day 1-3: Install k6, run first test
- Day 4-7: Learn WebSocket testing in k6
- Day 8-10: Write basic connection test
- Day 11-14: Measure concurrent connections</p>
<p><strong>Week 6-7: Advanced Scenarios</strong>
- Day 15-17: Implement spike test
- Day 18-21: Implement soak test
- Day 22-24: Implement burst test
- Day 25-28: Analyze results and create reports</p>
<p><strong>Week 8-9: Real-World Practice</strong>
- Day 29-35: Test a real chat application
- Day 36-42: Create performance test strategy document
- Day 43-49: Present findings to team</p>
<hr />
<h1 id="phase-3-security-privacy-for-chat-34-weeks">ğŸ›¡ï¸ PHASE 3 â€” SECURITY &amp; PRIVACY FOR CHAT (3â€“4 Weeks)<a class="headerlink" href="#phase-3-security-privacy-for-chat-34-weeks" title="Permanent link">&para;</a></h1>
<h2 id="why-chat-security-is-critical">ğŸ”’ Why Chat Security is Critical<a class="headerlink" href="#why-chat-security-is-critical" title="Permanent link">&para;</a></h2>
<p>Chat applications handle sensitive data:
- Personal conversations
- Private information
- Authentication tokens
- User presence status</p>
<p><strong>One security flaw = Data breach affecting thousands of users!</strong></p>
<h3 id="6-common-security-vulnerabilities-in-chat">6ï¸âƒ£ Common Security Vulnerabilities in Chat<a class="headerlink" href="#6-common-security-vulnerabilities-in-chat" title="Permanent link">&para;</a></h3>
<h4 id="idor-insecure-direct-object-reference">ğŸ”¥ IDOR (Insecure Direct Object Reference)<a class="headerlink" href="#idor-insecure-direct-object-reference" title="Permanent link">&para;</a></h4>
<p><strong>What is IDOR?</strong>
Accessing resources that belong to other users without authorization.</p>
<p><strong>Why Chat is Vulnerable:</strong>
- Multiple rooms/conversations
- Complex permission models
- Real-time nature makes it hard to verify</p>
<p><strong>Common IDOR Attacks in Chat:</strong></p>
<div class="highlight"><pre><span></span><code>Attack Scenario 1: Unauthorized Room Access
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Attacker&#39;s Request:                     â”‚
â”‚ POST /api/rooms/join                    â”‚
â”‚ { &quot;roomId&quot;: &quot;room-123&quot; }                â”‚
â”‚                                         â”‚
â”‚ âŒ Vulnerable: No check if user has     â”‚
â”‚    permission to join room-123          â”‚
â”‚                                         â”‚
â”‚ âœ… Secure: Verify user is invited/      â”‚
â”‚    has access before allowing join      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Attack Scenario 2: Read Other Users&#39; Messages
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Attacker&#39;s Request:                     â”‚
â”‚ GET /api/messages?conversationId=456    â”‚
â”‚                                         â”‚
â”‚ âŒ Vulnerable: Returns all messages     â”‚
â”‚    without checking if user is part of  â”‚
â”‚    conversation-456                     â”‚
â”‚                                         â”‚
â”‚ âœ… Secure: Verify user is participant   â”‚
â”‚    before returning messages            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Attack Scenario 3: Send Messages as Another User
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Attacker&#39;s WebSocket Message:           â”‚
â”‚ {                                       â”‚
â”‚   &quot;type&quot;: &quot;send_message&quot;,               â”‚
â”‚   &quot;userId&quot;: &quot;victim-user-id&quot;,  â† âš ï¸    â”‚
â”‚   &quot;text&quot;: &quot;Fake message&quot;                â”‚
â”‚ }                                       â”‚
â”‚                                         â”‚
â”‚ âŒ Vulnerable: Server trusts userId     â”‚
â”‚    from client message                  â”‚
â”‚                                         â”‚
â”‚ âœ… Secure: Use authenticated session    â”‚
â”‚    userId, ignore client-provided id   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>
<p><strong>How to Test for IDOR:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// Test Case 1: Try to join private room</span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">testUnauthorizedRoomAccess</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// As User A</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">tokenA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">login</span><span class="p">(</span><span class="s1">&#39;userA@example.com&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;password&#39;</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Try to join room that belongs to User B</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;/api/rooms/join&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;POST&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s1">&#39;Authorization&#39;</span><span class="o">:</span><span class="w"> </span><span class="sb">`Bearer </span><span class="si">${</span><span class="nx">tokenA</span><span class="si">}</span><span class="sb">`</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="w"> </span><span class="nx">roomId</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;user-b-private-room&#39;</span><span class="w"> </span><span class="p">})</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="c1">// Should fail with 403 Forbidden</span>
<span class="w">  </span><span class="nx">expect</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">403</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Test Case 2: Try to read other user&#39;s messages</span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">testUnauthorizedMessageAccess</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">tokenA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">login</span><span class="p">(</span><span class="s1">&#39;userA@example.com&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;password&#39;</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Try to get messages from conversation between User B and User C</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;/api/messages?conversationId=bc-conversation&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s1">&#39;Authorization&#39;</span><span class="o">:</span><span class="w"> </span><span class="sb">`Bearer </span><span class="si">${</span><span class="nx">tokenA</span><span class="si">}</span><span class="sb">`</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="c1">// Should fail with 403 Forbidden</span>
<span class="w">  </span><span class="nx">expect</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">403</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Test Case 3: Try to send message as another user</span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">testUserImpersonation</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">socket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">io</span><span class="p">(</span><span class="s1">&#39;ws://chat-server.com&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">auth</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">token</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;user-a-token&#39;</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;connect&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Try to send message claiming to be User B</span>
<span class="w">    </span><span class="nx">socket</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;send_message&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">userId</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;user-b-id&#39;</span><span class="p">,</span><span class="w">  </span><span class="c1">// âš ï¸ Should be ignored by server</span>
<span class="w">      </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Fake message&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">roomId</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;room-123&#39;</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="c1">// Verify message shows as from User A (not User B)</span>
<span class="w">  </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;message_sent&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">message</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="nx">message</span><span class="p">.</span><span class="nx">userId</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">&#39;user-a-id&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="authentication-authorization-issues">ğŸ” Authentication &amp; Authorization Issues<a class="headerlink" href="#authentication-authorization-issues" title="Permanent link">&para;</a></h4>
<p><strong>Common Problems:</strong></p>
<div class="highlight"><pre><span></span><code>Problem 1: Token Reuse
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âŒ Vulnerable:                           â”‚
â”‚ - Token never expires                   â”‚
â”‚ - Token can be reused multiple times    â”‚
â”‚ - Stolen token = permanent access       â”‚
â”‚                                         â”‚
â”‚ âœ… Secure:                              â”‚
â”‚ - Token expires (JWT with exp claim)    â”‚
â”‚ - One-time tokens for critical actions  â”‚
â”‚ - Refresh token mechanism               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Problem 2: Reconnection Without Re-authentication
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âŒ Vulnerable:                           â”‚
â”‚ Client disconnects â†’ Reconnects         â”‚
â”‚ Server accepts reconnection with old    â”‚
â”‚ session (no auth check)                 â”‚
â”‚                                         â”‚
â”‚ âœ… Secure:                              â”‚
â”‚ Reconnection requires new token or      â”‚
â”‚ re-verification of existing token       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Problem 3: Token in URL
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âŒ Vulnerable:                           â”‚
â”‚ ws://chat.com/chat?token=abc123         â”‚
â”‚                                         â”‚
â”‚ Problems:                               â”‚
â”‚ - Token visible in browser history      â”‚
â”‚ - Token in server logs                  â”‚
â”‚ - Token can be shared via URL           â”‚
â”‚                                         â”‚
â”‚ âœ… Secure:                              â”‚
â”‚ Token in Authorization header or        â”‚
â”‚ cookie (HttpOnly, Secure)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>
<p><strong>Test Cases:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// Test Case 1: Token Expiration</span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">testTokenExpiration</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">login</span><span class="p">(</span><span class="s1">&#39;user@example.com&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;password&#39;</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Wait for token to expire (or use expired token)</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">expiredToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;expired-jwt-token&#39;</span><span class="p">;</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">socket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">io</span><span class="p">(</span><span class="s1">&#39;ws://chat-server.com&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">auth</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">token</span><span class="o">:</span><span class="w"> </span><span class="nx">expiredToken</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;connect_error&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Should reject connection</span>
<span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">).</span><span class="nx">toContain</span><span class="p">(</span><span class="s1">&#39;token expired&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">}</span>

<span class="c1">// Test Case 2: Reconnection Authentication</span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">testReconnectionAuth</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">socket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">io</span><span class="p">(</span><span class="s1">&#39;ws://chat-server.com&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">auth</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">token</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;valid-token&#39;</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;connect&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Disconnect</span>
<span class="w">    </span><span class="nx">socket</span><span class="p">.</span><span class="nx">disconnect</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// Try to reconnect without new token</span>
<span class="w">    </span><span class="nx">socket</span><span class="p">.</span><span class="nx">connect</span><span class="p">();</span>

<span class="w">    </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;connect_error&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// Should require re-authentication</span>
<span class="w">      </span><span class="nx">expect</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">).</span><span class="nx">toContain</span><span class="p">(</span><span class="s1">&#39;authentication required&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="encryption-data-leak-issues">ğŸ”’ Encryption &amp; Data Leak Issues<a class="headerlink" href="#encryption-data-leak-issues" title="Permanent link">&para;</a></h4>
<p><strong>End-to-End Encryption (E2EE):</strong></p>
<div class="highlight"><pre><span></span><code>E2EE Flow:
â”Œâ”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚User Aâ”‚                    â”‚User Bâ”‚
â””â”€â”€â”¬â”€â”€â”€â”˜                    â””â”€â”€â”€â”¬â”€â”€â”˜
   â”‚                            â”‚
   â”‚ 1. Encrypt message         â”‚
   â”‚    with User B&#39;s key       â”‚
   â”‚                            â”‚
   â–¼                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚Serverâ”‚ 2. Store encrypted â”‚
â”‚      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚      â”‚    (Server cannot read)
â””â”€â”€â”¬â”€â”€â”€â”˜
   â”‚
   â”‚ 3. Forward encrypted
   â”‚    message to User B
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚User Bâ”‚ 4. Decrypt with
â”‚      â”‚    private key
â””â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>
<p><strong>Common Data Leak Points:</strong></p>
<div class="highlight"><pre><span></span><code>1. Plaintext in Server Logs
âŒ Server logs: &quot;User sent: My password is 12345&quot;
âœ… Server logs: &quot;User sent message (encrypted)&quot;

2. WebSocket Traffic (Non-WSS)
âŒ ws://chat.com (unencrypted)
âœ… wss://chat.com (encrypted with TLS)

3. Error Messages Leak Info
âŒ Error: &quot;User john@example.com not found in room-123&quot;
âœ… Error: &quot;Access denied&quot;

4. Message Metadata Exposure
âŒ API returns: { sender: &quot;admin&quot;, isAdmin: true, email: &quot;admin@...&quot; }
âœ… API returns: { sender: &quot;user-123&quot; } (minimal info)
</code></pre></div>
<p><strong>Test Cases:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// Test Case 1: Check for WSS (Secure WebSocket)</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">testSecureConnection</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">socket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">io</span><span class="p">(</span><span class="s1">&#39;wss://chat-server.com&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Should use wss:// not ws://</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;connect&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Verify connection is secure</span>
<span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">protocol</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="s1">&#39;https:&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">}</span>

<span class="c1">// Test Case 2: Check Error Messages</span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">testErrorMessageLeak</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;/api/rooms/nonexistent-room/messages&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s1">&#39;Authorization&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Bearer valid-token&#39;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Error should not contain sensitive info</span>
<span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toContain</span><span class="p">(</span><span class="s1">&#39;@&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toContain</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toContain</span><span class="p">(</span><span class="s1">&#39;token&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Test Case 3: Verify E2EE</span>
<span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">testEndToEndEncryption</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Send message and capture network traffic</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Secret message&#39;</span><span class="p">;</span>
<span class="w">  </span><span class="nx">socket</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;send_message&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="p">});</span>

<span class="w">  </span><span class="c1">// Check network tab - message should be encrypted</span>
<span class="w">  </span><span class="c1">// (Not readable plaintext)</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="7-security-testing-tools">7ï¸âƒ£ Security Testing Tools<a class="headerlink" href="#7-security-testing-tools" title="Permanent link">&para;</a></h3>
<h4 id="tool-overview">ğŸ”§ Tool Overview<a class="headerlink" href="#tool-overview" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>Security Testing Tools for Chat:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Burp Suite                           â”‚
â”‚    - WebSocket interception             â”‚
â”‚    - Modify messages in real-time       â”‚
â”‚    - Replay attacks                     â”‚
â”‚                                         â”‚
â”‚ 2. Browser DevTools                     â”‚
â”‚    - Network â†’ WS tab                   â”‚
â”‚    - View WebSocket frames              â”‚
â”‚    - Inspect message payloads           â”‚
â”‚                                         â”‚
â”‚ 3. Postman                              â”‚
â”‚    - WebSocket client                   â”‚
â”‚    - Manual testing                     â”‚
â”‚    - Test different scenarios           â”‚
â”‚                                         â”‚
â”‚ 4. OWASP ZAP                            â”‚
â”‚    - Automated security scanning        â”‚
â”‚    - API security testing               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>
<p><strong>Burp Suite Setup for Chat Testing:</strong></p>
<div class="highlight"><pre><span></span><code>Burp Suite Configuration:
1. Install Burp Suite Community (free)
2. Configure browser proxy (127.0.0.1:8080)
3. Enable WebSocket interception
4. Intercept and modify messages
</code></pre></div>
<p><strong>Browser DevTools Usage:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// Steps to test with DevTools:</span>
<span class="c1">// 1. Open Chrome DevTools (F12)</span>
<span class="c1">// 2. Go to Network tab</span>
<span class="c1">// 3. Filter by &quot;WS&quot; (WebSocket)</span>
<span class="c1">// 4. Connect to chat</span>
<span class="c1">// 5. View messages in real-time</span>
<span class="c1">// 6. Check for:</span>
<span class="c1">//    - Plaintext sensitive data</span>
<span class="c1">//    - Unencrypted connections (ws://)</span>
<span class="c1">//    - Token exposure</span>
</code></pre></div>
<h3 id="learning-path-for-phase-3">ğŸ“š Learning Path for Phase 3<a class="headerlink" href="#learning-path-for-phase-3" title="Permanent link">&para;</a></h3>
<p><strong>Week 10-11: Security Fundamentals</strong>
- Day 1-3: Study OWASP Top 10 (focus on A2, A4, A5)
- Day 4-7: Learn IDOR attacks and prevention
- Day 8-10: Study authentication/authorization patterns
- Day 11-14: Practice with Burp Suite</p>
<p><strong>Week 12-13: Practical Testing</strong>
- Day 15-17: Test IDOR vulnerabilities in chat app
- Day 18-21: Test authentication flows
- Day 22-24: Test encryption and data leak
- Day 25-28: Create security test report</p>
<hr />
<h1 id="phase-4-advanced-become-the-product-guardian-optional-10-weeks">ğŸš€ PHASE 4 â€” ADVANCED: BECOME "THE PRODUCT GUARDIAN" (Optional, 10+ Weeks)<a class="headerlink" href="#phase-4-advanced-become-the-product-guardian-optional-10-weeks" title="Permanent link">&para;</a></h1>
<h2 id="moving-beyond-testing">ğŸ¯ Moving Beyond Testing<a class="headerlink" href="#moving-beyond-testing" title="Permanent link">&para;</a></h2>
<p>At this phase, you're not just testingâ€”you're thinking like an architect.</p>
<h3 id="8-strategic-questioning-think-like-a-system-designer">8ï¸âƒ£ Strategic Questioning (Think Like a System Designer)<a class="headerlink" href="#8-strategic-questioning-think-like-a-system-designer" title="Permanent link">&para;</a></h3>
<p><strong>Instead of asking: "Does it work?"</strong></p>
<p><strong>Ask these questions instead:</strong></p>
<h4 id="question-1-architecture-understanding">Question 1: Architecture Understanding<a class="headerlink" href="#question-1-architecture-understanding" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>âŒ Bad Question:
&quot;Can users send messages?&quot;

âœ… Strategic Question:
&quot;How does the server broadcast one message to 1,000 users?
 - Does it use fan-out?
 - Is there a message queue?
 - How does it handle failures?&quot;
</code></pre></div>
<h4 id="question-2-failure-scenarios">Question 2: Failure Scenarios<a class="headerlink" href="#question-2-failure-scenarios" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>âŒ Bad Question:
&quot;What happens if server is down?&quot;

âœ… Strategic Question:
&quot;If one node in the cluster crashes:
 - Are messages lost?
 - How is chat history synced?
 - Can users reconnect to different node?
 - What&#39;s the recovery time?&quot;
</code></pre></div>
<h4 id="question-3-data-consistency">Question 3: Data Consistency<a class="headerlink" href="#question-3-data-consistency" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>âŒ Bad Question:
&quot;Are messages saved?&quot;

âœ… Strategic Question:
&quot;How is chat history synced when a user reconnects after 1 hour?
 - Are missed messages delivered?
 - Is there a message queue?
 - How are duplicates prevented?&quot;
</code></pre></div>
<h4 id="question-4-rate-limiting-strategy">Question 4: Rate Limiting Strategy<a class="headerlink" href="#question-4-rate-limiting-strategy" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>âŒ Bad Question:
&quot;Is there rate limiting?&quot;

âœ… Strategic Question:
&quot;Where is rate limiting implemented?
 - At gateway level?
 - At application level?
 - Per user or per room?
 - What happens when limit is exceeded?&quot;
</code></pre></div>
<h3 id="9-high-value-deliverables">9ï¸âƒ£ High-Value Deliverables<a class="headerlink" href="#9-high-value-deliverables" title="Permanent link">&para;</a></h3>
<p>Create these documents to prove your expertise:</p>
<h4 id="document-1-chat-performance-test-strategy">Document 1: Chat Performance Test Strategy<a class="headerlink" href="#document-1-chat-performance-test-strategy" title="Permanent link">&para;</a></h4>
<p><strong>Template Structure:</strong></p>
<div class="highlight"><pre><span></span><code><span class="gh"># Chat Application Performance Test Strategy</span>

<span class="gu">## 1. Executive Summary</span>
<span class="k">-</span><span class="w"> </span>Current capacity: X concurrent users
<span class="k">-</span><span class="w"> </span>Target capacity: Y concurrent users
<span class="k">-</span><span class="w"> </span>Key risks identified

<span class="gu">## 2. Test Objectives</span>
<span class="k">-</span><span class="w"> </span>Concurrent connection limits
<span class="k">-</span><span class="w"> </span>Message throughput requirements
<span class="k">-</span><span class="w"> </span>Latency SLAs

<span class="gu">## 3. Test Scenarios</span>
<span class="gu">### Scenario 1: Spike Connections</span>
<span class="k">-</span><span class="w"> </span>Objective
<span class="k">-</span><span class="w"> </span>Test design
<span class="k">-</span><span class="w"> </span>Success criteria

<span class="gu">### Scenario 2: Soak Test</span>
<span class="k">-</span><span class="w"> </span>Objective
<span class="k">-</span><span class="w"> </span>Test design
<span class="k">-</span><span class="w"> </span>Success criteria

<span class="gu">## 4. Metrics &amp; KPIs</span>
<span class="k">-</span><span class="w"> </span>Concurrent connections
<span class="k">-</span><span class="w"> </span>Message latency (p95, p99)
<span class="k">-</span><span class="w"> </span>Error rates

<span class="gu">## 5. Tools &amp; Infrastructure</span>
<span class="k">-</span><span class="w"> </span>k6 scripts
<span class="k">-</span><span class="w"> </span>Test data
<span class="k">-</span><span class="w"> </span>Monitoring setup

<span class="gu">## 6. Results &amp; Recommendations</span>
<span class="k">-</span><span class="w"> </span>Findings
<span class="k">-</span><span class="w"> </span>Bottlenecks identified
<span class="k">-</span><span class="w"> </span>Optimization suggestions
</code></pre></div>
<h4 id="document-2-security-checklist-for-real-time-messaging">Document 2: Security Checklist for Real-time Messaging<a class="headerlink" href="#document-2-security-checklist-for-real-time-messaging" title="Permanent link">&para;</a></h4>
<p><strong>Template:</strong></p>
<div class="highlight"><pre><span></span><code><span class="gh"># Security Checklist: Real-time Chat Application</span>

<span class="gu">## Authentication &amp; Authorization</span>
<span class="k">- [ ]</span> Tokens expire properly
<span class="k">- [ ]</span> Reconnection requires re-auth
<span class="k">- [ ]</span> Tokens not in URL
<span class="k">- [ ]</span> Role-based access control works

<span class="gu">## IDOR Prevention</span>
<span class="k">- [ ]</span> Users cannot join unauthorized rooms
<span class="k">- [ ]</span> Users cannot read other users&#39; messages
<span class="k">- [ ]</span> Users cannot impersonate others
<span class="k">- [ ]</span> Room permissions verified server-side

<span class="gu">## Encryption &amp; Privacy</span>
<span class="k">- [ ]</span> WebSocket uses WSS (not WS)
<span class="k">- [ ]</span> E2EE implemented (if required)
<span class="k">- [ ]</span> No sensitive data in logs
<span class="k">- [ ]</span> Error messages don&#39;t leak info

<span class="gu">## Rate Limiting</span>
<span class="k">- [ ]</span> Message rate limiting
<span class="k">- [ ]</span> Connection rate limiting
<span class="k">- [ ]</span> Prevents spam/DoS

<span class="gu">## Data Protection</span>
<span class="k">- [ ]</span> Messages encrypted at rest
<span class="k">- [ ]</span> Backup encryption
<span class="k">- [ ]</span> GDPR compliance (if applicable)
</code></pre></div>
<h4 id="document-3-real-time-failure-mode-analysis-fma">Document 3: Real-time Failure Mode Analysis (FMA)<a class="headerlink" href="#document-3-real-time-failure-mode-analysis-fma" title="Permanent link">&para;</a></h4>
<p><strong>Template:</strong></p>
<div class="highlight"><pre><span></span><code><span class="gh"># Failure Mode Analysis: Chat Application</span>

<span class="gu">## Failure Scenarios</span>

<span class="gu">### Scenario 1: Single Node Failure</span>
<span class="k">-</span><span class="w"> </span><span class="gs">**Impact**</span>: High
<span class="k">-</span><span class="w"> </span><span class="gs">**Probability**</span>: Medium
<span class="k">-</span><span class="w"> </span><span class="gs">**Detection**</span>: Automated monitoring
<span class="k">-</span><span class="w"> </span><span class="gs">**Recovery**</span>: Auto-failover to standby node
<span class="k">-</span><span class="w"> </span><span class="gs">**User Impact**</span>: Temporary disconnection (&lt; 5 seconds)

<span class="gu">### Scenario 2: Database Failure</span>
<span class="k">-</span><span class="w"> </span><span class="gs">**Impact**</span>: Critical
<span class="k">-</span><span class="w"> </span><span class="gs">**Probability**</span>: Low
<span class="k">-</span><span class="w"> </span><span class="gs">**Detection**</span>: Health checks
<span class="k">-</span><span class="w"> </span><span class="gs">**Recovery**</span>: Database replication, failover
<span class="k">-</span><span class="w"> </span><span class="gs">**User Impact**</span>: No message history until recovery

<span class="gu">### Scenario 3: Network Partition</span>
<span class="k">-</span><span class="w"> </span><span class="gs">**Impact**</span>: High
<span class="k">-</span><span class="w"> </span><span class="gs">**Probability**</span>: Low
<span class="k">-</span><span class="w"> </span><span class="gs">**Detection**</span>: Heartbeat monitoring
<span class="k">-</span><span class="w"> </span><span class="gs">**Recovery**</span>: Automatic reconnection
<span class="k">-</span><span class="w"> </span><span class="gs">**User Impact**</span>: Messages queued, delivered after reconnection

<span class="gu">## Mitigation Strategies</span>
<span class="k">-</span><span class="w"> </span>Redundancy
<span class="k">-</span><span class="w"> </span>Monitoring &amp; Alerting
<span class="k">-</span><span class="w"> </span>Graceful Degradation
</code></pre></div>
<h3 id="learning-path-for-phase-4">ğŸ“š Learning Path for Phase 4<a class="headerlink" href="#learning-path-for-phase-4" title="Permanent link">&para;</a></h3>
<p><strong>Week 14-16: System Design</strong>
- Study distributed systems basics
- Learn about message queues (RabbitMQ, Kafka)
- Understand load balancing and failover</p>
<p><strong>Week 17-20: Create Deliverables</strong>
- Write Performance Test Strategy
- Create Security Checklist
- Document Failure Mode Analysis</p>
<p><strong>Week 21-24: Present &amp; Refine</strong>
- Present to team/stakeholders
- Get feedback
- Refine documents
- Build portfolio</p>
<hr />
<h1 id="realistic-timeline-summary">â³ Realistic Timeline Summary<a class="headerlink" href="#realistic-timeline-summary" title="Permanent link">&para;</a></h1>
<div class="highlight"><pre><span></span><code>Timeline Overview:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Month 1: Foundation                                 â”‚
â”‚ âœ… Understand WebSocket/Socket.io                   â”‚
â”‚ âœ… Grasp real-time concepts                         â”‚
â”‚ âœ… Test basic chat functionality                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Month 2-3: Performance Testing                      â”‚
â”‚ âœ… Set up k6                                        â”‚
â”‚ âœ… Write performance test scripts                   â”‚
â”‚ âœ… Execute spike, soak, burst tests                 â”‚
â”‚ âœ… Analyze results                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Month 4: Security Testing                           â”‚
â”‚ âœ… Learn security testing tools                     â”‚
â”‚ âœ… Test IDOR vulnerabilities                        â”‚
â”‚ âœ… Test authentication/authorization                â”‚
â”‚ âœ… Create security checklist                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Month 5-6: Advanced (Optional)                      â”‚
â”‚ âœ… System design thinking                           â”‚
â”‚ âœ… Create comprehensive documents                   â”‚
â”‚ âœ… Become specialized Chat QA                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>
<hr />
<h1 id="quick-reference-guide">ğŸ“– Quick Reference Guide<a class="headerlink" href="#quick-reference-guide" title="Permanent link">&para;</a></h1>
<h2 id="key-metrics-cheat-sheet">Key Metrics Cheat Sheet<a class="headerlink" href="#key-metrics-cheat-sheet" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th style="text-align: left;">Metric</th>
<th style="text-align: left;">What It Measures</th>
<th style="text-align: left;">Good Value</th>
<th style="text-align: left;">How to Measure</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>Concurrent Connections</strong></td>
<td style="text-align: left;">Users connected simultaneously</td>
<td style="text-align: left;">10,000+</td>
<td style="text-align: left;">Count active WebSocket connections</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Message Throughput</strong></td>
<td style="text-align: left;">Messages processed per second</td>
<td style="text-align: left;">50,000+ msg/sec</td>
<td style="text-align: left;">Messages sent Ã· time</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Message Latency (p95)</strong></td>
<td style="text-align: left;">95% of messages delivered within</td>
<td style="text-align: left;">&lt; 100ms</td>
<td style="text-align: left;">Time from send to receive</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Drop Rate</strong></td>
<td style="text-align: left;">Percentage of failed connections</td>
<td style="text-align: left;">&lt; 0.1%</td>
<td style="text-align: left;">Failed connections / Total attempts</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Reconnect Rate</strong></td>
<td style="text-align: left;">Time to reconnect after disconnect</td>
<td style="text-align: left;">&lt; 2 seconds</td>
<td style="text-align: left;">Time from disconnect to reconnect</td>
</tr>
</tbody>
</table>
<h2 id="common-test-scenarios">Common Test Scenarios<a class="headerlink" href="#common-test-scenarios" title="Permanent link">&para;</a></h2>
<ol>
<li><strong>Spike Test</strong>: 0 â†’ 10k users in 1 minute</li>
<li><strong>Soak Test</strong>: 5k users for 8 hours</li>
<li><strong>Burst Test</strong>: 1 user sends 100 messages/second</li>
</ol>
<h2 id="security-test-checklist">Security Test Checklist<a class="headerlink" href="#security-test-checklist" title="Permanent link">&para;</a></h2>
<ul>
<li>[ ] IDOR: Can users access unauthorized rooms?</li>
<li>[ ] IDOR: Can users read other users' messages?</li>
<li>[ ] Auth: Do tokens expire?</li>
<li>[ ] Auth: Is reconnection authenticated?</li>
<li>[ ] Encryption: Is WSS used (not WS)?</li>
<li>[ ] Encryption: Are messages encrypted?</li>
<li>[ ] Data Leak: Are error messages safe?</li>
</ul>
<h2 id="tools-quick-reference">Tools Quick Reference<a class="headerlink" href="#tools-quick-reference" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>k6</strong>: Performance testing (recommended)</li>
<li><strong>Burp Suite</strong>: Security testing</li>
<li><strong>DevTools</strong>: Manual inspection</li>
<li><strong>Postman</strong>: WebSocket client testing</li>
</ul>
<hr />
<h1 id="conclusion">ğŸ“ Conclusion<a class="headerlink" href="#conclusion" title="Permanent link">&para;</a></h1>
<p>Chat application testing requires a completely different mindset from traditional web testing. Focus on:</p>
<ol>
<li><strong>Understanding real-time concepts</strong> (WebSocket, persistent connections)</li>
<li><strong>Performance metrics</strong> (concurrent connections, not just TPS)</li>
<li><strong>Security vulnerabilities</strong> (IDOR is very common in chat)</li>
<li><strong>System thinking</strong> (how does it work under the hood?)</li>
</ol>
<p><strong>Remember</strong>: Chat QA is a specialized skill. Master this, and you'll be in high demand! ğŸš€</p>
<hr />
<h2 id="additional-resources">ğŸ“š Additional Resources<a class="headerlink" href="#additional-resources" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSocket">WebSocket API - MDN</a></li>
<li><a href="https://socket.io/docs/v4/">Socket.io Documentation</a></li>
<li><a href="https://k6.io/docs/javascript-api/k6-ws/">k6 WebSocket Testing</a></li>
<li><a href="https://owasp.org/www-project-top-ten/">OWASP Top 10</a></li>
<li><a href="https://www.guru99.com/real-time-testing.html">Real-time Systems Testing Guide</a></li>
</ul>
<hr />
<h1 id="lo-trinh-hoc-ung-dung-chat-tu-con-so-0-en-chuyen-gia-qasdet-tieng-viet">ğŸ—ºï¸ Lá»˜ TRÃŒNH Há»ŒC á»¨NG Dá»¤NG CHAT Tá»ª CON Sá» 0 Äáº¾N CHUYÃŠN GIA QA/SDET (TIáº¾NG VIá»†T)<a class="headerlink" href="#lo-trinh-hoc-ung-dung-chat-tu-con-so-0-en-chuyen-gia-qasdet-tieng-viet" title="Permanent link">&para;</a></h1>
<h2 id="phan-0-thiet-lap-tu-duy-ung-chat-khac-web-thong-thuong">ğŸ¯ PHáº¦N 0: THIáº¾T Láº¬P TÆ¯ DUY ÄÃšNG - CHAT KHÃC WEB THÃ”NG THÆ¯á»œNG<a class="headerlink" href="#phan-0-thiet-lap-tu-duy-ung-chat-khac-web-thong-thuong" title="Permanent link">&para;</a></h2>
<h3 id="su-khac-biet-cot-loi-mot-vi-du-thuc-te">Sá»± KhÃ¡c Biá»‡t Cá»‘t LÃµi: Má»™t VÃ­ Dá»¥ Thá»±c Táº¿<a class="headerlink" href="#su-khac-biet-cot-loi-mot-vi-du-thuc-te" title="Permanent link">&para;</a></h3>
<p>HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ hai cÃ¡ch Ä‘á»ƒ liÃªn láº¡c vá»›i Ä‘á»“ng nghiá»‡p:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Giao Tiáº¿p ThÃ´ng ThÆ°á»ng (HTTP)</th>
<th style="text-align: left;">Giao Tiáº¿p Real-time (WebSocket)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Giá»‘ng nhÆ° gá»­i email: Báº¡n viáº¿t thÆ° â†’ gá»­i Ä‘i â†’ chá» Ä‘á»£i â†’ Ä‘á»“ng nghiá»‡p nháº­n Ä‘Æ°á»£c â†’ há» viáº¿t thÆ° tráº£ lá»i â†’ gá»­i láº¡i â†’ báº¡n nháº­n Ä‘Æ°á»£c. Má»—i láº§n trao Ä‘á»•i lÃ  má»™t quy trÃ¬nh Ä‘á»™c láº­p.</td>
<td style="text-align: left;">Giá»‘ng nhÆ° gá»i Ä‘iá»‡n thoáº¡i: Báº¡n nháº¥c mÃ¡y â†’ thiáº¿t láº­p cuá»™c gá»i â†’ giá»¯ Ä‘Æ°á»ng dÃ¢y má»Ÿ â†’ nÃ³i chuyá»‡n qua láº¡i ngay láº­p tá»©c â†’ khi xong thÃ¬ táº¯t mÃ¡y. Káº¿t ná»‘i Ä‘Æ°á»£c duy trÃ¬.</td>
</tr>
</tbody>
</table>
<h3 id="bang-so-sanh-ky-thuat-chi-tiet">Báº£ng So SÃ¡nh Ká»¹ Thuáº­t Chi Tiáº¿t<a class="headerlink" href="#bang-so-sanh-ky-thuat-chi-tiet" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th style="text-align: left;">TiÃªu ChÃ­</th>
<th style="text-align: left;">Web ThÃ´ng ThÆ°á»ng (HTTP)</th>
<th style="text-align: left;">Chat Real-time</th>
<th style="text-align: left;">Ã NghÄ©a Trong Kiá»ƒm Thá»­</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>MÃ´ hÃ¬nh</strong></td>
<td style="text-align: left;">Request/Response (Client luÃ´n chá»§ Ä‘á»™ng)</td>
<td style="text-align: left;">Persistent Connection (Káº¿t ná»‘i liÃªn tá»¥c, 2 chiá»u)</td>
<td style="text-align: left;">Thay vÃ¬ test API endpoint, báº¡n test káº¿t ná»‘i vÃ  luá»“ng sá»± kiá»‡n</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Tráº¡ng thÃ¡i</strong></td>
<td style="text-align: left;">Stateless (Má»—i request Ä‘á»™c láº­p)</td>
<td style="text-align: left;">Stateful (Server biáº¿t client nÃ o Ä‘ang káº¿t ná»‘i)</td>
<td style="text-align: left;">Cáº§n test duy trÃ¬ tráº¡ng thÃ¡i user trong room, session timeout</td>
</tr>
<tr>
<td style="text-align: left;"><strong>ÄÆ¡n vá»‹ Ä‘o</strong></td>
<td style="text-align: left;">TPS (Transactions Per Second)</td>
<td style="text-align: left;">Concurrent Connections + Messages Per Second</td>
<td style="text-align: left;">10,000 TPS â‰  10,000 user chat cÃ¹ng lÃºc. Chat cáº§n giá»¯ 10,000 káº¿t ná»‘i Ä‘á»“ng thá»i</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Äá»™ trá»…</strong></td>
<td style="text-align: left;">Page Load Time (vÃ i giÃ¢y)</td>
<td style="text-align: left;">Message Latency (vÃ i trÄƒm mili giÃ¢y)</td>
<td style="text-align: left;">NgÆ°á»i dÃ¹ng nháº­n tháº¥y ngay náº¿u tin nháº¯n cháº­m 1-2 giÃ¢y</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Giao thá»©c</strong></td>
<td style="text-align: left;">HTTP/HTTPS</td>
<td style="text-align: left;">WebSocket (ws://, wss://), thÆ°á»ng qua Socket.IO</td>
<td style="text-align: left;">CÃ´ng cá»¥ test pháº£i há»— trá»£ WebSocket, khÃ´ng dÃ¹ng Ä‘Æ°á»£c tool HTTP thÃ´ng thÆ°á»ng</td>
</tr>
</tbody>
</table>
<p><strong>VÃ­ dá»¥ thá»±c táº¿ vá» sá»± khÃ¡c biá»‡t:</strong></p>
<ul>
<li>Khi báº¡n vÃ o Facebook, trÃ¬nh duyá»‡t gá»­i 1 request Ä‘á»ƒ láº¥y news feed.</li>
<li>Khi báº¡n chat trÃªn Messenger, trÃ¬nh duyá»‡t má»Ÿ 1 káº¿t ná»‘i WebSocket vÃ  giá»¯ nÃ³ trong nhiá»u giá», qua Ä‘Ã³ nháº­n Ä‘Æ°á»£c tin nháº¯n má»›i ngay láº­p tá»©c mÃ  khÃ´ng cáº§n refresh.</li>
</ul>
<hr />
<h2 id="phan-1-nen-tang-web-socket-socketio-3-4-tuan">ğŸ”§ PHáº¦N 1: Ná»€N Táº¢NG WEB SOCKET &amp; SOCKET.IO (3-4 TUáº¦N)<a class="headerlink" href="#phan-1-nen-tang-web-socket-socketio-3-4-tuan" title="Permanent link">&para;</a></h2>
<h3 id="tuan-1-websocket-hieu-tu-goc-re">Tuáº§n 1: WebSocket - Hiá»ƒu Tá»« Gá»‘c Rá»…<a class="headerlink" href="#tuan-1-websocket-hieu-tu-goc-re" title="Permanent link">&para;</a></h3>
<h4 id="11-lifecycle-cua-websocket-vong-oi-ket-noi">1.1. Lifecycle cá»§a WebSocket (VÃ²ng Äá»i Káº¿t Ná»‘i)<a class="headerlink" href="#11-lifecycle-cua-websocket-vong-oi-ket-noi" title="Permanent link">&para;</a></h4>
<p><strong>QUÃ TRÃŒNH HANDSHAKE (Báº®T TAY):</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// Client gá»­i HTTP request Ä‘áº·c biá»‡t</span>
<span class="nx">GET</span><span class="w"> </span><span class="o">/</span><span class="nx">chat</span><span class="w"> </span><span class="nx">HTTP</span><span class="o">/</span><span class="mf">1.1</span>
<span class="nx">Host</span><span class="o">:</span><span class="w"> </span><span class="nx">server</span><span class="p">.</span><span class="nx">example</span><span class="p">.</span><span class="nx">com</span>
<span class="nx">Upgrade</span><span class="o">:</span><span class="w"> </span><span class="nx">websocket</span><span class="w">          </span><span class="c1">// &quot;TÃ´i muá»‘n nÃ¢ng cáº¥p lÃªn WebSocket&quot;</span>
<span class="nx">Connection</span><span class="o">:</span><span class="w"> </span><span class="nx">Upgrade</span>
<span class="nx">Sec</span><span class="o">-</span><span class="nx">WebSocket</span><span class="o">-</span><span class="nx">Key</span><span class="o">:</span><span class="w"> </span><span class="nx">dGhlIHNhbXBsZSBub25jZQ</span><span class="o">==</span>
<span class="nx">Sec</span><span class="o">-</span><span class="nx">WebSocket</span><span class="o">-</span><span class="nx">Version</span><span class="o">:</span><span class="w"> </span><span class="mf">13</span>

<span class="c1">// Server tráº£ lá»i</span>
<span class="nx">HTTP</span><span class="o">/</span><span class="mf">1.1</span><span class="w"> </span><span class="mf">101</span><span class="w"> </span><span class="nx">Switching</span><span class="w"> </span><span class="nx">Protocols</span>
<span class="nx">Upgrade</span><span class="o">:</span><span class="w"> </span><span class="nx">websocket</span><span class="w">          </span><span class="c1">// &quot;Äá»“ng Ã½ nÃ¢ng cáº¥p!&quot;</span>
<span class="nx">Connection</span><span class="o">:</span><span class="w"> </span><span class="nx">Upgrade</span>
<span class="nx">Sec</span><span class="o">-</span><span class="nx">WebSocket</span><span class="o">-</span><span class="nx">Accept</span><span class="o">:</span><span class="w"> </span><span class="nx">s3pPLMBiTxaQ9kYGzzhZRbK</span><span class="o">+</span><span class="nx">xOo</span><span class="o">=</span>

<span class="c1">// Tá»« Ä‘Ã¢y, káº¿t ná»‘i Ä‘Ã£ &quot;nÃ¢ng cáº¥p&quot; tá»« HTTP sang WebSocket</span>
<span class="c1">// Client vÃ  server cÃ³ thá»ƒ gá»­i/nháº­n data tá»± do</span>
</code></pre></div>
<p><strong>VÃ­ dá»¥ thá»±c táº¿ Ä‘á»ƒ hiá»ƒu Handshake:</strong></p>
<ul>
<li>Giá»‘ng nhÆ° báº¡n gá»i cho khÃ¡ch sáº¡n: "Alo, tÃ´i muá»‘n Ä‘áº·t phÃ²ng" (HTTP request)</li>
<li>Lá»… tÃ¢n tráº£ lá»i: "VÃ¢ng, tÃ´i chuyá»ƒn mÃ¡y cho bá»™ pháº­n Ä‘áº·t phÃ²ng" (101 Switching Protocols)</li>
<li>Sau Ä‘Ã³ báº¡n nÃ³i chuyá»‡n trá»±c tiáº¿p vá»›i nhÃ¢n viÃªn Ä‘áº·t phÃ²ng mÃ  khÃ´ng cáº§n thÃ´ng qua lá»… tÃ¢n ná»¯a (WebSocket connection)</li>
</ul>
<h4 id="12-cau-truc-mot-frame-websocket">1.2. Cáº¥u trÃºc má»™t Frame WebSocket<a class="headerlink" href="#12-cau-truc-mot-frame-websocket" title="Permanent link">&para;</a></h4>
<p>Má»—i tin nháº¯n qua WebSocket Ä‘Æ°á»£c Ä‘Ã³ng gÃ³i trong "frame":</p>
<div class="highlight"><pre><span></span><code>0                   1                   2                   3
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-------+-+-------------+-------------------------------+
|F|R|R|R| opcode|M| Payload len |    Extended payload length    |
|I|S|S|S|  (4)  |A|     (7)     |             (16/64)           |
|N|V|V|V|       |S|             |   (if payload len==126/127)   |
| |1|2|3|       |K|             |                               |
+-+-+-+-+-------+-+-------------+ - - - - - - - - - - - - - - - +
|     Extended payload length continued, if payload len == 127  |
+ - - - - - - - - - - - - - - - +-------------------------------+
|                               |Masking-key, if MASK set to 1  |
+-------------------------------+-------------------------------+
| Masking-key (continued)       |          Payload Data         |
+-------------------------------- - - - - - - - - - - - - - - - +
:                     Payload Data continued ...                :
+ - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - +
|                     Payload Data continued ...                |
+---------------------------------------------------------------+
</code></pre></div>
<p><strong>Ã nghÄ©a thá»±c táº¿:</strong></p>
<ul>
<li><strong>FIN bit</strong>: Cho biáº¿t Ä‘Ã¢y lÃ  frame cuá»‘i cÃ¹ng cá»§a message</li>
<li><strong>Opcode</strong>: 1 = text, 2 = binary (gá»­i file, hÃ¬nh áº£nh)</li>
<li><strong>Mask</strong>: Client pháº£i mask payload Ä‘á»ƒ báº£o máº­t</li>
<li><strong>Payload length</strong>: Äá»™ dÃ i thá»±c táº¿ cá»§a dá»¯ liá»‡u</li>
</ul>
<p><strong>VÃ­ dá»¥ debug thá»±c táº¿:</strong></p>
<ol>
<li>Má»Ÿ Chrome DevTools (F12)</li>
<li>VÃ o tab Network â†’ WS (WebSocket)</li>
<li>Click vÃ o má»™t káº¿t ná»‘i WebSocket</li>
<li>Báº¡n sáº½ tháº¥y cÃ¡c frame Ä‘Æ°á»£c hiá»ƒn thá»‹ real-time:</li>
</ol>
<div class="highlight"><pre><span></span><code>â–¼ Frame 45 (sent from client, 15 bytes)
  Message: {&quot;type&quot;:&quot;chat&quot;,&quot;text&quot;:&quot;Hello!&quot;}

â–¼ Frame 46 (received from server, 32 bytes)  
  Message: {&quot;type&quot;:&quot;chat&quot;,&quot;from&quot;:&quot;user123&quot;,&quot;text&quot;:&quot;Hi there!&quot;}
</code></pre></div>
<hr />
<h3 id="tuan-2-socketio-thu-vien-thong-minh-hon-websocket-thuan">Tuáº§n 2: Socket.IO - ThÆ° Viá»‡n "ThÃ´ng Minh" HÆ¡n WebSocket Thuáº§n<a class="headerlink" href="#tuan-2-socketio-thu-vien-thong-minh-hon-websocket-thuan" title="Permanent link">&para;</a></h3>
<h4 id="21-tai-sao-can-socketio">2.1. Táº¡i Sao Cáº§n Socket.IO?<a class="headerlink" href="#21-tai-sao-can-socketio" title="Permanent link">&para;</a></h4>
<p><strong>Váº¥n Ä‘á» vá»›i WebSocket thuáº§n:</strong></p>
<ul>
<li>âŒ KhÃ´ng tá»± reconnect: Náº¿u máº¡ng yáº¿u, káº¿t ná»‘i Ä‘á»©t â†’ user pháº£i refresh trang</li>
<li>âŒ KhÃ´ng fallback: TrÆ°á»ng há»£p firewall cháº·n WebSocket â†’ á»©ng dá»¥ng khÃ´ng hoáº¡t Ä‘á»™ng</li>
<li>âŒ KhÃ´ng cÃ³ room/namespace: Pháº£i tá»± implement cÆ¡ cháº¿ nhÃ³m chat</li>
</ul>
<p><strong>Giáº£i phÃ¡p Socket.IO:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// Server Ä‘Æ¡n giáº£n nháº¥t vá»›i Socket.IO</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">express</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">http</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;http&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Server</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;socket.io&#39;</span><span class="p">);</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">express</span><span class="p">();</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">server</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="nx">app</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">io</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Server</span><span class="p">(</span><span class="nx">server</span><span class="p">);</span>

<span class="c1">// Khi cÃ³ client káº¿t ná»‘i</span>
<span class="nx">io</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;connection&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">socket</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;User connected:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Gá»­i message riÃªng cho user nÃ y</span>
<span class="w">  </span><span class="nx">socket</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;welcome&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ChÃ o má»«ng!&#39;</span><span class="w"> </span><span class="p">});</span>

<span class="w">  </span><span class="c1">// Khi client gá»­i &#39;chat message&#39;</span>
<span class="w">  </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;chat message&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Message from&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">msg</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Gá»­i tin nháº¯n cho Táº¤T Cáº¢ client Ä‘ang káº¿t ná»‘i</span>
<span class="w">    </span><span class="nx">io</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;chat message&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kr">from</span><span class="o">:</span><span class="w"> </span><span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
<span class="w">      </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="nx">msg</span><span class="p">,</span>
<span class="w">      </span><span class="nx">timestamp</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">()</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="c1">// Khi client ngáº¯t káº¿t ná»‘i</span>
<span class="w">  </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;disconnect&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;User disconnected:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">});</span>

<span class="nx">server</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mf">3000</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Server running on port 3000&#39;</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<h4 id="22-co-che-fallback-thuc-te-socketio-linh-hoat">2.2. CÆ¡ Cháº¿ Fallback Thá»±c Táº¿ - Socket.IO "Linh Hoáº¡t"<a class="headerlink" href="#22-co-che-fallback-thuc-te-socketio-linh-hoat" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>Client muá»‘n káº¿t ná»‘i tá»›i Server
         â†“
Thá»­ káº¿t ná»‘i WebSocket (ws://)
         â†“
    [ThÃ nh cÃ´ng?]
         â†“
     /        \
   YES        NO (bá»‹ cháº·n/firewall)
    â†“           â†“
DÃ¹ng WebSocket  Thá»­ HTTP Long-Polling
                â†“
           [ThÃ nh cÃ´ng?]
                â†“
            /        \
          YES        NO
           â†“           â†“
    DÃ¹ng Long-Polling  Lá»—i káº¿t ná»‘i
</code></pre></div>
<p><strong>VÃ­ dá»¥ thá»±c táº¿ vá» fallback:</strong></p>
<ul>
<li>Báº¡n dÃ¹ng chat app trong tÃ²a nhÃ  vÄƒn phÃ²ng (firewall nghiÃªm ngáº·t)</li>
<li>á»¨ng dá»¥ng tá»± Ä‘á»™ng chuyá»ƒn sang cháº¿ Ä‘á»™ "compatible" (long-polling)</li>
<li>Báº¡n váº«n chat Ä‘Æ°á»£c, nhÆ°ng Ä‘á»™ trá»… cao hÆ¡n (1-2 giÃ¢y thay vÃ¬ vÃ i trÄƒm ms)</li>
<li>Khi vá» nhÃ , á»©ng dá»¥ng tá»± Ä‘á»™ng nÃ¢ng cáº¥p lÃªn WebSocket</li>
</ul>
<h4 id="23-cac-khai-niem-quan-trong-trong-socketio">2.3. CÃ¡c KhÃ¡i Niá»‡m Quan Trá»ng Trong Socket.IO<a class="headerlink" href="#23-cac-khai-niem-quan-trong-trong-socketio" title="Permanent link">&para;</a></h4>
<p><strong>a) Namespace (KhÃ´ng gian tÃªn):</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// Táº¡o namespace riÃªng cho admin</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">adminNamespace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">io</span><span class="p">.</span><span class="k">of</span><span class="p">(</span><span class="s1">&#39;/admin&#39;</span><span class="p">);</span>

<span class="nx">adminNamespace</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;connection&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">socket</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Chá»‰ nhá»¯ng client káº¿t ná»‘i Ä‘áº¿n &#39;/admin&#39; má»›i vÃ o Ä‘Æ°á»£c Ä‘Ã¢y</span>
<span class="w">  </span><span class="nx">socket</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;adminLog&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Welcome to admin panel&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// Client káº¿t ná»‘i Ä‘áº¿n namespace</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">socket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">io</span><span class="p">(</span><span class="s1">&#39;http://localhost:3000/admin&#39;</span><span class="p">);</span>
</code></pre></div>
<p><strong>VÃ­ dá»¥ thá»±c táº¿:</strong> Giá»‘ng nhÆ° má»™t tÃ²a nhÃ  cÃ³ nhiá»u phÃ²ng ban:</p>
<ul>
<li><code>/</code> - Lobby chung (chat cÃ´ng khai)</li>
<li><code>/admin</code> - PhÃ²ng admin (quáº£n lÃ½ user, xÃ³a tin nháº¯n)</li>
<li><code>/support</code> - PhÃ²ng há»— trá»£ khÃ¡ch hÃ ng</li>
</ul>
<p><strong>b) Room (PhÃ²ng chat):</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// User tham gia phÃ²ng</span>
<span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;join room&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">roomId</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Rá»i táº¥t cáº£ phÃ²ng trÆ°á»›c Ä‘Ã³</span>
<span class="w">  </span><span class="nx">socket</span><span class="p">.</span><span class="nx">leaveAll</span><span class="p">();</span>

<span class="w">  </span><span class="c1">// Tham gia phÃ²ng má»›i</span>
<span class="w">  </span><span class="nx">socket</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">roomId</span><span class="p">);</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`User </span><span class="si">${</span><span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="sb"> joined room </span><span class="si">${</span><span class="nx">roomId</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// ThÃ´ng bÃ¡o cho má»i ngÆ°á»i trong phÃ²ng (TRá»ª ngÆ°á»i vá»«a join)</span>
<span class="w">  </span><span class="nx">socket</span><span class="p">.</span><span class="nx">to</span><span class="p">(</span><span class="nx">roomId</span><span class="p">).</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;user joined&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">userId</span><span class="o">:</span><span class="w"> </span><span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
<span class="w">    </span><span class="nx">roomId</span><span class="o">:</span><span class="w"> </span><span class="nx">roomId</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">});</span>

<span class="c1">// Gá»­i tin nháº¯n Ä‘áº¿n 1 phÃ²ng cá»¥ thá»ƒ</span>
<span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;send to room&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Chá»‰ gá»­i Ä‘áº¿n user trong room &#39;data.roomId&#39;</span>
<span class="w">  </span><span class="nx">io</span><span class="p">.</span><span class="nx">to</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">roomId</span><span class="p">).</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;new message&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kr">from</span><span class="o">:</span><span class="w"> </span><span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
<span class="w">    </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">text</span><span class="p">,</span>
<span class="w">    </span><span class="nx">room</span><span class="o">:</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">roomId</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<p><strong>VÃ­ dá»¥ thá»±c táº¿ vá» room:</strong></p>
<ul>
<li>Slack: Má»—i channel (#general, #random) lÃ  má»™t room</li>
<li>Zoom: Má»—i phÃ²ng há»p lÃ  má»™t room</li>
<li>Game online: Má»—i phÃ²ng chÆ¡i lÃ  má»™t room</li>
</ul>
<p><strong>c) Broadcast (PhÃ¡t sÃ³ng):</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// 1. Gá»­i cho táº¥t cáº£ client (ká»ƒ cáº£ ngÆ°á»i gá»­i)</span>
<span class="nx">io</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;event&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">);</span>

<span class="c1">// 2. Gá»­i cho táº¥t cáº£ client (TRá»ª ngÆ°á»i gá»­i)</span>
<span class="nx">socket</span><span class="p">.</span><span class="nx">broadcast</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;event&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">);</span>

<span class="c1">// 3. Gá»­i cho táº¥t cáº£ client trong namespace (TRá»ª ngÆ°á»i gá»­i)</span>
<span class="nx">socket</span><span class="p">.</span><span class="nx">broadcast</span><span class="p">.</span><span class="nx">to</span><span class="p">(</span><span class="s1">&#39;roomName&#39;</span><span class="p">).</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;event&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">);</span>

<span class="c1">// 4. Gá»­i cho táº¥t cáº£ client trong room (ká»ƒ cáº£ ngÆ°á»i gá»­i)</span>
<span class="nx">io</span><span class="p">.</span><span class="nx">to</span><span class="p">(</span><span class="s1">&#39;roomName&#39;</span><span class="p">).</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;event&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">);</span>
</code></pre></div>
<hr />
<h3 id="tuan-3-4-xay-dung-ung-dung-chat-thuc-te">Tuáº§n 3-4: XÃ¢y Dá»±ng á»¨ng Dá»¥ng Chat Thá»±c Táº¿<a class="headerlink" href="#tuan-3-4-xay-dung-ung-dung-chat-thuc-te" title="Permanent link">&para;</a></h3>
<h4 id="31-ung-dung-chat-ay-u-tinh-nang">3.1. á»¨ng Dá»¥ng Chat Äáº§y Äá»§ TÃ­nh NÄƒng<a class="headerlink" href="#31-ung-dung-chat-ay-u-tinh-nang" title="Permanent link">&para;</a></h4>
<p><strong>Server (server.js):</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// server.js - Server hoÃ n chá»‰nh</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">express</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">http</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;http&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Server</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;socket.io&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">cors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;cors&#39;</span><span class="p">);</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">express</span><span class="p">();</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">cors</span><span class="p">());</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="k">static</span><span class="p">(</span><span class="s1">&#39;public&#39;</span><span class="p">));</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">server</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="nx">app</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">io</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Server</span><span class="p">(</span><span class="nx">server</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">cors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">origin</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;http://localhost:3000&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">methods</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;POST&quot;</span><span class="p">]</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="c1">// Cáº¥u hÃ¬nh quan trá»ng cho production</span>
<span class="w">  </span><span class="nx">pingTimeout</span><span class="o">:</span><span class="w"> </span><span class="mf">60000</span><span class="p">,</span><span class="w"> </span><span class="c1">// 60 giÃ¢y khÃ´ng pháº£n há»“i thÃ¬ timeout</span>
<span class="w">  </span><span class="nx">pingInterval</span><span class="o">:</span><span class="w"> </span><span class="mf">25000</span><span class="p">,</span><span class="w"> </span><span class="c1">// Má»—i 25 giÃ¢y gá»­i ping má»™t láº§n</span>
<span class="p">});</span>

<span class="c1">// LÆ°u trá»¯ táº¡m thá»i</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">users</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Map</span><span class="p">();</span><span class="w"> </span><span class="c1">// socket.id â†’ user info</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">rooms</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Map</span><span class="p">();</span><span class="w"> </span><span class="c1">// roomId â†’ { users: [], messages: [] }</span>

<span class="nx">io</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;connection&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">socket</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;New connection:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// 1. XÃC THá»°C USER</span>
<span class="w">  </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;authenticate&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">authData</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Trong thá»±c táº¿: verify JWT token</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
<span class="w">      </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="nx">authData</span><span class="p">.</span><span class="nx">username</span><span class="p">,</span>
<span class="w">      </span><span class="nx">joinedAt</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">()</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="nx">users</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">user</span><span class="p">);</span>
<span class="w">    </span><span class="nx">socket</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;authenticated&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">success</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="p">});</span>

<span class="w">    </span><span class="c1">// ThÃ´ng bÃ¡o cÃ³ user má»›i (cho má»i ngÆ°á»i trá»« user nÃ y)</span>
<span class="w">    </span><span class="nx">socket</span><span class="p">.</span><span class="nx">broadcast</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;user online&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">user</span><span class="p">);</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="c1">// 2. THAM GIA/THOÃT PHÃ’NG</span>
<span class="w">  </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;join room&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">roomId</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">users</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Rá»i phÃ²ng cÅ© (náº¿u cÃ³)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">socket</span><span class="p">.</span><span class="nx">rooms</span><span class="p">.</span><span class="nx">size</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">oldRoom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Array</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="nx">socket</span><span class="p">.</span><span class="nx">rooms</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="nx">r</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">r</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">oldRoom</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">socket</span><span class="p">.</span><span class="nx">leave</span><span class="p">(</span><span class="nx">oldRoom</span><span class="p">);</span>
<span class="w">        </span><span class="nx">socket</span><span class="p">.</span><span class="nx">to</span><span class="p">(</span><span class="nx">oldRoom</span><span class="p">).</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;user left&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">userId</span><span class="o">:</span><span class="w"> </span><span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
<span class="w">          </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="nx">user</span><span class="p">.</span><span class="nx">username</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Tham gia phÃ²ng má»›i</span>
<span class="w">    </span><span class="nx">socket</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">roomId</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Khá»Ÿi táº¡o phÃ²ng náº¿u chÆ°a cÃ³</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">rooms</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">roomId</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">rooms</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">roomId</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="nx">roomId</span><span class="p">,</span>
<span class="w">        </span><span class="nx">users</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Set</span><span class="p">(),</span>
<span class="w">        </span><span class="nx">messages</span><span class="o">:</span><span class="w"> </span><span class="p">[]</span>
<span class="w">      </span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">room</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">rooms</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">roomId</span><span class="p">);</span>
<span class="w">    </span><span class="nx">room</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Gá»­i lá»‹ch sá»­ chat cho user má»›i</span>
<span class="w">    </span><span class="nx">socket</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;room history&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">roomId</span><span class="p">,</span>
<span class="w">      </span><span class="nx">messages</span><span class="o">:</span><span class="w"> </span><span class="nx">room</span><span class="p">.</span><span class="nx">messages</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mf">50</span><span class="p">)</span><span class="w"> </span><span class="c1">// 50 tin nháº¯n gáº§n nháº¥t</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="c1">// ThÃ´ng bÃ¡o cho phÃ²ng</span>
<span class="w">    </span><span class="nx">socket</span><span class="p">.</span><span class="nx">to</span><span class="p">(</span><span class="nx">roomId</span><span class="p">).</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;user joined&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">userId</span><span class="o">:</span><span class="w"> </span><span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
<span class="w">      </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="nx">user</span><span class="p">.</span><span class="nx">username</span><span class="p">,</span>
<span class="w">      </span><span class="nx">roomId</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="c1">// 3. Gá»¬I TIN NHáº®N</span>
<span class="w">  </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;send message&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">users</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">roomId</span><span class="p">,</span><span class="w"> </span><span class="nx">text</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">data</span><span class="p">;</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">(),</span>
<span class="w">      </span><span class="kr">from</span><span class="o">:</span><span class="w"> </span><span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
<span class="w">      </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="nx">user</span><span class="p">.</span><span class="nx">username</span><span class="p">,</span>
<span class="w">      </span><span class="nx">text</span><span class="p">,</span>
<span class="w">      </span><span class="nx">timestamp</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">(),</span>
<span class="w">      </span><span class="nx">roomId</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="c1">// LÆ°u vÃ o lá»‹ch sá»­ phÃ²ng</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">room</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">rooms</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">roomId</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">room</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">room</span><span class="p">.</span><span class="nx">messages</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>

<span class="w">      </span><span class="c1">// Giá»›i háº¡n lá»‹ch sá»­ (1000 tin nháº¯n má»—i phÃ²ng)</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">room</span><span class="p">.</span><span class="nx">messages</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">1000</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">room</span><span class="p">.</span><span class="nx">messages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">room</span><span class="p">.</span><span class="nx">messages</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mf">1000</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Gá»­i Ä‘áº¿n táº¥t cáº£ user trong phÃ²ng</span>
<span class="w">    </span><span class="nx">io</span><span class="p">.</span><span class="nx">to</span><span class="p">(</span><span class="nx">roomId</span><span class="p">).</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;new message&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">message</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Log Ä‘á»ƒ debug</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`[</span><span class="si">${</span><span class="nx">roomId</span><span class="si">}</span><span class="sb">] </span><span class="si">${</span><span class="nx">user</span><span class="p">.</span><span class="nx">username</span><span class="si">}</span><span class="sb">: </span><span class="si">${</span><span class="nx">text</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="c1">// 4. TYPING INDICATOR (Ä‘ang gÃµ...)</span>
<span class="w">  </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;typing&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">roomId</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">users</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
<span class="w">    </span><span class="nx">socket</span><span class="p">.</span><span class="nx">to</span><span class="p">(</span><span class="nx">roomId</span><span class="p">).</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;user typing&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">userId</span><span class="o">:</span><span class="w"> </span><span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
<span class="w">      </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="nx">user</span><span class="p">.</span><span class="nx">username</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="c1">// 5. Xá»¬ LÃ NGáº®T Káº¾T Ná»I</span>
<span class="w">  </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;disconnect&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">users</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`User disconnected: </span><span class="si">${</span><span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="sb">, reason: </span><span class="si">${</span><span class="nx">reason</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">user</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// ThÃ´ng bÃ¡o user offline</span>
<span class="w">      </span><span class="nx">io</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;user offline&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">userId</span><span class="o">:</span><span class="w"> </span><span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="p">});</span>

<span class="w">      </span><span class="c1">// XÃ³a khá»i táº¥t cáº£ phÃ²ng</span>
<span class="w">      </span><span class="nx">rooms</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">room</span><span class="p">,</span><span class="w"> </span><span class="nx">roomId</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">room</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">room</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="ow">delete</span><span class="p">(</span><span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
<span class="w">          </span><span class="nx">io</span><span class="p">.</span><span class="nx">to</span><span class="p">(</span><span class="nx">roomId</span><span class="p">).</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;user left&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">userId</span><span class="o">:</span><span class="w"> </span><span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
<span class="w">            </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="nx">user</span><span class="p">.</span><span class="nx">username</span>
<span class="w">          </span><span class="p">});</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">});</span>

<span class="w">      </span><span class="nx">users</span><span class="p">.</span><span class="ow">delete</span><span class="p">(</span><span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">});</span>

<span class="c1">// API Ä‘á»ƒ láº¥y thÃ´ng tin server</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/api/stats&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">req</span><span class="p">,</span><span class="w"> </span><span class="nx">res</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span>
<span class="w">    </span><span class="nx">totalConnections</span><span class="o">:</span><span class="w"> </span><span class="nx">io</span><span class="p">.</span><span class="nx">engine</span><span class="p">.</span><span class="nx">clientsCount</span><span class="p">,</span>
<span class="w">    </span><span class="nx">totalUsers</span><span class="o">:</span><span class="w"> </span><span class="nx">users</span><span class="p">.</span><span class="nx">size</span><span class="p">,</span>
<span class="w">    </span><span class="nx">totalRooms</span><span class="o">:</span><span class="w"> </span><span class="nx">rooms</span><span class="p">.</span><span class="nx">size</span><span class="p">,</span>
<span class="w">    </span><span class="nx">uptime</span><span class="o">:</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">uptime</span><span class="p">()</span>
<span class="w">  </span><span class="p">});</span>
<span class="p">});</span>

<span class="nx">server</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mf">3000</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Server running at http://localhost:3000&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;WebSocket endpoint: ws://localhost:3000&#39;</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<h4 id="32-client-htmljs-ay-u">3.2. Client HTML/JS Äáº§y Äá»§<a class="headerlink" href="#32-client-htmljs-ay-u" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- public/index.html --&gt;</span>
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Real-time Chat App<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="w">    </span><span class="o">*</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="k">box-sizing</span><span class="p">:</span><span class="w"> </span><span class="kc">border-box</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="nt">body</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">font-family</span><span class="p">:</span><span class="w"> </span><span class="n">Arial</span><span class="p">,</span><span class="w"> </span><span class="kc">sans-serif</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>

<span class="w">    </span><span class="p">#</span><span class="nn">app</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">max-width</span><span class="p">:</span><span class="w"> </span><span class="mi">800</span><span class="kt">px</span><span class="p">;</span>
<span class="w">      </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="kt">px</span><span class="w"> </span><span class="kc">auto</span><span class="p">;</span>
<span class="w">      </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">.</span><span class="nc">auth-section</span><span class="o">,</span><span class="w"> </span><span class="p">.</span><span class="nc">chat-section</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="mh">#f5f5f5</span><span class="p">;</span>
<span class="w">      </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
<span class="w">      </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
<span class="w">      </span><span class="k">margin-bottom</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">.</span><span class="nc">room-list</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">flex</span><span class="p">;</span>
<span class="w">      </span><span class="k">gap</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
<span class="w">      </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="kt">px</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">.</span><span class="nc">room-btn</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="kt">px</span><span class="w"> </span><span class="mi">16</span><span class="kt">px</span><span class="p">;</span>
<span class="w">      </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="mh">#4CAF50</span><span class="p">;</span>
<span class="w">      </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="kc">white</span><span class="p">;</span>
<span class="w">      </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="kc">none</span><span class="p">;</span>
<span class="w">      </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
<span class="w">      </span><span class="k">cursor</span><span class="p">:</span><span class="w"> </span><span class="kc">pointer</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">.</span><span class="nc">room-btn</span><span class="p">.</span><span class="nc">active</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="mh">#2E7D32</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">.</span><span class="nc">chat-container</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">flex</span><span class="p">;</span>
<span class="w">      </span><span class="k">gap</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">.</span><span class="nc">messages</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">flex</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">      </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="kt">px</span><span class="p">;</span>
<span class="w">      </span><span class="k">overflow-y</span><span class="p">:</span><span class="w"> </span><span class="kc">auto</span><span class="p">;</span>
<span class="w">      </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="kc">white</span><span class="p">;</span>
<span class="w">      </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="kt">px</span><span class="p">;</span>
<span class="w">      </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">.</span><span class="nc">users</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">flex</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">      </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="kc">white</span><span class="p">;</span>
<span class="w">      </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="kt">px</span><span class="p">;</span>
<span class="w">      </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">.</span><span class="nc">message</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="kt">px</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">      </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="kt">px</span><span class="p">;</span>
<span class="w">      </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="mh">#e3f2fd</span><span class="p">;</span>
<span class="w">      </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">.</span><span class="nc">message</span><span class="p">.</span><span class="nc">own</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="mh">#c8e6c9</span><span class="p">;</span>
<span class="w">      </span><span class="k">text-align</span><span class="p">:</span><span class="w"> </span><span class="kc">right</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">.</span><span class="nc">typing-indicator</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">font-style</span><span class="p">:</span><span class="w"> </span><span class="kc">italic</span><span class="p">;</span>
<span class="w">      </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#666</span><span class="p">;</span>
<span class="w">      </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mf">0.9</span><span class="kt">em</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nt">input</span><span class="o">,</span><span class="w"> </span><span class="nt">button</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
<span class="w">      </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="kt">px</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">      </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;app&quot;</span><span class="p">&gt;</span>
    <span class="cm">&lt;!-- Pháº§n xÃ¡c thá»±c --&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;auth-section&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;authSection&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>ÄÄƒng nháº­p vÃ o Chat<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;usernameInput&quot;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;TÃªn cá»§a báº¡n&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;login()&quot;</span><span class="p">&gt;</span>VÃ o Chat<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

    <span class="cm">&lt;!-- Pháº§n chat (áº©n lÃºc Ä‘áº§u) --&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;chat-section&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;chatSection&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;display: none;&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Chat Room<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>

      <span class="cm">&lt;!-- Danh sÃ¡ch phÃ²ng --&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;room-list&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;room-btn active&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;joinRoom(&#39;general&#39;)&quot;</span><span class="p">&gt;</span>#general<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;room-btn&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;joinRoom(&#39;random&#39;)&quot;</span><span class="p">&gt;</span>#random<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;room-btn&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;joinRoom(&#39;support&#39;)&quot;</span><span class="p">&gt;</span>#support<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

      <span class="cm">&lt;!-- Khu vá»±c chat --&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;chat-container&quot;</span><span class="p">&gt;</span>
        <span class="cm">&lt;!-- Tin nháº¯n --&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;messages&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;messages&quot;</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;message system&quot;</span><span class="p">&gt;</span>ChÃ o má»«ng Ä‘áº¿n vá»›i chat!<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

        <span class="cm">&lt;!-- Danh sÃ¡ch user online --&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;users&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;usersList&quot;</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Online Users (<span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;onlineCount&quot;</span><span class="p">&gt;</span>0<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>)<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;users&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

      <span class="cm">&lt;!-- Input tin nháº¯n --&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;margin-top: 20px;&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;typingIndicator&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;typing-indicator&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;display: flex; gap: 10px;&quot;</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;messageInput&quot;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Nháº­p tin nháº¯n...&quot;</span> 
                 <span class="na">onkeyup</span><span class="o">=</span><span class="s">&quot;handleTyping(event)&quot;</span>
                 <span class="na">onkeypress</span><span class="o">=</span><span class="s">&quot;if(event.key==&#39;Enter&#39;) sendMessage()&quot;</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;sendMessage()&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;width: auto;&quot;</span><span class="p">&gt;</span>Gá»­i<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;/socket.io/socket.io.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">socket</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">currentUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">currentRoom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;general&#39;</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">typingTimeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// HÃ m Ä‘Äƒng nháº­p</span>
<span class="w">    </span><span class="kd">function</span><span class="w"> </span><span class="nx">login</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;usernameInput&#39;</span><span class="p">).</span><span class="nx">value</span><span class="p">.</span><span class="nx">trim</span><span class="p">();</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">username</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Vui lÃ²ng nháº­p tÃªn&#39;</span><span class="p">);</span>

<span class="w">      </span><span class="c1">// Káº¿t ná»‘i Socket.IO</span>
<span class="w">      </span><span class="nx">socket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">io</span><span class="p">(</span><span class="s1">&#39;http://localhost:3000&#39;</span><span class="p">);</span>

<span class="w">      </span><span class="c1">// Láº¯ng nghe cÃ¡c sá»± kiá»‡n</span>
<span class="w">      </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;connect&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Connected with ID:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Gá»­i thÃ´ng tin xÃ¡c thá»±c</span>
<span class="w">        </span><span class="nx">socket</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;authenticate&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">username</span><span class="w"> </span><span class="p">});</span>
<span class="w">      </span><span class="p">});</span>

<span class="w">      </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;authenticated&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">success</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">currentUser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">user</span><span class="p">;</span>

<span class="w">          </span><span class="c1">// Hiá»ƒn thá»‹ giao diá»‡n chat</span>
<span class="w">          </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;authSection&#39;</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;none&#39;</span><span class="p">;</span>
<span class="w">          </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;chatSection&#39;</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;block&#39;</span><span class="p">;</span>

<span class="w">          </span><span class="c1">// Tham gia phÃ²ng máº·c Ä‘á»‹nh</span>
<span class="w">          </span><span class="nx">joinRoom</span><span class="p">(</span><span class="s1">&#39;general&#39;</span><span class="p">);</span>

<span class="w">          </span><span class="c1">// Hiá»ƒn thá»‹ thÃ´ng bÃ¡o</span>
<span class="w">          </span><span class="nx">addSystemMessage</span><span class="p">(</span><span class="sb">`Báº¡n Ä‘Ã£ Ä‘Äƒng nháº­p vá»›i tÃªn: </span><span class="si">${</span><span class="nx">username</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">});</span>

<span class="w">      </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;user online&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">user</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">addSystemMessage</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">user</span><span class="p">.</span><span class="nx">username</span><span class="si">}</span><span class="sb"> Ä‘Ã£ online`</span><span class="p">);</span>
<span class="w">        </span><span class="nx">updateOnlineUsers</span><span class="p">();</span>
<span class="w">      </span><span class="p">});</span>

<span class="w">      </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;user offline&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">addSystemMessage</span><span class="p">(</span><span class="sb">`User </span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">userId</span><span class="si">}</span><span class="sb"> Ä‘Ã£ offline`</span><span class="p">);</span>
<span class="w">        </span><span class="nx">updateOnlineUsers</span><span class="p">();</span>
<span class="w">      </span><span class="p">});</span>

<span class="w">      </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;room history&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Hiá»ƒn thá»‹ lá»‹ch sá»­ chat</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">messagesDiv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;messages&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="nx">messagesDiv</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span>

<span class="w">        </span><span class="nx">data</span><span class="p">.</span><span class="nx">messages</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">msg</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">addMessage</span><span class="p">(</span><span class="nx">msg</span><span class="p">,</span><span class="w"> </span><span class="nx">msg</span><span class="p">.</span><span class="kr">from</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
<span class="w">        </span><span class="p">});</span>

<span class="w">        </span><span class="c1">// Cuá»™n xuá»‘ng dÆ°á»›i cÃ¹ng</span>
<span class="w">        </span><span class="nx">messagesDiv</span><span class="p">.</span><span class="nx">scrollTop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">messagesDiv</span><span class="p">.</span><span class="nx">scrollHeight</span><span class="p">;</span>
<span class="w">      </span><span class="p">});</span>

<span class="w">      </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;new message&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">message</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">addMessage</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span><span class="w"> </span><span class="nx">message</span><span class="p">.</span><span class="kr">from</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
<span class="w">      </span><span class="p">});</span>

<span class="w">      </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;user joined&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">roomId</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">currentRoom</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">addSystemMessage</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">username</span><span class="si">}</span><span class="sb"> Ä‘Ã£ tham gia phÃ²ng`</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">});</span>

<span class="w">      </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;user left&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">currentRoom</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">roomId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">addSystemMessage</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">username</span><span class="si">}</span><span class="sb"> Ä‘Ã£ rá»i phÃ²ng`</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">});</span>

<span class="w">      </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;user typing&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">userId</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="nx">socket</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="kd">const</span><span class="w"> </span><span class="nx">indicator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;typingIndicator&#39;</span><span class="p">);</span>
<span class="w">          </span><span class="nx">indicator</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">username</span><span class="si">}</span><span class="sb"> Ä‘ang nháº­p...`</span><span class="p">;</span>

<span class="w">          </span><span class="c1">// Clear sau 2 giÃ¢y</span>
<span class="w">          </span><span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">typingTimeout</span><span class="p">);</span>
<span class="w">          </span><span class="nx">typingTimeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">indicator</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="w">          </span><span class="p">},</span><span class="w"> </span><span class="mf">2000</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">});</span>

<span class="w">      </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;disconnect&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">reason</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">addSystemMessage</span><span class="p">(</span><span class="sb">`Máº¥t káº¿t ná»‘i: </span><span class="si">${</span><span class="nx">reason</span><span class="si">}</span><span class="sb">. Äang thá»­ káº¿t ná»‘i láº¡i...`</span><span class="p">);</span>
<span class="w">      </span><span class="p">});</span>

<span class="w">      </span><span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;connect_error&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Connection error:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
<span class="w">        </span><span class="nx">addSystemMessage</span><span class="p">(</span><span class="s1">&#39;Lá»—i káº¿t ná»‘i Ä‘áº¿n server&#39;</span><span class="p">);</span>
<span class="w">      </span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Tham gia phÃ²ng</span>
<span class="w">    </span><span class="kd">function</span><span class="w"> </span><span class="nx">joinRoom</span><span class="p">(</span><span class="nx">roomId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">socket</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">currentRoom</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="nx">roomId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Cáº­p nháº­t UI</span>
<span class="w">        </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;.room-btn&#39;</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">btn</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">btn</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s1">&#39;active&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">        </span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;active&#39;</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Gá»­i yÃªu cáº§u tham gia phÃ²ng</span>
<span class="w">        </span><span class="nx">socket</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;join room&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">roomId</span><span class="p">);</span>
<span class="w">        </span><span class="nx">currentRoom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">roomId</span><span class="p">;</span>

<span class="w">        </span><span class="c1">// Clear messages</span>
<span class="w">        </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;messages&#39;</span><span class="p">).</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">          </span><span class="sb">`&lt;div class=&quot;message system&quot;&gt;ÄÃ£ tham gia phÃ²ng: </span><span class="si">${</span><span class="nx">roomId</span><span class="si">}</span><span class="sb">&lt;/div&gt;`</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Gá»­i tin nháº¯n</span>
<span class="w">    </span><span class="kd">function</span><span class="w"> </span><span class="nx">sendMessage</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;messageInput&#39;</span><span class="p">);</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">input</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">trim</span><span class="p">();</span>

<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">text</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">socket</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">socket</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;send message&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">roomId</span><span class="o">:</span><span class="w"> </span><span class="nx">currentRoom</span><span class="p">,</span>
<span class="w">          </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="nx">text</span>
<span class="w">        </span><span class="p">});</span>

<span class="w">        </span><span class="nx">input</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Xá»­ lÃ½ typing indicator</span>
<span class="w">    </span><span class="kd">function</span><span class="w"> </span><span class="nx">handleTyping</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">key</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;Enter&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">sendMessage</span><span class="p">();</span>
<span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">socket</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">socket</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;typing&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">currentRoom</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// ThÃªm tin nháº¯n vÃ o UI</span>
<span class="w">    </span><span class="kd">function</span><span class="w"> </span><span class="nx">addMessage</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span><span class="w"> </span><span class="nx">isOwn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">messagesDiv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;messages&#39;</span><span class="p">);</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">messageDiv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>

<span class="w">      </span><span class="nx">messageDiv</span><span class="p">.</span><span class="nx">className</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`message </span><span class="si">${</span><span class="nx">isOwn</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s1">&#39;own&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<span class="w">      </span><span class="nx">messageDiv</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`</span>
<span class="sb">        &lt;strong&gt;</span><span class="si">${</span><span class="nx">message</span><span class="p">.</span><span class="nx">username</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;Unknown&#39;</span><span class="si">}</span><span class="sb">&lt;/strong&gt;</span>
<span class="sb">        &lt;span style=&quot;font-size: 0.8em; color: #666;&quot;&gt;</span>
<span class="sb">          (</span><span class="si">${</span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">(</span><span class="nx">message</span><span class="p">.</span><span class="nx">timestamp</span><span class="p">).</span><span class="nx">toLocaleTimeString</span><span class="p">()</span><span class="si">}</span><span class="sb">)</span>
<span class="sb">        &lt;/span&gt;</span>
<span class="sb">        &lt;div&gt;</span><span class="si">${</span><span class="nx">message</span><span class="p">.</span><span class="nx">text</span><span class="si">}</span><span class="sb">&lt;/div&gt;</span>
<span class="sb">      `</span><span class="p">;</span>

<span class="w">      </span><span class="nx">messagesDiv</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">messageDiv</span><span class="p">);</span>
<span class="w">      </span><span class="nx">messagesDiv</span><span class="p">.</span><span class="nx">scrollTop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">messagesDiv</span><span class="p">.</span><span class="nx">scrollHeight</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">function</span><span class="w"> </span><span class="nx">addSystemMessage</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">messagesDiv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;messages&#39;</span><span class="p">);</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">messageDiv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>

<span class="w">      </span><span class="nx">messageDiv</span><span class="p">.</span><span class="nx">className</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;message system&#39;</span><span class="p">;</span>
<span class="w">      </span><span class="nx">messageDiv</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">text</span><span class="p">;</span>

<span class="w">      </span><span class="nx">messagesDiv</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">messageDiv</span><span class="p">);</span>
<span class="w">      </span><span class="nx">messagesDiv</span><span class="p">.</span><span class="nx">scrollTop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">messagesDiv</span><span class="p">.</span><span class="nx">scrollHeight</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">function</span><span class="w"> </span><span class="nx">updateOnlineUsers</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// Trong thá»±c táº¿, server sáº½ gá»­i danh sÃ¡ch user</span>
<span class="w">      </span><span class="c1">// á» Ä‘Ã¢y chá»‰ minh há»a</span>
<span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Updating online users...&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>
<h3 id="bai-tap-thuc-hanh-tuan-3-4">BÃ i Táº­p Thá»±c HÃ nh Tuáº§n 3-4<a class="headerlink" href="#bai-tap-thuc-hanh-tuan-3-4" title="Permanent link">&para;</a></h3>
<h4 id="bai-tap-1-chay-ung-dung-co-ban">BÃ i táº­p 1: Cháº¡y á»©ng dá»¥ng cÆ¡ báº£n<a class="headerlink" href="#bai-tap-1-chay-ung-dung-co-ban" title="Permanent link">&para;</a></h4>
<ol>
<li>CÃ i Ä‘áº·t Node.js</li>
<li>Táº¡o thÆ° má»¥c <code>chat-app</code></li>
<li>Cháº¡y <code>npm init -y</code></li>
<li>CÃ i Ä‘áº·t dependencies: <code>npm install express socket.io cors</code></li>
<li>Copy code <code>server.js</code> vÃ o</li>
<li>Táº¡o thÆ° má»¥c <code>public</code>, copy file <code>index.html</code> vÃ o</li>
<li>Cháº¡y <code>node server.js</code></li>
<li>Má»Ÿ 2 tab trÃ¬nh duyá»‡t á»Ÿ <code>http://localhost:3000</code></li>
<li>Test chat giá»¯a 2 tab</li>
</ol>
<h4 id="bai-tap-2-them-tinh-nang">BÃ i táº­p 2: ThÃªm tÃ­nh nÄƒng<a class="headerlink" href="#bai-tap-2-them-tinh-nang" title="Permanent link">&para;</a></h4>
<ul>
<li>ThÃªm nÃºt "Create Room" Ä‘á»ƒ táº¡o phÃ²ng má»›i</li>
<li>ThÃªm tÃ­nh nÄƒng gá»­i hÃ¬nh áº£nh (dÃ¹ng base64)</li>
<li>ThÃªm notification sound khi cÃ³ tin nháº¯n má»›i</li>
<li>ThÃªm chá»©c nÄƒng "seen" (Ä‘Ã£ xem)</li>
</ul>
<h4 id="bai-tap-3-debug-voi-devtools">BÃ i táº­p 3: Debug vá»›i DevTools<a class="headerlink" href="#bai-tap-3-debug-voi-devtools" title="Permanent link">&para;</a></h4>
<ol>
<li>Má»Ÿ DevTools â†’ Network â†’ WS</li>
<li>Quan sÃ¡t handshake WebSocket</li>
<li>Xem cÃ¡c frame message Ä‘Æ°á»£c gá»­i/nháº­n</li>
<li>Thá»­ táº¯t WiFi Ä‘á»ƒ xem Socket.IO reconnect tháº¿ nÃ o</li>
<li>Check memory usage trong tab Memory</li>
</ol>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.expand", "navigation.sections", "navigation.top", "content.code.copy", "content.code.annotate", "search.highlight", "search.suggest"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>